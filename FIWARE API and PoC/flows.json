[
    {
        "id": "d1941bd5f7d007ad",
        "type": "tab",
        "label": "BD4NRG",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8a8bfba2422cf698",
        "type": "tab",
        "label": "FIWARE API (AIO)",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "828bae03b631ac33",
        "type": "tab",
        "label": "Ethereum",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "204a29931e5e7230",
        "type": "tab",
        "label": "FIWARE NGSI v2",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1d4de0a0.3422df",
        "type": "tab",
        "label": "FIWARE NGSI-LD",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ba9285a6.957868",
        "type": "tab",
        "label": "SAVE",
        "disabled": false,
        "info": ""
    },
    {
        "id": "48a7733923a33252",
        "type": "tab",
        "label": "Files v2 (reduced)",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f29ecd9eab0f0d83",
        "type": "tab",
        "label": "System v3",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ad74ebf02b043edd",
        "type": "tab",
        "label": "Test FIWARE Lab",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "416fb17dde932093",
        "type": "group",
        "z": "ba9285a6.957868",
        "name": "SETUP",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "30b8aaf6d52456ce"
        ],
        "x": 334,
        "y": 19
    },
    {
        "id": "34047250a1f44ce1",
        "type": "group",
        "z": "48a7733923a33252",
        "name": "",
        "style": {
            "stroke": "none",
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "1a1a090377e2b43e"
        ],
        "x": 334,
        "y": 19
    },
    {
        "id": "39f652babe826162",
        "type": "group",
        "z": "1d4de0a0.3422df",
        "name": "SETUP",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "98a25d956608fe16",
            "43ba68c.c64a398"
        ],
        "x": 274,
        "y": 19
    },
    {
        "id": "38c9d45a7c3e062f",
        "type": "group",
        "z": "204a29931e5e7230",
        "name": "FIWARE Lab",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "33a9735a5628993b",
            "e3ca9d0671c9fc1e",
            "171b84747715c128",
            "63f00eed41c192f8",
            "96355a0cac696254",
            "292bba24e28383ae",
            "62ba3fcd6ba74055",
            "31f16b7d8c113c20",
            "c445361ce2c45fb4",
            "a16a3956fe82a1d4",
            "b5d4b9ff56bf0fe1",
            "4786b8914334a6c7",
            "1c341ecd88c511f3",
            "60684f9c16c45d6c"
        ],
        "x": 14,
        "y": 259
    },
    {
        "id": "f7d9feccea57574d",
        "type": "group",
        "z": "d1941bd5f7d007ad",
        "name": "FIWARE Lab",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "08718cab97db517a",
            "a4fa860e2842049d",
            "b110327df641215f",
            "2f7300074a6404b1",
            "5a8c15bff9b54e41",
            "11985762eae251da",
            "30de0126f0eb29b6",
            "fceee10bb0db5223",
            "a4292deed5769105",
            "c29c14f291f0de78",
            "7957e7ce5d705253",
            "5ad2f56df7e9ccb6",
            "eef6765f00946f05",
            "a9a2a4d934838644"
        ],
        "x": 14,
        "y": 759,
        "w": 612,
        "h": 322
    },
    {
        "id": "47a07bf2e06a73f8",
        "type": "group",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "1e8fd5458624de22",
            "f94bfbfaf043fbdc",
            "2a196a41f3c82e78",
            "9ed42c72465b4a6d",
            "5e58a7bed6a31b7e",
            "7ddd8ec960bd082a",
            "8201684faa1c8fe5",
            "d7b0eb39f48a031e",
            "7c465bcd00552ea4",
            "c18e7b4dc4f7d07e",
            "807a8fc816f8beb0",
            "b38ff1c43be2ce73",
            "fa85f38fb103b07a",
            "4eddd0e5c5585e6c",
            "74123c5eeafb8062",
            "2187842a079e5b59",
            "3ca4ccfdab707ea8",
            "be5cac049bd6092b",
            "c1ea2965c8e3fcd7",
            "2b7cb9e1f1ee25ef",
            "389d50a593189d53",
            "cdfc67d170785dbb",
            "631640ca8d58dac6"
        ],
        "x": 14,
        "y": 1119,
        "w": 852,
        "h": 322
    },
    {
        "id": "c7063acd772bed39",
        "type": "group",
        "z": "8a8bfba2422cf698",
        "name": "SETUP",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "55a6a47440a8d06e"
        ],
        "x": 414,
        "y": 2879
    },
    {
        "id": "8cec89091c0fa3a3",
        "type": "group",
        "z": "8a8bfba2422cf698",
        "name": "SETUP",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "7720eb31f0d5cbaf",
            "beb080bcdead0a2c",
            "609afc63643098ee",
            "64fdef14ae4bac88",
            "36e0a5d5fa8bf423",
            "4e093b5c059098fa",
            "a6c1343521c2c851",
            "8f0b3df2b668ac3b",
            "6b518109bfce2398",
            "09482bd1a62e3b05",
            "4fa5d56f1ea8c158",
            "7397f5c4e72105a9",
            "c06a7df1e83b8acf",
            "b1252649654f3ee7",
            "c8607dab18066ff8",
            "978aae8a5ae0d23c",
            "0aae8bf9e8908954",
            "fd15089fa3e59f00",
            "66b18102718b85c8",
            "c29d752869c79a5c",
            "62a058eae9b0310f",
            "da1685f5ec68f07c",
            "3f76a21e3e653395",
            "ec9912f2843ecf5e",
            "fbf549245582690b",
            "4199924d0379446f"
        ],
        "x": 34,
        "y": 19
    },
    {
        "id": "95f6c009.fa934",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "ade1f84b9abbf285",
        "type": "ui_group",
        "name": "Monitoring data",
        "tab": "e6013c6f.69328",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a9912d64.97094",
        "type": "ui_group",
        "name": "System Information",
        "tab": "e6013c6f.69328",
        "order": 1,
        "disp": true,
        "width": "6"
    },
    {
        "id": "b6cc1aae65862dae",
        "type": "ui_group",
        "name": "Realtime",
        "tab": "e6013c6f.69328",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f6e5eaea1a3d31cf",
        "type": "ui_group",
        "name": "Loadavg",
        "tab": "e6013c6f.69328",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e6013c6f.69328",
        "type": "ui_tab",
        "name": "System Monitor",
        "icon": "memory",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "68ea59a18e66e807",
        "type": "ui_tab",
        "name": "BD4NRG",
        "icon": "fa-bold",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "47bd647b0bf55722",
        "type": "ui_group",
        "name": "Default",
        "tab": "68ea59a18e66e807",
        "order": 1,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "428fc8e6d916cf55",
        "type": "ui_group",
        "name": "FIWARE",
        "tab": "68ea59a18e66e807",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "3887268fb207a290",
        "type": "ui_group",
        "name": "Ethereum",
        "tab": "68ea59a18e66e807",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "a5b0ce2eb275e336",
        "type": "ethereum-client",
        "name": "Goerli (Infura)",
        "url": "https://goerli.infura.io/v3/5335c51b15474082b174e255701d969f"
    },
    {
        "id": "511b16494c95c3e9",
        "type": "smart-contract",
        "name": "My_PoE.sol (Goerli)",
        "ethereumClient": "a5b0ce2eb275e336",
        "address": "0xE1989a90127A449Bd22176299104cf6d2cb5Ba86",
        "abi": "[ \t{ \t\t\"inputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"string\", \t\t\t\t\"name\": \"document\", \t\t\t\t\"type\": \"string\" \t\t\t} \t\t], \t\t\"name\": \"notarize\", \t\t\"outputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"bytes32\", \t\t\t\t\"name\": \"\", \t\t\t\t\"type\": \"bytes32\" \t\t\t} \t\t], \t\t\"stateMutability\": \"nonpayable\", \t\t\"type\": \"function\" \t}, \t{ \t\t\"inputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"string\", \t\t\t\t\"name\": \"document\", \t\t\t\t\"type\": \"string\" \t\t\t} \t\t], \t\t\"name\": \"checkDocument\", \t\t\"outputs\": [ \t\t\t{ \t\t\t\t\"internalType\": \"bool\", \t\t\t\t\"name\": \"\", \t\t\t\t\"type\": \"bool\" \t\t\t} \t\t], \t\t\"stateMutability\": \"view\", \t\t\"type\": \"function\" \t} ]"
    },
    {
        "id": "160e81fb.f1c86e",
        "type": "ui_group",
        "name": "File Browser",
        "tab": "b63d1f91.68095",
        "order": 1,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "26e8fe8026c92abb",
        "type": "ui_group",
        "name": "Properties",
        "tab": "b63d1f91.68095",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4128a70510a0cd4e",
        "type": "ui_group",
        "name": "Preview",
        "tab": "b63d1f91.68095",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b63d1f91.68095",
        "type": "ui_tab",
        "name": "File Manager",
        "icon": "folder_open",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "a46f63f7bc8183e7",
        "type": "sender-account",
        "name": "Account 2 Metamask",
        "ethereumClient": "6405face102d3b52",
        "address": "0x7efC9d38581c7Cb8372325c349Ec5095D027B3Dd",
        "managedByEthereumClient": false,
        "transactionQueueSize": "100"
    },
    {
        "id": "93b18379800c0f5a",
        "type": "ethers-wallet",
        "name": "Account 2 Metamask",
        "keyPublic": "${ETHEREUM_PUBLIC_KEY}",
        "keyPublicType": "str",
        "keyPrivateType": "str"
    },
    {
        "id": "d9ce9f5276beafeb",
        "type": "ethers-network",
        "name": "",
        "url": "goerli"
    },
    {
        "id": "0a1c6c0edd1fd842",
        "type": "ethers-network",
        "name": "",
        "url": "ropsten"
    },
    {
        "id": "26a531bf9aef221a",
        "type": "ethers-contract",
        "name": "My_PoE.sol (Remix)",
        "address": "0xE1989a90127A449Bd22176299104cf6d2cb5Ba86",
        "abi": "[\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"document\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"notarize\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"bytes32\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"bytes32\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"document\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"checkDocument\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t}\n]"
    },
    {
        "id": "5a6b78f4b2dc9415",
        "type": "Context-Broker",
        "name": "FIWARE Lab",
        "endpoint": "http://orion.lab.fiware.org:1026/",
        "service": "",
        "servicepath": "",
        "idmEndpoint": "https://account.lab.fiware.org/"
    },
    {
        "id": "af20b3f79a99fb33",
        "type": "ui_tab",
        "name": "HTML Viewer",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "bb8657c15acd1db1",
        "type": "ui_group",
        "name": "Preview",
        "tab": "af20b3f79a99fb33",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "6405face102d3b52",
        "type": "ethereum-client",
        "name": "Replit testnet (chain id:1919250540)",
        "url": "https://eth.replit.com"
    },
    {
        "id": "4fa439e414df7abd",
        "type": "ethers-contract",
        "name": "Hello world",
        "address": "0x8fF6a9457c915e18B0108F4D487FEdDf29FEd71C",
        "abi": "[\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"name\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"hello\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"pure\",\n\t\t\"type\": \"function\"\n\t}\n]"
    },
    {
        "id": "f5beadddefe0aa3a",
        "type": "ui_link",
        "d": true,
        "name": "Editor",
        "link": "editor",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 6
    },
    {
        "id": "d30314b8512b1944",
        "type": "Context-Broker",
        "name": "Orion LD",
        "endpoint": "http://217.172.12.210:1027",
        "service": "",
        "servicepath": "",
        "idmEndpoint": "http://217.172.12.210:3005"
    },
    {
        "id": "2ee3bb7da0d2e2d7",
        "type": "Context-Broker",
        "name": "Orion + Keyrock (Public IP)",
        "endpoint": "http://217.172.12.210:1026",
        "service": "",
        "servicepath": "",
        "idmEndpoint": "http://217.172.12.210:3005"
    },
    {
        "id": "159d9aad9362c1ea",
        "type": "Context-Broker",
        "name": "Orion LD + PEP Proxy",
        "endpoint": "https://1029-https://zeldalegend-tutorialspe-3g46xobmr8t.ws-eu59.gitpod.io",
        "service": "",
        "servicepath": "",
        "idmEndpoint": "https://3005-https://zeldalegend-tutorialspe-3g46xobmr8t.ws-eu59.gitpod.io/"
    },
    {
        "id": "e0df808ced6efc5d",
        "type": "Context-Broker",
        "name": "Orion + PEP Proxy",
        "endpoint": "https://1027-zeldalegend-tutorialspe-3g46xobmr8t.ws-eu59.gitpod.io",
        "service": "",
        "servicepath": "",
        "idmEndpoint": "https://3005-zeldalegend-tutorialspe-3g46xobmr8t.ws-eu59.gitpod.io"
    },
    {
        "id": "7785b085c868737e",
        "type": "smart-contract",
        "name": "My_Poe.sol (Replit)",
        "ethereumClient": "6405face102d3b52",
        "address": "0x695bC4f8CEAbdD66650B1333ed7F7EC5d5B16359",
        "abi": "[{\"inputs\":[{\"internalType\":\"string\",\"name\":\"document\",\"type\":\"string\"}],\"name\":\"checkDocument\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"document\",\"type\":\"string\"}],\"name\":\"notarize\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"
    },
    {
        "id": "b0aa062ae14aec82",
        "type": "ui_template",
        "z": "d1941bd5f7d007ad",
        "group": "428fc8e6d916cf55",
        "name": "Orion",
        "order": 3,
        "width": 6,
        "height": 3,
        "format": "<textarea style=\"font-size:14px;\" rows=\"9\">{{msg.payload}}</textarea>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 590,
        "y": 220,
        "wires": [
            [
                "e6fe858fb03e0eb7"
            ]
        ]
    },
    {
        "id": "ad142ac739e8c3d6",
        "type": "NGSI-Update",
        "z": "d1941bd5f7d007ad",
        "name": "append",
        "endpoint": "2ee3bb7da0d2e2d7",
        "protocol": "v2",
        "updateMode": "upsert-replace",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 780,
        "y": 240,
        "wires": [
            [
                "ba603f936102e192"
            ]
        ]
    },
    {
        "id": "ba603f936102e192",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "fiware",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "topic",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 930,
        "y": 220,
        "wires": []
    },
    {
        "id": "5dd9d0f48888dd2b",
        "type": "ui_template",
        "z": "d1941bd5f7d007ad",
        "group": "3887268fb207a290",
        "name": "Goerli",
        "order": 2,
        "width": 6,
        "height": 3,
        "format": "<textarea style=\"font-size:14px;\" rows=\"9\">{{msg.payload}}</textarea>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 750,
        "y": 540,
        "wires": [
            [
                "3de5615b1a791c3a",
                "5fdeac8aa8ee5555"
            ]
        ]
    },
    {
        "id": "4af4f5c98fe970b6",
        "type": "http in",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "url": "/universe",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 260,
        "y": 440,
        "wires": [
            [
                "ee8962a089191556",
                "5968145a73ae826f"
            ]
        ]
    },
    {
        "id": "ee8962a089191556",
        "type": "json",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 430,
        "y": 440,
        "wires": [
            [
                "84325e852cd91bbc"
            ]
        ]
    },
    {
        "id": "0ae620afde38d774",
        "type": "ui_button",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "group": "428fc8e6d916cf55",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Subscribe",
        "tooltip": "Send to BC via CB subscription",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "create",
        "payload": "",
        "payloadType": "date",
        "topic": "topic",
        "topicType": "msg",
        "x": 220,
        "y": 320,
        "wires": [
            [
                "d3d7aa1719ed7414"
            ]
        ]
    },
    {
        "id": "5b09a16598c03782",
        "type": "ui_button",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "group": "428fc8e6d916cf55",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "Unsubscribe",
        "tooltip": "Clear all CB subscriptions",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "first",
        "topicType": "flow",
        "x": 230,
        "y": 280,
        "wires": [
            [
                "f09ee7f84666647b"
            ]
        ]
    },
    {
        "id": "f50061fefb281e92",
        "type": "ui_text_input",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "label": "Reference",
        "tooltip": "",
        "group": "47bd647b0bf55722",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 250,
        "y": 80,
        "wires": [
            [
                "d754afb708511a1f"
            ]
        ]
    },
    {
        "id": "f918866df95aa319",
        "type": "ui_button",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "group": "47bd647b0bf55722",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Submit",
        "tooltip": "Send to the CB",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "send",
        "payload": "",
        "payloadType": "date",
        "topic": "test",
        "topicType": "flow",
        "x": 220,
        "y": 220,
        "wires": [
            [
                "ab7c32eaba05c040"
            ]
        ]
    },
    {
        "id": "d754afb708511a1f",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "test.ref",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "5abf32045326370b",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "test.result",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "2b19c6fe094577cf",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "test.level",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "6bf43fd011ab4350",
        "type": "ui_dropdown",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "label": "Level",
        "tooltip": "",
        "place": "Select option",
        "group": "47bd647b0bf55722",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "Unit",
                "value": "Unit",
                "type": "str"
            },
            {
                "label": "Integration",
                "value": "Integration",
                "type": "str"
            },
            {
                "label": "System",
                "value": "System",
                "type": "str"
            },
            {
                "label": "Acceptance",
                "value": "Acceptance",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 250,
        "y": 20,
        "wires": [
            [
                "2b19c6fe094577cf"
            ]
        ]
    },
    {
        "id": "394710e6d4b0197b",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "name": "NGSI v2",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"id\": \"urn:entities:{{topic.ref}}\",\n    \"type\": \"Test\",\n    \"level\": {\n        \"type\": \"Text\",\n        \"value\": \"{{topic.level}}\"\n    },\n    \"reference\": {\n        \"type\": \"Text\",\n        \"value\": \"{{topic.ref}}\"\n    },\n    \"result\": {\n        \"type\": \"Integer\",\n        \"value\": {{topic.result}}\n    },\n    \"timestamp\": {\n        \"type\": \"Integer\",\n        \"value\": {{payload}}\n    }\n}",
        "output": "json",
        "x": 440,
        "y": 240,
        "wires": [
            [
                "b0aa062ae14aec82"
            ]
        ]
    },
    {
        "id": "7a8e8a2b7ca4abf1",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Acceptance",
        "payloadType": "str",
        "x": 110,
        "y": 20,
        "wires": [
            [
                "6bf43fd011ab4350"
            ]
        ]
    },
    {
        "id": "b5c2299b06b6634e",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "IT001",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "IT001",
        "payloadType": "str",
        "x": 90,
        "y": 60,
        "wires": [
            [
                "f50061fefb281e92"
            ]
        ]
    },
    {
        "id": "6f2b2772d154c0da",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "manual",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 90,
        "y": 220,
        "wires": [
            [
                "f918866df95aa319"
            ]
        ]
    },
    {
        "id": "6ca1f6a3fde1a006",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "200",
        "payloadType": "num",
        "x": 90,
        "y": 140,
        "wires": [
            [
                "5155a48296754627"
            ]
        ]
    },
    {
        "id": "5155a48296754627",
        "type": "ui_numeric",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "label": "Test result",
        "tooltip": "",
        "group": "47bd647b0bf55722",
        "order": 5,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "time",
        "topicType": "msg",
        "format": "{{value}}",
        "min": "100",
        "max": "500",
        "step": "100",
        "className": "",
        "x": 230,
        "y": 140,
        "wires": [
            [
                "5abf32045326370b"
            ]
        ]
    },
    {
        "id": "6265d5b18499db85",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.orion+token",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 320,
        "wires": [
            [
                "e3182483022d9c8b"
            ]
        ]
    },
    {
        "id": "96cb907e17db1a15",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "subs",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.statusCode",
        "statusType": "msg",
        "x": 430,
        "y": 380,
        "wires": []
    },
    {
        "id": "96dce36c6817322e",
        "type": "comment",
        "z": "d1941bd5f7d007ad",
        "name": "set notification endpoint",
        "info": "",
        "x": 140,
        "y": 420,
        "wires": []
    },
    {
        "id": "03e15d49a8d6111c",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "name": "hash, link",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "TXN in progress...\n\nHash: {{payload}}\nLink: https://goerli.etherscan.io/tx/{{payload}}",
        "output": "str",
        "x": 760,
        "y": 460,
        "wires": [
            [
                "5c1c64259f8f1c39",
                "55dc4a890bef9c34"
            ]
        ]
    },
    {
        "id": "abc216383baa0295",
        "type": "NGSI-Subscription",
        "z": "d1941bd5f7d007ad",
        "name": "Test (v2)",
        "endpoint": "2ee3bb7da0d2e2d7",
        "protocol": "v2",
        "ldContext": "https://schema.lab.fiware.org/ld/context",
        "entityType": "Test",
        "watchedAttributes": "",
        "q": "level==Acceptance;result<300",
        "notificationMode": "normalized",
        "notificationEndpoint": "https://bd4nrg.engsep.repl.co/universe",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 280,
        "y": 400,
        "wires": [
            [
                "96cb907e17db1a15"
            ]
        ]
    },
    {
        "id": "29e39b9575f84b99",
        "type": "ui_template",
        "z": "d1941bd5f7d007ad",
        "d": true,
        "group": "47bd647b0bf55722",
        "name": "Banner",
        "order": 2,
        "width": 0,
        "height": 0,
        "format": "<div style=\"background-image:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSwMkp29oQjL16Cwdq8l3BOaMDBJTNXSeWdvA&usqp=CAU');text-align:center;font-size:40px;color:white;\">\n    <b>FE Universe</b>\n</div>\n<h4>(C) Alerox, 2022</h4>\n\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 940,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "84325e852cd91bbc",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "notify",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].id",
        "statusType": "msg",
        "x": 570,
        "y": 440,
        "wires": []
    },
    {
        "id": "3de5615b1a791c3a",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "block hash",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.blockHash",
        "statusType": "msg",
        "x": 910,
        "y": 560,
        "wires": []
    },
    {
        "id": "5c1c64259f8f1c39",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "txn hash",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "summary.txHash",
        "statusType": "msg",
        "x": 920,
        "y": 460,
        "wires": []
    },
    {
        "id": "33ad64e368fbc48a",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "name": "NGSI-LD",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "[{\n    \"@context\": [\n        \"https://schema.lab.fiware.org/ld/context\"\n    ],\n    \"id\": \"urn:entities:{{topic.ref}}\",\n    \"type\": \"Test\",\n    \"level\": {\n        \"type\": \"Property\",\n        \"value\": \"{{topic.level}}\"\n    },\n    \"reference\": {\n        \"type\": \"Property\",\n        \"value\": \"{{topic.ref}}\"\n    },\n    \"result\": {\n        \"type\": \"Property\",\n        \"value\": {{topic.result}}\n    },\n    \"timestamp\": {\n        \"type\": \"Property\",\n        \"value\": {{payload}}\n    }\n}]",
        "output": "json",
        "x": 440,
        "y": 200,
        "wires": [
            [
                "b0aa062ae14aec82"
            ]
        ]
    },
    {
        "id": "6fecc37aea8dc6b4",
        "type": "NGSI-Update",
        "z": "d1941bd5f7d007ad",
        "name": "upsert LD",
        "endpoint": "d30314b8512b1944",
        "protocol": "LD",
        "updateMode": "upsert-replace",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 780,
        "y": 200,
        "wires": [
            [
                "ba603f936102e192"
            ]
        ]
    },
    {
        "id": "5b9793b84b408181",
        "type": "NGSI-Subscription",
        "z": "d1941bd5f7d007ad",
        "name": "Test (LD)",
        "endpoint": "d30314b8512b1944",
        "protocol": "LD",
        "ldContext": "https://schema.lab.fiware.org/ld/context",
        "entityType": "Test",
        "watchedAttributes": "",
        "q": "result<300&level==Acceptance",
        "notificationMode": "normalized",
        "notificationEndpoint": "https://bd4nrg.engsep.repl.co/universe",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 280,
        "y": 360,
        "wires": [
            [
                "96cb907e17db1a15"
            ]
        ]
    },
    {
        "id": "7bf45b22ea89e196",
        "type": "contract-call",
        "z": "d1941bd5f7d007ad",
        "name": "notarize",
        "smartContract": "7785b085c868737e",
        "contractFunction": "notarize",
        "senderAccount": "a46f63f7bc8183e7",
        "readonlyFunction": false,
        "weiTransfer": "",
        "onlyEstimateGas": false,
        "useEstimatedGasLimit": true,
        "gasLimit": "46591",
        "usePreviousBlocksGasPrice": true,
        "gasPrice": "46591",
        "fetchFullTransaction": false,
        "x": 580,
        "y": 500,
        "wires": [
            [
                "03e15d49a8d6111c"
            ],
            [
                "5dd9d0f48888dd2b"
            ]
        ]
    },
    {
        "id": "da15b7ad18331023",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "TEST",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 90,
        "y": 480,
        "wires": [
            [
                "42fc3620746dd90a"
            ]
        ]
    },
    {
        "id": "cf2e3369cdb52d66",
        "type": "NGSI-Dataset",
        "z": "d1941bd5f7d007ad",
        "name": "Test (v2)",
        "endpoint": "2ee3bb7da0d2e2d7",
        "protocol": "v2",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "Test",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 220,
        "y": 540,
        "wires": [
            [
                "9b5d1d438e0e0eb3"
            ]
        ]
    },
    {
        "id": "9b5d1d438e0e0eb3",
        "type": "json",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 325,
        "y": 520,
        "wires": [
            [
                "590df884936a6e80"
            ]
        ],
        "l": false
    },
    {
        "id": "590df884936a6e80",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "debug",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 90,
        "y": 560,
        "wires": []
    },
    {
        "id": "b8b222508837a6ff",
        "type": "NGSI-Dataset",
        "z": "d1941bd5f7d007ad",
        "name": "Test (LD)",
        "endpoint": "d30314b8512b1944",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "Test",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 220,
        "y": 500,
        "wires": [
            [
                "9b5d1d438e0e0eb3"
            ]
        ]
    },
    {
        "id": "d87f38d92cdf5847",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "orion-proxy",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 100,
        "y": 660,
        "wires": [
            [
                "c28e6bdc6d828584"
            ]
        ]
    },
    {
        "id": "c28e6bdc6d828584",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "get all entities",
        "rules": [
            {
                "t": "set",
                "p": "access_token",
                "pt": "msg",
                "to": "access_token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"options\":\"keyValues\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "bearer",
                "pt": "msg",
                "to": "\"Bearer \" & access_token",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 660,
        "wires": [
            [
                "40639b3075ee5091"
            ]
        ]
    },
    {
        "id": "40639b3075ee5091",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "GET /v2/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "bearer"
            }
        ],
        "x": 460,
        "y": 660,
        "wires": [
            [
                "24a8c86827275d85",
                "4c64fa3f62627915"
            ]
        ]
    },
    {
        "id": "332ffa67b07fddf6",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 660,
        "wires": []
    },
    {
        "id": "24a8c86827275d85",
        "type": "split",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 770,
        "y": 660,
        "wires": [
            [
                "332ffa67b07fddf6"
            ]
        ]
    },
    {
        "id": "654e7cf42a2f857d",
        "type": "comment",
        "z": "d1941bd5f7d007ad",
        "name": "Dump all entities (v2)",
        "info": "",
        "x": 140,
        "y": 620,
        "wires": []
    },
    {
        "id": "4c64fa3f62627915",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 720,
        "wires": []
    },
    {
        "id": "9f5b107922e6d70b",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "split",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & \" subs\"",
        "statusType": "jsonata",
        "x": 930,
        "y": 300,
        "wires": []
    },
    {
        "id": "399c95220cb5a598",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "manual",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 90,
        "y": 280,
        "wires": [
            [
                "5b09a16598c03782"
            ]
        ]
    },
    {
        "id": "4011e5c3bcbd5a6a",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "manual",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 90,
        "y": 320,
        "wires": [
            [
                "0ae620afde38d774"
            ]
        ]
    },
    {
        "id": "778347a774344079",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.orion-ld",
        "rules": [
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 280,
        "wires": [
            [
                "54f52bb3d30ba4ef"
            ]
        ]
    },
    {
        "id": "e3182483022d9c8b",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 740,
        "y": 320,
        "wires": [
            [
                "9f5b107922e6d70b",
                "7ea57114da139fd3"
            ]
        ]
    },
    {
        "id": "5b0e0d3c8e779838",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "DELETE /v2/subscriptions/{id}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 710,
        "y": 400,
        "wires": [
            [
                "330efd089e60b074"
            ]
        ]
    },
    {
        "id": "7ea57114da139fd3",
        "type": "split",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 930,
        "y": 300,
        "wires": [
            [
                "681e8bf3c9503781"
            ]
        ]
    },
    {
        "id": "cf93355e39f1e5f5",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "DELETE /ngsi-ld/v1/subscriptions/{id}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions/{{id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 850,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "54f52bb3d30ba4ef",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "GET /ngsi-ld/v1/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 710,
        "y": 280,
        "wires": [
            [
                "7ea57114da139fd3",
                "9f5b107922e6d70b"
            ]
        ]
    },
    {
        "id": "330efd089e60b074",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 400,
        "wires": []
    },
    {
        "id": "1302baaa5573dee7",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.client id",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientId",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 800,
        "y": 1000,
        "wires": []
    },
    {
        "id": "c4e0941f81210825",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.client.secret",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientSecret",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 820,
        "y": 1060,
        "wires": []
    },
    {
        "id": "19b2a357af9f25d6",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "flow",
                "to": "clientSecret",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "cf59910dd7907e10",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clientId",
                "pt": "flow",
                "to": "clientId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "9e775e51f0e9f50f",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.username",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "username",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 810,
        "y": 880,
        "wires": []
    },
    {
        "id": "37d8636a79e3c2f6",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "username",
                "pt": "flow",
                "to": "username",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "5952edd55037cd8f",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.password",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "password",
        "targetType": "msg",
        "statusVal": "password",
        "statusType": "auto",
        "x": 810,
        "y": 940,
        "wires": []
    },
    {
        "id": "204fc5c735d121f0",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "password",
                "pt": "flow",
                "to": "password",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "f39b783b4d354f57",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.orion",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "orion",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 790,
        "y": 760,
        "wires": []
    },
    {
        "id": "68042d67a45b6947",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "orion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "aa325180fbc253ac",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "get flow.keyrock",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "keyrock",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 800,
        "y": 820,
        "wires": []
    },
    {
        "id": "dab8d39ea40955b0",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "keyrock",
                "pt": "flow",
                "to": "keyrock",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "08718cab97db517a",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "keyrock access token",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.access_token",
        "statusType": "msg",
        "x": 480,
        "y": 920,
        "wires": []
    },
    {
        "id": "a4fa860e2842049d",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload.access_token",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 920,
        "wires": [
            [
                "08718cab97db517a",
                "11985762eae251da"
            ]
        ]
    },
    {
        "id": "b110327df641215f",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "content-type"
            }
        ],
        "x": 480,
        "y": 860,
        "wires": [
            [
                "a4fa860e2842049d"
            ]
        ]
    },
    {
        "id": "2f7300074a6404b1",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "set headers",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & clientCredentials",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "content-type",
                "pt": "msg",
                "to": "application/x-www-form-urlencoded",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 130,
        "y": 860,
        "wires": [
            [
                "eef6765f00946f05"
            ]
        ]
    },
    {
        "id": "5a8c15bff9b54e41",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clientCredentials",
                "pt": "msg",
                "to": "clientId & \":\" & clientSecret",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 800,
        "wires": [
            [
                "7957e7ce5d705253"
            ]
        ]
    },
    {
        "id": "a9a2a4d934838644",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "FIWARE Lab",
        "props": [
            {
                "p": "orion",
                "v": "http://orion.lab.fiware.org:1026",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "https://account.lab.fiware.org",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "FIWARE_CLIENT_ID",
                "vt": "env"
            },
            {
                "p": "clientSecret",
                "v": "FIWARE_CLIENT_SECRET",
                "vt": "env"
            },
            {
                "p": "email",
                "v": "FIWARE_EMAIL",
                "vt": "env"
            },
            {
                "p": "password",
                "v": "FIWARE_PASSWORD",
                "vt": "env"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 800,
        "wires": [
            [
                "5a8c15bff9b54e41"
            ]
        ]
    },
    {
        "id": "11985762eae251da",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 1040,
        "wires": [
            [
                "30de0126f0eb29b6",
                "a4292deed5769105"
            ]
        ]
    },
    {
        "id": "30de0126f0eb29b6",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "GET /v2/entities/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 360,
        "y": 1040,
        "wires": [
            [
                "fceee10bb0db5223"
            ]
        ]
    },
    {
        "id": "fceee10bb0db5223",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "all ngsi db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & \" entities\"\t",
        "statusType": "jsonata",
        "x": 520,
        "y": 1040,
        "wires": []
    },
    {
        "id": "a4292deed5769105",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "GET /version",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 370,
        "y": 980,
        "wires": [
            [
                "c29c14f291f0de78"
            ]
        ]
    },
    {
        "id": "c29c14f291f0de78",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.orion.version",
        "statusType": "msg",
        "x": 520,
        "y": 980,
        "wires": []
    },
    {
        "id": "7957e7ce5d705253",
        "type": "base64",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "",
        "action": "str",
        "property": "clientCredentials",
        "x": 520,
        "y": 800,
        "wires": [
            [
                "2f7300074a6404b1",
                "68042d67a45b6947",
                "dab8d39ea40955b0",
                "37d8636a79e3c2f6",
                "204fc5c735d121f0",
                "cf59910dd7907e10",
                "19b2a357af9f25d6"
            ]
        ]
    },
    {
        "id": "5ad2f56df7e9ccb6",
        "type": "comment",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "FIWARE Authentication",
        "info": "",
        "x": 140,
        "y": 980,
        "wires": []
    },
    {
        "id": "eef6765f00946f05",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "g": "f7d9feccea57574d",
        "name": "set payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "username={{email}}&password={{password}}&grant_type=password",
        "output": "str",
        "x": 290,
        "y": 860,
        "wires": [
            [
                "b110327df641215f"
            ]
        ]
    },
    {
        "id": "631640ca8d58dac6",
        "type": "comment",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "START HERE",
        "info": "# [Open in Gitpod](https://gitpod.io/#https://github.com/zeldalegends/tutorials.PEP-Proxy/tree/custom-aio)\n\n### Legacy\n\n[zeldalegend-tutorialspe-1sxitfv423q.ws-eu59](https://zeldalegend-tutorialspe-1sxitfv423q.ws-eu59.gitpod.io/)\n\nCustom-NGSI-LD\n[Github](https://github.com/alinonet/tutorials.PEP-Proxy/tree/custom-NGSI-LD)\n[Gitpod](https://alinonet-tutorialspeppr-0cblvtrp6ur.ws-eu54.gitpod.io/)\n\nFIWARE Universe\n[Github](https://github.com/alinonet/tutorials.PEP-Proxy/tree/fiware-universe)\n[Gitpod](https://alinonet-tutorialspeppr-n5lnjorgk89.ws-eu59.gitpod.io/)\n",
        "x": 310,
        "y": 1160,
        "wires": []
    },
    {
        "id": "1e8fd5458624de22",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "GET /version (v2)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 510,
        "y": 1160,
        "wires": [
            [
                "f94bfbfaf043fbdc"
            ]
        ]
    },
    {
        "id": "f94bfbfaf043fbdc",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "orion version",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:payload.orion.version)",
        "statusType": "jsonata",
        "x": 710,
        "y": 1160,
        "wires": []
    },
    {
        "id": "2a196a41f3c82e78",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "set access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:payload.access_token)",
        "statusType": "jsonata",
        "x": 730,
        "y": 1400,
        "wires": []
    },
    {
        "id": "9ed42c72465b4a6d",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "content-type"
            }
        ],
        "x": 520,
        "y": 1400,
        "wires": [
            [
                "7ddd8ec960bd082a",
                "2a196a41f3c82e78"
            ]
        ]
    },
    {
        "id": "5e58a7bed6a31b7e",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "headers",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "\"Basic \" & clientCredentials",
        "statusType": "jsonata",
        "x": 120,
        "y": 1400,
        "wires": []
    },
    {
        "id": "7ddd8ec960bd082a",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "set access token",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload.access_token",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "8201684faa1c8fe5",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "GET /version (IdM)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 510,
        "y": 1280,
        "wires": [
            [
                "d7b0eb39f48a031e"
            ]
        ]
    },
    {
        "id": "d7b0eb39f48a031e",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "keyrock version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:payload.keyrock.version)",
        "statusType": "jsonata",
        "x": 720,
        "y": 1280,
        "wires": []
    },
    {
        "id": "7c465bcd00552ea4",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "headers",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & clientCredentials",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "content-type",
                "pt": "msg",
                "to": "application/x-www-form-urlencoded",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 120,
        "y": 1400,
        "wires": [
            [
                "807a8fc816f8beb0"
            ]
        ]
    },
    {
        "id": "c18e7b4dc4f7d07e",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "new token",
        "props": [
            {
                "p": "payload.url",
                "v": "gitpod",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 120,
        "y": 1280,
        "wires": [
            [
                "389d50a593189d53"
            ]
        ]
    },
    {
        "id": "807a8fc816f8beb0",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "grant password",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "grant_type=password&username={{{username}}}&password={{{password}}}",
        "output": "str",
        "x": 320,
        "y": 1400,
        "wires": [
            [
                "9ed42c72465b4a6d"
            ]
        ]
    },
    {
        "id": "b38ff1c43be2ce73",
        "type": "base64",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "",
        "action": "str",
        "property": "clientCredentials",
        "x": 120,
        "y": 1340,
        "wires": [
            [
                "7c465bcd00552ea4",
                "fa85f38fb103b07a",
                "4eddd0e5c5585e6c",
                "5e58a7bed6a31b7e",
                "2b7cb9e1f1ee25ef"
            ]
        ]
    },
    {
        "id": "fa85f38fb103b07a",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "client id",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientId",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 480,
        "y": 1340,
        "wires": []
    },
    {
        "id": "4eddd0e5c5585e6c",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "client secret",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientSecret",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 710,
        "y": 1340,
        "wires": []
    },
    {
        "id": "74123c5eeafb8062",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "GET /version (LD)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 510,
        "y": 1220,
        "wires": [
            [
                "2187842a079e5b59"
            ]
        ]
    },
    {
        "id": "2187842a079e5b59",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "orion ld version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:payload[\"orionld version\"])",
        "statusType": "jsonata",
        "x": 720,
        "y": 1220,
        "wires": []
    },
    {
        "id": "3ca4ccfdab707ea8",
        "type": "http in",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "",
        "url": "EX GITPOD",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 1220,
        "wires": [
            [
                "c1ea2965c8e3fcd7",
                "be5cac049bd6092b",
                "389d50a593189d53"
            ]
        ]
    },
    {
        "id": "be5cac049bd6092b",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "http",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.url",
        "targetType": "msg",
        "statusVal": "payload.url",
        "statusType": "msg",
        "x": 290,
        "y": 1220,
        "wires": []
    },
    {
        "id": "c1ea2965c8e3fcd7",
        "type": "http response",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 290,
        "y": 1220,
        "wires": []
    },
    {
        "id": "2b7cb9e1f1ee25ef",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "username",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "username",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 300,
        "y": 1340,
        "wires": []
    },
    {
        "id": "389d50a593189d53",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "set vars",
        "rules": [
            {
                "t": "set",
                "p": "gitpod",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "\"https://1027-\" & $replace(gitpod,\"https://\",\"\")",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "\"https://1029-\" & $replace(gitpod,\"https://\",\"\")",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "keyrock",
                "pt": "msg",
                "to": "\"https://3005-\" & $replace(gitpod,\"https://\",\"\")",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "alice-the-admin@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-xpresswebapp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-clientsecret",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientCredentials",
                "pt": "msg",
                "to": "clientId & \":\" & clientSecret",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "gitpod",
                "pt": "flow",
                "to": "gitpod",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "keyrock",
                "pt": "flow",
                "to": "keyrock",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "orion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "flow",
                "to": "orion-ld",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1280,
        "wires": [
            [
                "b38ff1c43be2ce73",
                "8201684faa1c8fe5",
                "74123c5eeafb8062",
                "1e8fd5458624de22"
            ]
        ]
    },
    {
        "id": "cdfc67d170785dbb",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "g": "47a07bf2e06a73f8",
        "name": "FIWARE Lab",
        "props": [
            {
                "p": "orion",
                "v": "http://orion.lab.fiware.org:1026",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "https://account.lab.fiware.org",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "FIWARE_CLIENT_ID",
                "vt": "env"
            },
            {
                "p": "clientSecret",
                "v": "FIWARE_CLIENT_SECRET",
                "vt": "env"
            },
            {
                "p": "username",
                "v": "FIWARE_EMAIL",
                "vt": "env"
            },
            {
                "p": "password",
                "v": "FIWARE_PASSWORD",
                "vt": "env"
            },
            {
                "p": "clientCredentials",
                "v": "clientId & \":\" & clientSecret",
                "vt": "jsonata"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 1160,
        "wires": [
            [
                "b38ff1c43be2ce73"
            ]
        ]
    },
    {
        "id": "5fdeac8aa8ee5555",
        "type": "ui_text",
        "z": "d1941bd5f7d007ad",
        "group": "3887268fb207a290",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Gas fee",
        "format": "{{msg.summary.options.gasPrice}} Wei",
        "layout": "row-spread",
        "className": "",
        "x": 920,
        "y": 520,
        "wires": []
    },
    {
        "id": "b27b4ffa6e2ee432",
        "type": "ui_media",
        "z": "d1941bd5f7d007ad",
        "group": "47bd647b0bf55722",
        "name": "BD4NRG logo",
        "width": 6,
        "height": 2,
        "order": 1,
        "category": "Logo",
        "file": "logo_sticky.png",
        "layout": "adjust",
        "showcontrols": true,
        "loop": true,
        "onstart": false,
        "scope": "local",
        "tooltip": "",
        "x": 620,
        "y": 20,
        "wires": [
            [
                "f5944ab446049cc3"
            ]
        ]
    },
    {
        "id": "f5944ab446049cc3",
        "type": "ui_template",
        "z": "d1941bd5f7d007ad",
        "d": true,
        "group": "47bd647b0bf55722",
        "name": "open Editor",
        "order": 7,
        "width": 0,
        "height": 0,
        "format": "<script>\n    scope.$watch('msg.payload', data => {\n    //window.location.href = \"editor\";\n    window.open(\"editor\");\n});\n</script>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 790,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "ab7c32eaba05c040",
        "type": "switch",
        "z": "d1941bd5f7d007ad",
        "name": "LD?",
        "property": "ld",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 335,
        "y": 220,
        "wires": [
            [
                "33ad64e368fbc48a"
            ],
            [
                "394710e6d4b0197b"
            ]
        ],
        "l": false
    },
    {
        "id": "e6fe858fb03e0eb7",
        "type": "switch",
        "z": "d1941bd5f7d007ad",
        "name": "LD?",
        "property": "ld",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 675,
        "y": 220,
        "wires": [
            [
                "6fecc37aea8dc6b4"
            ],
            [
                "ad142ac739e8c3d6"
            ]
        ],
        "l": false
    },
    {
        "id": "fa2c603db64f3919",
        "type": "ui_switch",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "label": "Orion-LD",
        "tooltip": "",
        "group": "428fc8e6d916cf55",
        "order": 1,
        "width": 1,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 600,
        "y": 120,
        "wires": [
            [
                "25b97aa66e61f214"
            ]
        ]
    },
    {
        "id": "25b97aa66e61f214",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "ld",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 120,
        "wires": [
            [
                "06e38718b941e0fb",
                "5b09a16598c03782"
            ]
        ]
    },
    {
        "id": "f09ee7f84666647b",
        "type": "switch",
        "z": "d1941bd5f7d007ad",
        "name": "LD?",
        "property": "ld",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 335,
        "y": 300,
        "wires": [
            [
                "778347a774344079"
            ],
            [
                "6265d5b18499db85"
            ]
        ],
        "l": false
    },
    {
        "id": "66996fbd4abcc5c1",
        "type": "switch",
        "z": "d1941bd5f7d007ad",
        "name": "LD?",
        "property": "ld",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 175,
        "y": 380,
        "wires": [
            [
                "5b9793b84b408181"
            ],
            [
                "abc216383baa0295"
            ]
        ],
        "l": false
    },
    {
        "id": "681e8bf3c9503781",
        "type": "switch",
        "z": "d1941bd5f7d007ad",
        "name": "LD?",
        "property": "ld",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 535,
        "y": 380,
        "wires": [
            [
                "98333c2d79dc1a46"
            ],
            [
                "5b0e0d3c8e779838"
            ]
        ],
        "l": false
    },
    {
        "id": "42fc3620746dd90a",
        "type": "switch",
        "z": "d1941bd5f7d007ad",
        "name": "LD?",
        "property": "ld",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 125,
        "y": 520,
        "wires": [
            [
                "b8b222508837a6ff"
            ],
            [
                "cf2e3369cdb52d66"
            ]
        ],
        "l": false
    },
    {
        "id": "e38eb6a2fa366d40",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": " ",
        "props": [
            {
                "p": "username",
                "v": "zelda@hyrule.com",
                "vt": "str"
            },
            {
                "p": "password",
                "v": "test",
                "vt": "str"
            },
            {
                "p": "orion",
                "v": "http://217.172.12.210:1026",
                "vt": "str"
            },
            {
                "p": "orion-ld",
                "v": "http://217.172.12.210:1027",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "http://217.172.12.210:3005",
                "vt": "str"
            },
            {
                "p": "clientSecret",
                "v": "tutorial-dckr-site-0000-clientsecret",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "tutorial-dckr-site-0000-xpresswebapp",
                "vt": "str"
            },
            {
                "p": "clientCredentials",
                "v": "clientId & \":\" & clientSecret",
                "vt": "jsonata"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "\"username=\" & username & \"&password=\" & password & \"&grant_type=password\"",
        "payloadType": "jsonata",
        "x": 555,
        "y": 60,
        "wires": [
            [
                "9d1318ba6d02b885"
            ]
        ],
        "l": false
    },
    {
        "id": "9d1318ba6d02b885",
        "type": "base64",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "action": "str",
        "property": "clientCredentials",
        "x": 595,
        "y": 60,
        "wires": [
            [
                "6b5a2c1018f916b5"
            ]
        ],
        "l": false
    },
    {
        "id": "6b5a2c1018f916b5",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & clientCredentials",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 635,
        "y": 60,
        "wires": [
            [
                "9ad9e6382ecd29af"
            ]
        ],
        "l": false
    },
    {
        "id": "9ad9e6382ecd29af",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/x-www-form-urlencoded"
            }
        ],
        "x": 760,
        "y": 60,
        "wires": [
            [
                "5c5050e7dcb77762",
                "e6df7e69f8df5646"
            ]
        ]
    },
    {
        "id": "14e67b8f8d42b5be",
        "type": "ui_template",
        "z": "d1941bd5f7d007ad",
        "group": "428fc8e6d916cf55",
        "name": "FIWARE",
        "order": 2,
        "width": 5,
        "height": 1,
        "format": "<div style=\"display: flex; justify-content: space-between; align-items: center;\">\n    <img height=\"36\" src=\"https://account.thethingsnetwork.org/api/v2/users/atdfiware/picture.jpg\" />\n    <b>Orion-LD</b>\n    <a href=\"https://gitpod.io/#https://github.com/engsep/fiware\"><input type=\"image\" height=\"38px\" src=\"https://gitpod.io/button/open-in-gitpod.svg\" alt=\"Open in Gitpod\"/></a>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 600,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "55dc4a890bef9c34",
        "type": "ui_template",
        "z": "d1941bd5f7d007ad",
        "group": "3887268fb207a290",
        "name": "Ethereum",
        "order": 1,
        "width": 0,
        "height": 0,
        "format": "<div style=\"display: flex; justify-content: space-between; align-items: center; height: 48px;\">\n    <img height=\"36\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Ethereum-icon-purple.svg/240px-Ethereum-icon-purple.svg.png\" />\n    <b>Goerli testnet</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n    <a href=\"https://goerli.etherscan.io/tx/{{msg.summary.txHash}}\"><input type=\"image\" height=\"24\" src=\"https://etherscan.io/assets/svg/logos/logo-etherscan.svg\" alt=\"Open in Etherscan.io\"/></a>&nbsp;&nbsp;\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 760,
        "y": 500,
        "wires": [
            [
                "5dd9d0f48888dd2b"
            ]
        ]
    },
    {
        "id": "e6df7e69f8df5646",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "authtoken",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.access_token",
        "statusType": "msg",
        "x": 940,
        "y": 60,
        "wires": []
    },
    {
        "id": "5c5050e7dcb77762",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "flow vars",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload.access_token",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "orion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "flow",
                "to": "orion-ld",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "98333c2d79dc1a46",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "msg.id",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "id",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 360,
        "wires": [
            [
                "cf93355e39f1e5f5"
            ]
        ]
    },
    {
        "id": "a21c5c5f15e6012d",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "create simple ld sub",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all success tests\",\"type\":\"Subscription\",\"entities\":[{\"type\":\"Test\"}],\"watchedAttributes\":[\"result\"],\"q\":\"result<300\",\"notification\":{\"attributes\":[\"result\"],\"format\":\"keyValues\",\"endpoint\":{\"uri\":\"https://bd4nrg.engsep.repl.co/success\",\"accept\":\"application/json\"}},\"@context\":[\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"https://schema.lab.fiware.org/ld/context\"]}",
        "payloadType": "json",
        "x": 150,
        "y": 1680,
        "wires": [
            [
                "a1ac24aa9bd38dfc"
            ]
        ]
    },
    {
        "id": "a1ac24aa9bd38dfc",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "POST /ngsi-ld/v1/subscriptions",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 1680,
        "wires": [
            [
                "61cca658df82d764"
            ]
        ]
    },
    {
        "id": "61cca658df82d764",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & $replace(headers.location, \"/ngsi-ld/v1/subscriptions/\", \"\")",
        "statusType": "jsonata",
        "x": 710,
        "y": 1680,
        "wires": []
    },
    {
        "id": "264edbf4a0232d49",
        "type": "http in",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "url": "/success",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 360,
        "y": 1740,
        "wires": [
            [
                "9ea71d5e4c906123",
                "52f874a1e10792e8"
            ]
        ]
    },
    {
        "id": "52f874a1e10792e8",
        "type": "http response",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 690,
        "y": 1800,
        "wires": []
    },
    {
        "id": "9ea71d5e4c906123",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "/success",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0]",
        "statusType": "msg",
        "x": 700,
        "y": 1740,
        "wires": []
    },
    {
        "id": "582ffc2a199b6f7c",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "create entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            },
            {
                "p": "topic",
                "v": "topic",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1480,
        "wires": [
            [
                "38e832ae0c1a3c03"
            ]
        ]
    },
    {
        "id": "cd6838fe8a2396ae",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "test create",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"created at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 750,
        "y": 1480,
        "wires": []
    },
    {
        "id": "0b6416d19a26618f",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "POST /ngsi-ld/v1/entities/",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            }
        ],
        "x": 530,
        "y": 1480,
        "wires": [
            [
                "cd6838fe8a2396ae"
            ]
        ]
    },
    {
        "id": "38e832ae0c1a3c03",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "name": "NGSI-LD",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\"id\":\"urn:entities:IT111\",\"type\":\"Test\",\"level\":{\"type\":\"Property\",\"value\":\"Acceptance\"},\"reference\":{\"type\":\"Property\",\"value\":\"IT131\"},\"result\":{\"type\":\"Property\",\"value\":200},\"timestamp\":{\"type\":\"Property\",\"value\":{{payload}}}}",
        "output": "json",
        "x": 300,
        "y": 1480,
        "wires": [
            [
                "0b6416d19a26618f"
            ]
        ]
    },
    {
        "id": "212a0cb26f623670",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "create entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            },
            {
                "p": "topic",
                "v": "topic",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1540,
        "wires": [
            [
                "20a4c7d3e726d93f"
            ]
        ]
    },
    {
        "id": "cd3e9c9d893b77f7",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "create entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            },
            {
                "p": "topic",
                "v": "topic",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1600,
        "wires": [
            [
                "e19395c698691f20"
            ]
        ]
    },
    {
        "id": "20a4c7d3e726d93f",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "name": "NGSI-LD",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\"id\":\"urn:entities:IT222\",\"type\":\"Test\",\"level\":{\"type\":\"Property\",\"value\":\"Acceptance\"},\"reference\":{\"type\":\"Property\",\"value\":\"IT131\"},\"result\":{\"type\":\"Property\",\"value\":200},\"timestamp\":{\"type\":\"Property\",\"value\":{{payload}}}}",
        "output": "json",
        "x": 300,
        "y": 1540,
        "wires": [
            [
                "0b6416d19a26618f"
            ]
        ]
    },
    {
        "id": "e19395c698691f20",
        "type": "template",
        "z": "d1941bd5f7d007ad",
        "name": "NGSI-LD",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\"id\":\"urn:entities:IT333\",\"type\":\"Test\",\"level\":{\"type\":\"Property\",\"value\":\"Acceptance\"},\"reference\":{\"type\":\"Property\",\"value\":\"IT131\"},\"result\":{\"type\":\"Property\",\"value\":200},\"timestamp\":{\"type\":\"Property\",\"value\":{{payload}}}}",
        "output": "json",
        "x": 300,
        "y": 1600,
        "wires": [
            [
                "0b6416d19a26618f"
            ]
        ]
    },
    {
        "id": "e4a7b86becc24620",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "upsert entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 1980,
        "wires": [
            [
                "b1afa5d4a5df80d7",
                "ecd7215e345daf2b"
            ]
        ]
    },
    {
        "id": "1ef1a6fe7c534b5e",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "test upsert",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"created at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 810,
        "y": 1980,
        "wires": []
    },
    {
        "id": "00b97d1ff62354db",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "GET /ngsi-ld/v1/entities/{id}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 600,
        "y": 2040,
        "wires": [
            [
                "757b7fc1c0a8da57"
            ]
        ]
    },
    {
        "id": "97efd4956cf6f27f",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "get entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 100,
        "y": 2040,
        "wires": [
            [
                "100bbaef488709d1"
            ]
        ]
    },
    {
        "id": "fe83604a02affcd7",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "DELETE /ngsi-ld/v1/entities/{{id}",
        "method": "DELETE",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 590,
        "y": 2100,
        "wires": [
            [
                "2d9ef6b87a0bbea3"
            ]
        ]
    },
    {
        "id": "d2c86561163e13c6",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "delete entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 2100,
        "wires": [
            [
                "fe83604a02affcd7"
            ]
        ]
    },
    {
        "id": "2d9ef6b87a0bbea3",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "test delete",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"deleted at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 810,
        "y": 2100,
        "wires": []
    },
    {
        "id": "d7568b2b50c8d94a",
        "type": "comment",
        "z": "d1941bd5f7d007ad",
        "name": "SUBSCRIBE (LD)",
        "info": " - [Subscriptions](https://github.com/FIWARE/tutorials.Subscriptions/tree/NGSI-LD)\n",
        "x": 130,
        "y": 2240,
        "wires": []
    },
    {
        "id": "1a7033f25b28aac3",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "create simple ld sub",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all temperature changes\",\"type\":\"Subscription\",\"entities\":[{\"type\":\"TemperatureSensor\"}],\"watchedAttributes\":[\"temperature\"],\"notification\":{\"format\":\"keyValues\",\"endpoint\":{\"uri\":\"https://bd4nrg.engsep.repl.co/change-ld\",\"accept\":\"application/json\"}},\"@context\":[\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\"]}",
        "payloadType": "json",
        "x": 130,
        "y": 2300,
        "wires": [
            [
                "a3320ff19f81fc3a"
            ]
        ]
    },
    {
        "id": "a3320ff19f81fc3a",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "POST /ngsi-ld/v1/subscriptions",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 390,
        "y": 2240,
        "wires": [
            [
                "a39479b4d7b9d771"
            ]
        ]
    },
    {
        "id": "a39479b4d7b9d771",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & $replace(headers.location, \"/ngsi-ld/v1/subscriptions/\", \"\")",
        "statusType": "jsonata",
        "x": 810,
        "y": 2240,
        "wires": []
    },
    {
        "id": "ba2be0c7137fe962",
        "type": "http in",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "url": "/change-ld",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 440,
        "y": 2300,
        "wires": [
            [
                "ca7a66f118223a4a",
                "79ba64f3a4f74060"
            ]
        ]
    },
    {
        "id": "21cde4c68f3b9c32",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "create ld sub with query",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all 'anomalous' temperatures (LD version)\",\"type\":\"Subscription\",\"entities\":[{\"type\":\"TemperatureSensor\"}],\"watchedAttributes\":[\"temperature\"],\"q\":\"temperature>75\",\"notification\":{\"attributes\":[\"temperature\"],\"format\":\"keyValues\",\"endpoint\":{\"uri\":\"https://bd4nrg.engsep.repl.co/simple-ads-ld\",\"accept\":\"application/json\"}},\"@context\":[\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\"]}",
        "payloadType": "json",
        "x": 140,
        "y": 2360,
        "wires": [
            [
                "a3320ff19f81fc3a"
            ]
        ]
    },
    {
        "id": "ecd7215e345daf2b",
        "type": "delay",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 185,
        "y": 2020,
        "wires": [
            [
                "100bbaef488709d1"
            ]
        ],
        "l": false
    },
    {
        "id": "100bbaef488709d1",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"attrs\":\"temperature\",\"options\":\"keyValues\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 2040,
        "wires": [
            [
                "00b97d1ff62354db"
            ]
        ]
    },
    {
        "id": "757b7fc1c0a8da57",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "test get",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (payload.title? payload.title : payload[0].temperature)",
        "statusType": "jsonata",
        "x": 800,
        "y": 2040,
        "wires": []
    },
    {
        "id": "f7fee10712ea3034",
        "type": "http in",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "url": "/simple-ads-ld",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 430,
        "y": 2360,
        "wires": [
            [
                "ca7a66f118223a4a",
                "8eb7037e6e064557"
            ]
        ]
    },
    {
        "id": "86f0424d50a29986",
        "type": "comment",
        "z": "d1941bd5f7d007ad",
        "name": "UPSERT (LD)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-LD)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-LD)\n",
        "x": 110,
        "y": 1940,
        "wires": []
    },
    {
        "id": "ca7a66f118223a4a",
        "type": "http response",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 790,
        "y": 2420,
        "wires": []
    },
    {
        "id": "d5b1cff9c46980d9",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "delete all subs",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 2440,
        "wires": [
            [
                "62841a21eab1e61a"
            ]
        ]
    },
    {
        "id": "62841a21eab1e61a",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "GET /ngsi-ld/v1/subscriptions",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 400,
        "y": 2440,
        "wires": [
            [
                "9846528b5f5f840d"
            ]
        ]
    },
    {
        "id": "9846528b5f5f840d",
        "type": "split",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 630,
        "y": 2460,
        "wires": [
            [
                "3ce1bc66b64ae958"
            ]
        ]
    },
    {
        "id": "3ce1bc66b64ae958",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "move id and remove payload",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "id",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 2480,
        "wires": [
            [
                "9232c62004cac6ee"
            ]
        ]
    },
    {
        "id": "7c9988dd06507954",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 810,
        "y": 2540,
        "wires": []
    },
    {
        "id": "9232c62004cac6ee",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "DELETE /ngsi-ld/v1/subscriptions/{{id}}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions/{{id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 2540,
        "wires": [
            [
                "d8953342de8bae18",
                "7c9988dd06507954"
            ]
        ]
    },
    {
        "id": "beba03723b3e9ca0",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "delete latest sub",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 120,
        "y": 2520,
        "wires": [
            [
                "9232c62004cac6ee"
            ]
        ]
    },
    {
        "id": "45a30ccbcc5df131",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "list all subs",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 100,
        "y": 2600,
        "wires": [
            [
                "d8953342de8bae18"
            ]
        ]
    },
    {
        "id": "d8953342de8bae18",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "GET /ngsi-ld/v1/subscriptions",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 380,
        "y": 2600,
        "wires": [
            [
                "b92e42439ad1f13d"
            ]
        ]
    },
    {
        "id": "b92e42439ad1f13d",
        "type": "trigger",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "250",
        "extend": true,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 600,
        "y": 2600,
        "wires": [
            [
                "90b754782671ad17"
            ]
        ]
    },
    {
        "id": "90b754782671ad17",
        "type": "split",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 630,
        "y": 2660,
        "wires": [
            [
                "e65df8c7170dcdf4"
            ]
        ]
    },
    {
        "id": "e65df8c7170dcdf4",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 2660,
        "wires": [
            []
        ]
    },
    {
        "id": "79ba64f3a4f74060",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "/change-ld",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 810,
        "y": 2300,
        "wires": []
    },
    {
        "id": "8eb7037e6e064557",
        "type": "debug",
        "z": "d1941bd5f7d007ad",
        "name": "/simple-ads-ld",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 820,
        "y": 2360,
        "wires": []
    },
    {
        "id": "7af9b982ad0652cf",
        "type": "http request",
        "z": "d1941bd5f7d007ad",
        "name": "POST /ngsi-ld/v1/entityOperations/upsert",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/upsert",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 560,
        "y": 1980,
        "wires": [
            [
                "1ef1a6fe7c534b5e"
            ]
        ]
    },
    {
        "id": "b1afa5d4a5df80d7",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[{\t    \"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\t    \"type\":\"TemperatureSensor\",\t    \"category\":{\t        \"type\":\"Property\",\t        \"value\":\"Sensor\"\t    },\t    \"temperature\":{\t        \"type\":\"Property\",\t        \"value\": $round(200*$random())-50,\t        \"unitCode\":\"CEL\"\t    },\t    \"@context\":[\t        \"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\"\t    ]\t}]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1980,
        "wires": [
            [
                "7af9b982ad0652cf"
            ]
        ]
    },
    {
        "id": "d3d7aa1719ed7414",
        "type": "change",
        "z": "d1941bd5f7d007ad",
        "name": "query",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "timestamp",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.q",
                "pt": "msg",
                "to": "\"result<300;timestamp>\" & (timestamp-1000)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 90,
        "y": 380,
        "wires": [
            [
                "66996fbd4abcc5c1"
            ]
        ]
    },
    {
        "id": "5968145a73ae826f",
        "type": "json",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": false,
        "x": 430,
        "y": 500,
        "wires": [
            [
                "7bf45b22ea89e196"
            ]
        ]
    },
    {
        "id": "06e38718b941e0fb",
        "type": "delay",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 120,
        "wires": [
            [
                "0ae620afde38d774"
            ]
        ]
    },
    {
        "id": "d99d40c7e7e60e2f",
        "type": "catch",
        "z": "d1941bd5f7d007ad",
        "name": "",
        "scope": [
            "7bf45b22ea89e196"
        ],
        "uncaught": false,
        "x": 430,
        "y": 540,
        "wires": [
            [
                "584c2f0e13ba9d38"
            ]
        ]
    },
    {
        "id": "584c2f0e13ba9d38",
        "type": "function",
        "z": "d1941bd5f7d007ad",
        "name": "error msg",
        "func": "msg.payload = msg.error.message;\nnode.error(msg.payload, msg);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 540,
        "wires": [
            [
                "5dd9d0f48888dd2b"
            ]
        ]
    },
    {
        "id": "0ddd2c9618e97989",
        "type": "inject",
        "z": "d1941bd5f7d007ad",
        "name": "random",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "\"IT\" & $round($random()*1000)",
        "payloadType": "jsonata",
        "x": 90,
        "y": 100,
        "wires": [
            [
                "f50061fefb281e92"
            ]
        ]
    },
    {
        "id": "e33e7353b4dcb266",
        "type": "contract-call",
        "z": "d1941bd5f7d007ad",
        "name": "notarize",
        "smartContract": "7785b085c868737e",
        "contractFunction": "notarize",
        "senderAccount": "a46f63f7bc8183e7",
        "readonlyFunction": false,
        "weiTransfer": "",
        "onlyEstimateGas": false,
        "useEstimatedGasLimit": true,
        "gasLimit": "46591",
        "usePreviousBlocksGasPrice": true,
        "gasPrice": "46591",
        "fetchFullTransaction": false,
        "x": 560,
        "y": 480,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "7720eb31f0d5cbaf",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "GET /version (v2)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "payload.access_token"
            }
        ],
        "x": 550,
        "y": 300,
        "wires": [
            [
                "beb080bcdead0a2c"
            ]
        ]
    },
    {
        "id": "beb080bcdead0a2c",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "orion version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.orion.version",
        "statusType": "msg",
        "x": 790,
        "y": 300,
        "wires": []
    },
    {
        "id": "609afc63643098ee",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "set flow vars and access token",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:payload.access_token)",
        "statusType": "jsonata",
        "x": 210,
        "y": 360,
        "wires": []
    },
    {
        "id": "64fdef14ae4bac88",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "content-type"
            }
        ],
        "x": 540,
        "y": 240,
        "wires": [
            [
                "4e093b5c059098fa",
                "609afc63643098ee"
            ]
        ]
    },
    {
        "id": "36e0a5d5fa8bf423",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "headers",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "\"Basic \" & clientCredentials",
        "statusType": "jsonata",
        "x": 140,
        "y": 240,
        "wires": []
    },
    {
        "id": "4e093b5c059098fa",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "set flow vars and access token",
        "rules": [
            {
                "t": "set",
                "p": "keyrock",
                "pt": "flow",
                "to": "keyrock",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "clientId",
                "pt": "flow",
                "to": "clientId",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "flow",
                "to": "clientSecret",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "flow",
                "to": "username",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "flow",
                "to": "password",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "orion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "flow",
                "to": "orion-ld",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload.access_token",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "link",
                "pt": "flow",
                "to": "<https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld>; rel=\"http://www.w3.org/ns/json-ld#context\"; type=\"application/ld+json\"",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "7720eb31f0d5cbaf",
                "c8607dab18066ff8",
                "a6c1343521c2c851"
            ]
        ]
    },
    {
        "id": "a6c1343521c2c851",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "GET /version (IdM)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "payload.access_token"
            }
        ],
        "x": 550,
        "y": 420,
        "wires": [
            [
                "8f0b3df2b668ac3b",
                "fe0b3cc3ac16b15c"
            ]
        ]
    },
    {
        "id": "8f0b3df2b668ac3b",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "keyrock version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.keyrock.version",
        "statusType": "msg",
        "x": 800,
        "y": 420,
        "wires": []
    },
    {
        "id": "6b518109bfce2398",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "headers",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & clientCredentials",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "content-type",
                "pt": "msg",
                "to": "application/x-www-form-urlencoded",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 140,
        "y": 240,
        "wires": [
            [
                "4fa5d56f1ea8c158"
            ]
        ]
    },
    {
        "id": "19731bbd3c9d0bb7",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"type\": \"Person\",\n    \"options\": \"keyValues\"\n}\n",
        "output": "json",
        "x": 320,
        "y": 2560,
        "wires": [
            [
                "533605e9f30eec8a"
            ]
        ]
    },
    {
        "id": "b04a0d8430eab024",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 435,
        "y": 2540,
        "wires": [
            [
                "f3da945418882a03"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "09482bd1a62e3b05",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "get new token",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            },
            {
                "p": "username",
                "v": "username",
                "vt": "flow"
            },
            {
                "p": "password",
                "v": "password",
                "vt": "flow"
            },
            {
                "p": "clientId",
                "v": "clientId",
                "vt": "flow"
            },
            {
                "p": "clientSecret",
                "v": "clientSecret",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 180,
        "wires": [
            [
                "62a058eae9b0310f"
            ]
        ]
    },
    {
        "id": "4fa5d56f1ea8c158",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "grant_type=password&username={{{username}}}&password={{{password}}}",
        "output": "str",
        "x": 360,
        "y": 240,
        "wires": [
            [
                "64fdef14ae4bac88"
            ]
        ]
    },
    {
        "id": "7397f5c4e72105a9",
        "type": "base64",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "",
        "action": "str",
        "property": "clientCredentials",
        "x": 580,
        "y": 180,
        "wires": [
            [
                "6b518109bfce2398",
                "36e0a5d5fa8bf423",
                "c29d752869c79a5c",
                "ec9912f2843ecf5e",
                "c06a7df1e83b8acf",
                "b1252649654f3ee7"
            ]
        ]
    },
    {
        "id": "c06a7df1e83b8acf",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "client id",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientId",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 780,
        "y": 180,
        "wires": []
    },
    {
        "id": "b1252649654f3ee7",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "client secret",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientSecret",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 790,
        "y": 240,
        "wires": []
    },
    {
        "id": "bec76803d04fe939",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /v1/auth/tokens",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/v1/auth/tokens",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            }
        ],
        "x": 560,
        "y": 3560,
        "wires": [
            [
                "59d02ecb1a5a8ba3",
                "64a1d878967154a5"
            ]
        ]
    },
    {
        "id": "64a1d878967154a5",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "set flow.x-subject-token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "headers[\"x-subject-token\"]",
        "statusType": "msg",
        "x": 330,
        "y": 3640,
        "wires": []
    },
    {
        "id": "e5a019d5f7133511",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "keyrock",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 3560,
        "wires": [
            [
                "62487d5f7b0c2e20"
            ]
        ]
    },
    {
        "id": "62487d5f7b0c2e20",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "set msg.payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"name\": \"{{{flow.username}}}\",\n    \"password\": \"{{{flow.password}}}\"\n}",
        "output": "str",
        "x": 300,
        "y": 3560,
        "wires": [
            [
                "bec76803d04fe939"
            ]
        ]
    },
    {
        "id": "06a8445d7760967a",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /v1/auth/tokens",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/v1/auth/tokens",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-token",
                "valueType": "msg",
                "valueValue": "x-subject-token"
            },
            {
                "keyType": "other",
                "keyValue": "X-Subject-token",
                "valueType": "msg",
                "valueValue": "x-subject-token"
            }
        ],
        "x": 560,
        "y": 3700,
        "wires": [
            [
                "f5ca5e739d2c3091"
            ]
        ]
    },
    {
        "id": "12a68a3c2e6229e4",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "keyrock",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 3700,
        "wires": [
            [
                "99449a5573d504bb"
            ]
        ]
    },
    {
        "id": "59d02ecb1a5a8ba3",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-subject-token",
                "pt": "flow",
                "to": "headers[\"x-subject-token\"]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 3640,
        "wires": [
            []
        ]
    },
    {
        "id": "99449a5573d504bb",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-subject-token",
                "pt": "msg",
                "to": "x-subject-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 3700,
        "wires": [
            [
                "06a8445d7760967a"
            ]
        ]
    },
    {
        "id": "f5ca5e739d2c3091",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "user id",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.User.id",
        "statusType": "msg",
        "x": 910,
        "y": 3700,
        "wires": []
    },
    {
        "id": "2bb6fa31cff1da99",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:ngsi-ld:Building:farm001",
        "payloadType": "str",
        "x": 130,
        "y": 2780,
        "wires": [
            [
                "5716ab0d3e108f79"
            ]
        ]
    },
    {
        "id": "2db8e93e1bfa106c",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 2780,
        "wires": []
    },
    {
        "id": "5716ab0d3e108f79",
        "type": "NGSI-Entity",
        "z": "8a8bfba2422cf698",
        "name": "",
        "endpoint": "159d9aad9362c1ea",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mode": "normalized",
        "mimeType": "application/ld+json",
        "attrs": "",
        "x": 290,
        "y": 2780,
        "wires": [
            [
                "b12a1f8e85e78d5e"
            ]
        ]
    },
    {
        "id": "1833c85603dd1dcb",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 2740,
        "wires": [
            [
                "ed1a01110c3d5863"
            ]
        ]
    },
    {
        "id": "b12a1f8e85e78d5e",
        "type": "json",
        "z": "8a8bfba2422cf698",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 2780,
        "wires": [
            [
                "2db8e93e1bfa106c"
            ]
        ]
    },
    {
        "id": "157cd54c186f3a4e",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 2700,
        "wires": [
            [
                "6ea23bf73c149d10"
            ]
        ]
    },
    {
        "id": "53ac5e933424e9a6",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "farm003",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t   \"id\":\"urn:ngsi-ld:Building:farm003\",\t   \"type\":\"https://uri.fiware.org/ns/data-models#Building\",\t   \"https://schema.org/address\":{\t       \"type\":\"Property\",\t       \"value\":{\t           \"streetAddress\":\"SS113\",\t           \"addressRegion\":\"Palermo\",\t           \"addressLocality\":\"San Nicola\",\t           \"postalCode\":\"12345\"\t       },\t       \"verified\":{\"type\":\"Property\",\"value\":true}\t   },\t   \"name\":{\t       \"type\":\"Property\",\t       \"value\":\"Lido Vetrana\"\t   },\t   \"https://uri.fiware.org/ns/data-models#category\":{\"type\":\"Property\",\"value\":\"farm\"},\t   \"https://uri.fiware.org/ns/data-models#owner\":{\t       \"type\":\"Relationship\",\t       \"object\":\"urn:ngsi-ld:Person:person001\"\t   },\t   \"location\":{\t       \"type\":\"GeoProperty\",\t       \"value\":{\t           \"type\":\"Point\",\t           \"coordinates\":[13.3505,52.5144]\t       }\t   }\t}",
        "payloadType": "jsonata",
        "x": 140,
        "y": 2920,
        "wires": [
            [
                "55a6a47440a8d06e"
            ]
        ]
    },
    {
        "id": "55a6a47440a8d06e",
        "type": "NGSI-Update",
        "z": "8a8bfba2422cf698",
        "g": "c7063acd772bed39",
        "name": "",
        "endpoint": "e0df808ced6efc5d",
        "protocol": "LD",
        "updateMode": "upsert-update",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 510,
        "y": 2920,
        "wires": [
            [
                "291a614b91163c6a"
            ]
        ]
    },
    {
        "id": "291a614b91163c6a",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "status",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 670,
        "y": 2960,
        "wires": []
    },
    {
        "id": "6ea23bf73c149d10",
        "type": "NGSI-Dataset",
        "z": "8a8bfba2422cf698",
        "name": "",
        "endpoint": "159d9aad9362c1ea",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "TemperatureSensor",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 310,
        "y": 2700,
        "wires": [
            [
                "b12a1f8e85e78d5e"
            ]
        ]
    },
    {
        "id": "c8782ccf2b78f337",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensors",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\t   {\t       \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 1\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       },\t       \"inter\":{\t           \"type\":\"Property\",\t           \"value\":\"Triplete 2010\"\t       }\t   },\t   {\t       \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:002\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 2\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   },\t   {\t       \"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:003\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 3\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   }\t]",
        "payloadType": "jsonata",
        "x": 130,
        "y": 2960,
        "wires": [
            [
                "55a6a47440a8d06e"
            ]
        ]
    },
    {
        "id": "ed1a01110c3d5863",
        "type": "NGSI-Dataset",
        "z": "8a8bfba2422cf698",
        "name": "",
        "endpoint": "159d9aad9362c1ea",
        "protocol": "LD",
        "ldContext": "https://fiware.github.io/data-models/context.jsonld",
        "entityType": "Building",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 280,
        "y": 2740,
        "wires": [
            [
                "b12a1f8e85e78d5e"
            ]
        ]
    },
    {
        "id": "68349ba63287b937",
        "type": "NGSI-v2ToLD",
        "z": "8a8bfba2422cf698",
        "name": "",
        "x": 300,
        "y": 3020,
        "wires": [
            [
                "55a6a47440a8d06e",
                "b5aa55662897a6f7"
            ]
        ]
    },
    {
        "id": "8437c82656369061",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "farm003",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"id\":\"urn:ngsi-ld:Building:farm003\",\t   \"type\":\"https://uri.fiware.org/ns/data-models#Building\",\t   \"https://schema.org/address\":{\t       \"type\":\"Property\",\t       \"value\":{\t           \"streetAddress\":\"SS113\",\t           \"addressRegion\":\"Palermo\",\t           \"addressLocality\":\"San Nicola\",\t           \"postalCode\":\"12345\"\t       },\t       \"verified\":{\"type\":\"Property\",\"value\":true}\t   },\t   \"name\":{\t       \"type\":\"Property\",\t       \"value\":\"Lido Vetrana\"\t   },\t   \"https://uri.fiware.org/ns/data-models#category\":{\"type\":\"Property\",\"value\":\"farm\"},\t   \"https://uri.fiware.org/ns/data-models#owner\":{\t       \"type\":\"Relationship\",\t       \"object\":\"urn:ngsi-ld:Person:person001\"\t   },\t   \"location\":{\t       \"type\":\"GeoProperty\",\t       \"value\":{\t           \"type\":\"Point\",\t           \"coordinates\":[13.3505,52.5144]\t       }\t   }\t}",
        "payloadType": "jsonata",
        "x": 140,
        "y": 3020,
        "wires": [
            [
                "68349ba63287b937"
            ]
        ]
    },
    {
        "id": "13584dceabfcbb6a",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensors",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\t   {\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 1\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       },\t       \"inter\":{\t           \"type\":\"Property\",\t           \"value\":\"Triplete 2010\"\t       }\t   },\t   {\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:002\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 2\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   },\t   {\t       \"id\":\"urn:ngsi-ld:TemperatureSensor:003\",\t       \"type\":\"TemperatureSensor\",\t       \"description\":{\t           \"type\":\"Property\",\t           \"value\":\"Temperature Gauge 3\"\t       },\t       \"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\t       \"controlledProperty\":{\"type\":\"Property\",\"value\":\"temperature\"},\t       \"temperature\":{\t           \"type\":\"Property\",\t           \"value\":$random()*45,\t           \"unitCode\":\"CEL\"\t       }\t   }\t]",
        "payloadType": "jsonata",
        "x": 130,
        "y": 3060,
        "wires": [
            [
                "c28a4c7fc0702729"
            ]
        ]
    },
    {
        "id": "b5aa55662897a6f7",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 3020,
        "wires": []
    },
    {
        "id": "c28a4c7fc0702729",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 270,
        "y": 3060,
        "wires": [
            [
                "25bc7ed0976a8073"
            ]
        ]
    },
    {
        "id": "d8204fbbe2be4ad3",
        "type": "join",
        "z": "8a8bfba2422cf698",
        "name": "",
        "mode": "auto",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 670,
        "y": 3060,
        "wires": [
            [
                "55a6a47440a8d06e"
            ]
        ]
    },
    {
        "id": "25bc7ed0976a8073",
        "type": "NGSI-v2ToLD",
        "z": "8a8bfba2422cf698",
        "name": "",
        "x": 500,
        "y": 3060,
        "wires": [
            [
                "d8204fbbe2be4ad3",
                "b5aa55662897a6f7"
            ]
        ]
    },
    {
        "id": "f5a3782aafe4110e",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "READ",
        "info": "",
        "x": 130,
        "y": 2640,
        "wires": []
    },
    {
        "id": "908f09cfad7b6fc5",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "WRITE",
        "info": "",
        "x": 130,
        "y": 2860,
        "wires": []
    },
    {
        "id": "9221aaefa1756391",
        "type": "NGSI-Subscription",
        "z": "8a8bfba2422cf698",
        "name": "",
        "endpoint": "159d9aad9362c1ea",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "TemperatureSensor",
        "watchedAttributes": "",
        "q": "",
        "notificationMode": "normalized",
        "notificationEndpoint": "https://fiware.zeldalegends.repl.co/fiware",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 310,
        "y": 3260,
        "wires": [
            [
                "723564b1831088e8"
            ]
        ]
    },
    {
        "id": "62a048071d1cf457",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "subscribe",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 3260,
        "wires": [
            [
                "9221aaefa1756391"
            ]
        ]
    },
    {
        "id": "723564b1831088e8",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "subscribe",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.subscriptionId",
        "targetType": "msg",
        "statusVal": "payload.statusCode",
        "statusType": "msg",
        "x": 680,
        "y": 3260,
        "wires": []
    },
    {
        "id": "d469750c7ad534ce",
        "type": "http in",
        "z": "8a8bfba2422cf698",
        "name": "",
        "url": "/fiware",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 290,
        "y": 3300,
        "wires": [
            [
                "4c2c7f30976664b1",
                "e224218eeb5940d6"
            ]
        ]
    },
    {
        "id": "4c2c7f30976664b1",
        "type": "json",
        "z": "8a8bfba2422cf698",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 3360,
        "wires": [
            [
                "efac6a13ac7ba715"
            ]
        ]
    },
    {
        "id": "efac6a13ac7ba715",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "notify",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.data[0]",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature.value",
        "statusType": "msg",
        "x": 670,
        "y": 3360,
        "wires": []
    },
    {
        "id": "e224218eeb5940d6",
        "type": "http response",
        "z": "8a8bfba2422cf698",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 3300,
        "wires": []
    },
    {
        "id": "0c4babd9688efa44",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "clear subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 3420,
        "wires": [
            [
                "633945695a954c4f"
            ]
        ]
    },
    {
        "id": "dfeb1e58b7ac6bac",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "bearer"
            }
        ],
        "x": 530,
        "y": 3420,
        "wires": [
            [
                "9ed41f3f35d50e8c",
                "25ad204f1b4ac284"
            ]
        ]
    },
    {
        "id": "9ed41f3f35d50e8c",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 670,
        "y": 3420,
        "wires": [
            [
                "bf4e2011d17ef28d"
            ]
        ]
    },
    {
        "id": "bf4e2011d17ef28d",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "bearer"
            }
        ],
        "x": 860,
        "y": 3420,
        "wires": [
            [
                "fe9b7a01a622de93"
            ]
        ]
    },
    {
        "id": "25ad204f1b4ac284",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "list",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 3480,
        "wires": []
    },
    {
        "id": "633945695a954c4f",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "set header with access token",
        "rules": [
            {
                "t": "set",
                "p": "access_token",
                "pt": "msg",
                "to": "access_token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "bearer",
                "pt": "msg",
                "to": "\"Bearer \" & access_token",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 3420,
        "wires": [
            [
                "dfeb1e58b7ac6bac"
            ]
        ]
    },
    {
        "id": "0ad2c9300c329b09",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "SUBSCRIBE",
        "info": "",
        "x": 150,
        "y": 3200,
        "wires": []
    },
    {
        "id": "814ebebc2559ee11",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "USER INFO",
        "info": "",
        "x": 150,
        "y": 3500,
        "wires": []
    },
    {
        "id": "9b57ee033010c689",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 3120,
        "wires": [
            [
                "fa71d6a6e83ae809"
            ]
        ]
    },
    {
        "id": "ef877b4050d2a0ff",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/upsert",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            }
        ],
        "x": 670,
        "y": 3120,
        "wires": [
            [
                "570c398d5fa947ee"
            ]
        ]
    },
    {
        "id": "570c398d5fa947ee",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "temperature",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature.value",
        "statusType": "msg",
        "x": 850,
        "y": 3120,
        "wires": []
    },
    {
        "id": "fa71d6a6e83ae809",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "new entities",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "[\n    {\n        \"@context\": \"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\n        \"id\": \"urn:ngsi-ld:TemperatureSensor:123\",\n        \"type\": \"TemperatureSensor\",\n        \"description\": {\n            \"type\": \"Property\",\n            \"value\": \"Temperature Gauge 133\"\n        },\n        \"category\": {\n            \"type\": \"Property\",\n            \"value\": \"sensor\"\n        },\n        \"controlledProperty\": {\n            \"type\": \"Property\",\n            \"value\": \"temperature\"\n        },\n        \"temperature\": {\n            \"type\": \"Property\",\n            \"value\":{{value}},\n            \"unitCode\": \"CEL\"\n        }\n    }\n]",
        "output": "str",
        "x": 510,
        "y": 3120,
        "wires": [
            [
                "ef877b4050d2a0ff"
            ]
        ]
    },
    {
        "id": "4815893b900ef1d7",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "orion-ld",
        "props": [
            {
                "p": "value",
                "v": "$random()*45",
                "vt": "jsonata"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 3120,
        "wires": [
            [
                "9b57ee033010c689"
            ]
        ]
    },
    {
        "id": "686288fd8a4f05df",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "UNSUBSCRIBE",
        "info": "",
        "x": 160,
        "y": 3360,
        "wires": []
    },
    {
        "id": "fe9b7a01a622de93",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 3480,
        "wires": []
    },
    {
        "id": "c8607dab18066ff8",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "GET /version (LD)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "payload.access_token"
            }
        ],
        "x": 550,
        "y": 360,
        "wires": [
            [
                "978aae8a5ae0d23c"
            ]
        ]
    },
    {
        "id": "978aae8a5ae0d23c",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "orion ld version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload[\"orionld version\"]",
        "statusType": "msg",
        "x": 800,
        "y": 360,
        "wires": []
    },
    {
        "id": "a3d988ee11bbca0d",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 2600,
        "wires": [
            [
                "43ceae2132f590eb"
            ]
        ]
    },
    {
        "id": "653e759ed461254e",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Groer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Strae des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 140,
        "y": 2440,
        "wires": [
            [
                "9f4d6278c0889b8d"
            ]
        ]
    },
    {
        "id": "0aae8bf9e8908954",
        "type": "http in",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "",
        "url": "/gitpod",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "66b18102718b85c8",
                "fd15089fa3e59f00",
                "3f76a21e3e653395"
            ]
        ]
    },
    {
        "id": "fd15089fa3e59f00",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "http",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.url",
        "targetType": "msg",
        "statusVal": "payload.url",
        "statusType": "msg",
        "x": 350,
        "y": 60,
        "wires": []
    },
    {
        "id": "66b18102718b85c8",
        "type": "http response",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 350,
        "y": 60,
        "wires": []
    },
    {
        "id": "829ab93247469155",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "orion-ld proxy",
        "props": [
            {
                "p": "orion",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 2560,
        "wires": [
            [
                "19731bbd3c9d0bb7"
            ]
        ]
    },
    {
        "id": "43ceae2132f590eb",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & ($count(payload)=1?\" entity\":\" entities\")",
        "statusType": "jsonata",
        "x": 730,
        "y": 2600,
        "wires": []
    },
    {
        "id": "c29d752869c79a5c",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "username",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "username",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 780,
        "y": 60,
        "wires": []
    },
    {
        "id": "62a058eae9b0310f",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "encode credentials",
        "rules": [
            {
                "t": "set",
                "p": "clientCredentials",
                "pt": "msg",
                "to": "clientId & \":\" & clientSecret",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 180,
        "wires": [
            [
                "7397f5c4e72105a9"
            ]
        ]
    },
    {
        "id": "83c440272027a824",
        "type": "NGSI-v2ToLD",
        "z": "8a8bfba2422cf698",
        "name": "",
        "x": 420,
        "y": 2440,
        "wires": [
            [
                "aab51bf5d275c3ce"
            ]
        ]
    },
    {
        "id": "f3da945418882a03",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /ngsi-ld/v1/entityOperations/upsert",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/upsert",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            }
        ],
        "x": 620,
        "y": 2540,
        "wires": [
            [
                "efa8cfdc63e087e3"
            ]
        ]
    },
    {
        "id": "efa8cfdc63e087e3",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 880,
        "y": 2540,
        "wires": []
    },
    {
        "id": "533605e9f30eec8a",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 275,
        "y": 2600,
        "wires": [
            [
                "a3d988ee11bbca0d"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "1873fa214cb99150",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "NGSI-LD",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 2440,
        "wires": []
    },
    {
        "id": "9f4d6278c0889b8d",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 315,
        "y": 2440,
        "wires": [
            [
                "83c440272027a824"
            ]
        ],
        "l": false
    },
    {
        "id": "339e214457566d56",
        "type": "join",
        "z": "8a8bfba2422cf698",
        "name": "",
        "mode": "auto",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 835,
        "y": 2480,
        "wires": [
            [
                "b04a0d8430eab024"
            ]
        ],
        "l": false
    },
    {
        "id": "827bb58903323be8",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "WRITE",
        "info": "",
        "x": 130,
        "y": 2320,
        "wires": []
    },
    {
        "id": "ecd36d02a093026e",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"actionType\": \"append\",\t    \"entities\": [payload]\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "f4b6d4b9c6225f45",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "get orion and token",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "authtoken",
                "pt": "msg",
                "to": "authtoken",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 205,
        "y": 2500,
        "wires": [
            [
                "ecd36d02a093026e"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "b663b41ec08ea5ad",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "entity",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"id\": \"urn:ngsi-ld:Temperature{{topic}}\",\n    \"type\": \"TemperatureSensor\",\n    \"category\": {\n        \"type\": \"Text\",\n        \"value\": \"sensor\"\n    },\n    \"temperature\": {\n        \"type\": \"Integer\",\n        \"value\": {{payload}},\n        \"metadata\": {\n            \"unitCode\": {\n                \"type\": \"Text\",\n                \"value\": \"CEL\"\n            }\n        }\n    },\n    \"timestamp\": {\n        \"type\": \"Text\",\n        \"value\": \"{{timestamp}}\"\n    }\n}",
        "output": "json",
        "x": 120,
        "y": 2500,
        "wires": [
            [
                "f4b6d4b9c6225f45"
            ]
        ],
        "icon": "node-red-contrib-letsfiware-ngsi/fiware-non-free.svg"
    },
    {
        "id": "aab51bf5d275c3ce",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "@context file from github",
        "rules": [
            {
                "t": "set",
                "p": "payload[\"@context\"]",
                "pt": "msg",
                "to": "https://fiware.github.io/tutorials.Step-by-Step/tutorials-context.jsonld",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 2440,
        "wires": [
            [
                "1873fa214cb99150",
                "339e214457566d56"
            ]
        ]
    },
    {
        "id": "fe17dd1ffd4e7d63",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "@context file (CRUD tutorial)",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"@context\": {\n        \"type\": \"@type\",\n        \"id\": \"@id\",\n        \"ngsi-ld\": \"https://uri.etsi.org/ngsi-ld/\",\n        \"fiware\": \"https://uri.fiware.org/ns/data-models#\",\n        \"schema\": \"https://schema.org/\",\n        \"tutorial\": \"https://ngsi-ld-tutorials.readthedocs.io/en/latest/datamodels.html#\",\n        \"Building\": \"fiware:Building\",\n        \"Device\": \"fiware:Device\",\n        \"Animal\": \"fiware:Animal\",\n        \"Female\": \"schema:Female\",\n        \"FillingLevelSensor\": \"tutorial:FillingLevelSensor\",\n        \"Herbicide\": \"tutorial:Product\",\n        \"HVAC\": \"https://w3id.org/saref#HVAC\",\n        \"Male\": \"schema:Male\",\n        \"PartField\": \"tutorial:PartField\",\n        \"Person\": \"fiware:Person\",\n        \"SoilSensor\": \"tutorial:SoilSensor\",\n        \"TemperatureSensor\": \"tutorial:TemperatureSensor\",\n        \"Task\": \"fiware:Activity\",\n        \"Tractor\": \"tutorial:Tractor\",\n        \"Water\": \"tutorial:Water\",\n        \"actuator\": \"https://w3id.org/saref#actuator\",\n        \"additionalName\": \"schema:additionalName\",\n        \"address\": \"schema:address\",\n        \"airPollution\": \"https://w3id.org/saref#airPollution\",\n        \"atmosphericPressure\": \"https://w3id.org/saref#atmosphericPressure\",\n        \"barn\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dbarn\",\n        \"batteryLevel\": \"fiware:batteryLevel\",\n        \"category\": \"fiware:category\",\n        \"configuration\": \"fiware:configuration\",\n        \"conservatory\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dconservatory\",\n        \"containedInPlace\": \"fiware:containedInPlace\",\n        \"controlledAsset\": \"fiware:controlledAsset\",\n        \"controlledProperty\": \"fiware:controlledProperty\",\n        \"cowshed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dcowshed\",\n        \"dataProvider\": \"fiware:dataProvider\",\n        \"dateCreated\": \"fiware:dateCreated\",\n        \"dateFirstUsed\": \"fiware:dateFirstUsed\",\n        \"dateInstalled\": \"fiware:dateInstalled\",\n        \"dateLastCalibration\": \"fiware:dateLastCalibration\",\n        \"dateLastValueReported\": \"fiware:dateLastValueReported\",\n        \"dateManufactured\": \"fiware:dateManufactured\",\n        \"dateModified\": \"fiware:dateModified\",\n        \"depth\": \"https://w3id.org/saref#depth\",\n        \"description\": \"ngsi-ld:description\",\n        \"deviceState\": \"fiware:deviceState\",\n        \"digester\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Ddigester\",\n        \"eatingActivity\": \"https://w3id.org/saref#eatingActivity\",\n        \"email\": \"schema:email\",\n        \"endgun\": \"https://w3id.org/saref#endgun\",\n        \"familyName\": \"schema:familyName\",\n        \"farm\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm\",\n        \"farm_auxiliary\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm_auxiliary\",\n        \"faxNumber\": \"schema:faxNumber\",\n        \"filling\": \"https://w3id.org/saref#fillingLevel\",\n        \"firmwareVersion\": \"fiware:firmwareVersion\",\n        \"floorsAboveGround\": \"fiware:floorsAboveGround\",\n        \"floorsBelowGround\": \"fiware:floorsBelowGround\",\n        \"gender\": \"schema:gender\",\n        \"givenName\": \"schema:givenName\",\n        \"greenhouse\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dgreenhouse\",\n        \"hangar\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhangar\",\n        \"hardwareVersion\": \"fiware:hardwareVersion\",\n        \"honorificPrefix\": \"schema:honorificPrefix\",\n        \"honorificSuffix\": \"schema:honorificSuffix\",\n        \"humidity\": \"https://w3id.org/saref#humidity\",\n        \"hut\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhut\",\n        \"implement\": \"https://w3id.org/saref#implement\",\n        \"ipAddress\": \"fiware:ipAddress\",\n        \"irrSection\": \"https://w3id.org/saref#irrSection\",\n        \"irrSystem\": \"https://w3id.org/saref#irrSystem\",\n        \"isicV4\": \"schema:isicV4\",\n        \"jobTitle\": \"schema:jobTitle\",\n        \"location\": \"https://w3id.org/saref#location\",\n        \"macAddress\": \"fiware:macAddress\",\n        \"mcc\": \"fiware:mcc\",\n        \"meter\": \"https://w3id.org/saref#meter\",\n        \"milking\": \"https://w3id.org/saref#milking\",\n        \"mnc\": \"fiware:mnc\",\n        \"motion\": \"https://w3id.org/saref#motion\",\n        \"movementActivity\": \"https://w3id.org/saref#movementActivity\",\n        \"multimedia\": \"https://w3id.org/saref#multimedia\",\n        \"name\": \"ngsi-ld:name\",\n        \"network\": \"https://w3id.org/saref#network\",\n        \"observedAt\": \"ngsi-ld:observedAt\",\n        \"occupancy\": \"https://w3id.org/saref#occupancy\",\n        \"occupier\": \"fiware:occupier\",\n        \"openingHours\": \"fiware:openingHours\",\n        \"osVersion\": \"fiware:osVersion\",\n        \"owner\": \"fiware:owner\",\n        \"precipitation\": \"https://w3id.org/saref#precipitation\",\n        \"pressure\": \"https://w3id.org/saref#pressure\",\n        \"providedBy\": \"fiware:providedBy\",\n        \"provider\": \"fiware:provider\",\n        \"refDeviceModel\": \"fiware:refDeviceModel\",\n        \"refMap\": \"fiware:refMap\",\n        \"rssi\": \"fiware:rssi\",\n        \"sensor\": \"https://w3id.org/saref#sensor\",\n        \"serialNumber\": \"fiware:serialNumber\",\n        \"service\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dservice\",\n        \"shed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dshed\",\n        \"softwareVersion\": \"fiware:softwareVersion\",\n        \"soilMoisture\": \"https://w3id.org/saref#soilMoisture\",\n        \"solarRadiation\": \"https://w3id.org/saref#solarRadiation\",\n        \"source\": \"fiware:source\",\n        \"stable\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dstable\",\n        \"sty\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dsty\",\n        \"supportedProtocol\": \"fiware:supportedProtocol\",\n        \"taxID\": \"schema:taxID\",\n        \"telephone\": \"schema:telephone\",\n        \"temperature\": \"https://w3id.org/saref#temperature\",\n        \"transformer_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dtransformer_tower\",\n        \"unitCode\": \"ngsi-ld:unitCode\",\n        \"value\": \"fiware:value\",\n        \"vatID\": \"schema:vatID\",\n        \"waterConsumption\": \"https://w3id.org/saref#waterConsumption\",\n        \"water_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dwater_tower\",\n        \"weatherConditions\": \"https://w3id.org/saref#weatherConditions\",\n        \"weight\": \"https://w3id.org/saref#weight\",\n        \"windDirection\": \"https://w3id.org/saref#windDirection\",\n        \"windSpeed\": \"https://w3id.org/saref#windSpeed\",\n        \"status\": \"https://saref.etsi.org/core/status\",\n        \"state\": \"https://saref.etsi.org/core/hasState\",\n        \"heartRate\": \"https://purl.bioontology.org/ontology/MESH/D006339\",\n        \"product\": \"fiware:refObject\",\n        \"worker\": \"fiware:refAgent\",\n        \"field\": \"fiware:refTarget\",\n\n        \"on\": \"https://w3id.org/saref#on\",\n        \"off\": \"https://w3id.org/saref#off\",\n\n        \"species\": \"fiware:species\",\n        \"sex\": \"fiware:sex\",\n        \"legalID\": \"fiware:legalID\"\n    }\n}",
        "output": "str",
        "x": 340,
        "y": 3780,
        "wires": [
            [
                "91c820927a31435c"
            ]
        ]
    },
    {
        "id": "91c820927a31435c",
        "type": "file",
        "z": "8a8bfba2422cf698",
        "name": "",
        "filename": "public/data-models/ngsi-context.jsonld",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 630,
        "y": 3780,
        "wires": [
            [
                "1d5d4e3667283f34"
            ]
        ]
    },
    {
        "id": "c6e2e7381759d1e8",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "create",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 3840,
        "wires": [
            [
                "fe17dd1ffd4e7d63",
                "d961f39d906e2ce8",
                "6db0fc9422636862"
            ]
        ]
    },
    {
        "id": "1d5d4e3667283f34",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "JSONLD file",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 3840,
        "wires": []
    },
    {
        "id": "f442515e96e12895",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "all @context files",
        "rules": [
            {
                "t": "set",
                "p": "payload[\"@context\"]",
                "pt": "msg",
                "to": "[\"https://schema.lab.fiware.org/ld/context.jsonld\",\"https://fiware.github.io/data-models/context.jsonld\",\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"https://fiware.github.io/tutorials.Step-by-Step/tutorials-context.jsonld\",\"https://fiware.zeldalegends.repl.co/data-models/ngsi-context.jsonld\",\"https://fiware.github.io/data-models/context.jsonld\"]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 2360,
        "wires": [
            [
                "6c53dea8e8cd61e8",
                "339e214457566d56"
            ]
        ]
    },
    {
        "id": "afaa223fa1c42194",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "@context file from replit",
        "rules": [
            {
                "t": "set",
                "p": "payload[\"@context\"]",
                "pt": "msg",
                "to": "https://fiware.zeldalegends.repl.co/data-models/ngsi-context.jsonld",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 2400,
        "wires": [
            [
                "d3743f4b9c1cf2fa",
                "339e214457566d56"
            ]
        ]
    },
    {
        "id": "d3743f4b9c1cf2fa",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "NGSI-LD",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 2400,
        "wires": []
    },
    {
        "id": "6c53dea8e8cd61e8",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "NGSI-LD",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 2360,
        "wires": []
    },
    {
        "id": "a96f8443d83ca8a8",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Groer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Strae des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 160,
        "y": 2400,
        "wires": [
            [
                "8aed14f343a3e4d7"
            ]
        ]
    },
    {
        "id": "71b4a44ed7e7517a",
        "type": "NGSI-v2ToLD",
        "z": "8a8bfba2422cf698",
        "name": "",
        "x": 460,
        "y": 2400,
        "wires": [
            [
                "afaa223fa1c42194"
            ]
        ]
    },
    {
        "id": "8aed14f343a3e4d7",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 355,
        "y": 2400,
        "wires": [
            [
                "71b4a44ed7e7517a"
            ]
        ],
        "l": false
    },
    {
        "id": "fa2918d290925dcf",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Groer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Strae des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 180,
        "y": 2360,
        "wires": [
            [
                "81863d98e603091d"
            ]
        ]
    },
    {
        "id": "42dee0761adffb16",
        "type": "NGSI-v2ToLD",
        "z": "8a8bfba2422cf698",
        "name": "",
        "x": 480,
        "y": 2360,
        "wires": [
            [
                "f442515e96e12895"
            ]
        ]
    },
    {
        "id": "81863d98e603091d",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 375,
        "y": 2360,
        "wires": [
            [
                "42dee0761adffb16"
            ]
        ],
        "l": false
    },
    {
        "id": "d961f39d906e2ce8",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "@context file (CRUD tutorial)",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"@context\": {\n        \"type\": \"@type\",\n        \"id\": \"@id\",\n        \"ngsi-ld\": \"https://uri.etsi.org/ngsi-ld/\",\n        \"fiware\": \"https://uri.fiware.org/ns/data-models#\",\n        \"schema\": \"https://schema.org/\",\n        \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n        \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n        \"tutorial\": \"https://ngsi-ld-tutorials.readthedocs.io/en/latest/datamodels.html#\",\n        \"Building\": \"fiware:Building\",\n        \"Device\": \"fiware:Device\",\n        \"Animal\": \"fiware:Animal\",\n        \"Female\": \"schema:Female\",\n        \"FillingLevelSensor\": \"tutorial:FillingLevelSensor\",\n        \"Herbicide\": \"tutorial:Product\",\n        \"HVAC\": \"https://w3id.org/saref#HVAC\",\n        \"Male\": \"schema:Male\",\n        \"PartField\": \"tutorial:PartField\",\n        \"Person\": \"fiware:Person\",\n        \"SoilSensor\": \"tutorial:SoilSensor\",\n        \"TemperatureSensor\": \"tutorial:TemperatureSensor\",\n        \"Task\": \"fiware:Activity\",\n        \"Tractor\": \"tutorial:Tractor\",\n        \"Water\": \"tutorial:Water\",\n        \"actuator\": \"https://w3id.org/saref#actuator\",\n        \"additionalName\": {\n            \"@id\": \"schema:additionalName\",\n            \"@type\": \"xsd:string\"\n        },\n        \"address\": \"schema:address\",\n        \"airPollution\": \"https://w3id.org/saref#airPollution\",\n        \"atmosphericPressure\": \"https://w3id.org/saref#atmosphericPressure\",\n        \"barn\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dbarn\",\n        \"batteryLevel\": {\n            \"@id\": \"fiware:batteryLevel\",\n            \"@type\": \"xsd:number\"\n        },\n        \"category\": {\n            \"@id\": \"fiware:category\",\n            \"@type\": \"@vocab\"\n        },\n        \"configuration\": {\n            \"@id\": \"fiware:configuration\",\n            \"@type\": \"xsd:string\"\n        },\n        \"conservatory\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dconservatory\",\n        \"containedInPlace\": {\n            \"@id\": \"fiware:containedInPlace\",\n            \"@type\": \"@id\"\n        },\n        \"controlledAsset\": {\n            \"@id\": \"fiware:controlledAsset\",\n            \"@type\": \"@id\"\n        },\n        \"controlledProperty\": {\n            \"@id\": \"fiware:controlledProperty\",\n            \"@type\": \"@vocab\"\n        },\n        \"cowshed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dcowshed\",\n        \"dataProvider\": {\n            \"@id\": \"fiware:dataProvider\",\n            \"@type\": \"xsd:string\"\n        },\n        \"dateCreated\": {\n            \"@id\": \"fiware:dateCreated\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateFirstUsed\": {\n            \"@id\": \"fiware:dateFirstUsed\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateInstalled\": {\n            \"@id\": \"fiware:dateInstalled\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateLastCalibration\": {\n            \"@id\": \"fiware:dateLastCalibration\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateLastValueReported\": {\n            \"@id\": \"fiware:dateLastValueReported\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateManufactured\": {\n            \"@id\": \"fiware:dateManufactured\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"dateModified\": {\n            \"@id\": \"fiware:dateModified\",\n            \"@type\": \"xs:dateTime\"\n        },\n        \"depth\": \"https://w3id.org/saref#depth\",\n        \"description\": {\n            \"@id\": \"ngsi-ld:description\",\n            \"@type\": \"xsd:string\"\n        },\n        \"deviceState\": {\n            \"@id\": \"fiware:deviceState\",\n            \"@type\": \"xsd:string\"\n        },\n        \"digester\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Ddigester\",\n        \"eatingActivity\": \"https://w3id.org/saref#eatingActivity\",\n        \"email\": {\n            \"@id\": \"schema:email\",\n            \"@type\": \"xsd:string\"\n        },\n        \"endgun\": \"https://w3id.org/saref#endgun\",\n        \"familyName\": {\n            \"@id\": \"schema:familyName\",\n            \"@type\": \"xsd:string\"\n        },\n        \"farm\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm\",\n        \"farm_auxiliary\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dfarm_auxiliary\",\n        \"faxNumber\": {\n            \"@id\": \"schema:faxNumber\",\n            \"@type\": \"xsd:string\"\n        },\n        \"filling\": \"https://w3id.org/saref#fillingLevel\",\n        \"firmwareVersion\": {\n            \"@id\": \"fiware:firmwareVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"floorsAboveGround\": {\n            \"@id\": \"fiware:floorsAboveGround\",\n            \"@type\": \"xsd:integer\"\n        },\n        \"floorsBelowGround\": {\n            \"@id\": \"fiware:floorsBelowGround\",\n            \"@type\": \"xsd:integer\"\n        },\n        \"gender\": {\n            \"@id\": \"schema:gender\",\n            \"@type\": \"@vocab\"\n        },\n        \"givenName\": {\n            \"@id\": \"schema:givenName\",\n            \"@type\": \"xsd:string\"\n        },\n        \"greenhouse\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dgreenhouse\",\n        \"hangar\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhangar\",\n        \"hardwareVersion\": {\n            \"@id\": \"fiware:hardwareVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"honorificPrefix\": {\n            \"@id\": \"schema:honorificPrefix\",\n            \"@type\": \"xsd:string\"\n        },\n        \"honorificSuffix\": {\n            \"@id\": \"schema:honorificSuffix\",\n            \"@type\": \"xsd:string\"\n        },\n        \"humidity\": \"https://w3id.org/saref#humidity\",\n        \"hut\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dhut\",\n        \"implement\": \"https://w3id.org/saref#implement\",\n        \"ipAddress\": {\n            \"@id\": \"fiware:ipAddress\",\n            \"@type\": \"xsd:string\"\n        },\n        \"irrSection\": \"https://w3id.org/saref#irrSection\",\n        \"irrSystem\": \"https://w3id.org/saref#irrSystem\",\n        \"isicV4\": {\n            \"@id\": \"schema:isicV4\",\n            \"@type\": \"xsd:string\"\n        },\n        \"jobTitle\": {\n            \"@id\": \"schema:jobTitle\",\n            \"@type\": \"xsd:string\"\n        },\n        \"location\": \"https://w3id.org/saref#location\",\n        \"macAddress\": {\n            \"@id\": \"fiware:macAddress\",\n            \"@type\": \"xsd:string\"\n        },\n        \"mcc\": {\n            \"@id\": \"fiware:mcc\",\n            \"@type\": \"xsd:string\"\n        },\n        \"meter\": \"https://w3id.org/saref#meter\",\n        \"milking\": \"https://w3id.org/saref#milking\",\n        \"mnc\": {\n            \"@id\": \"fiware:mnc\",\n            \"@type\": \"xsd:string\"\n        },\n        \"motion\": \"https://w3id.org/saref#motion\",\n        \"movementActivity\": \"https://w3id.org/saref#movementActivity\",\n        \"multimedia\": \"https://w3id.org/saref#multimedia\",\n        \"name\": {\n            \"@id\": \"ngsi-ld:name\",\n            \"@type\": \"xsd:string\"\n        },\n        \"network\": \"https://w3id.org/saref#network\",\n        \"occupancy\": \"https://w3id.org/saref#occupancy\",\n        \"occupier\": {\n            \"@id\": \"fiware:occupier\",\n            \"@type\": \"@id\"\n        },\n        \"openingHours\": {\n            \"@id\": \"fiware:openingHours\",\n            \"@type\": \"xsd:array\"\n        },\n        \"osVersion\": {\n            \"@id\": \"fiware:osVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"owner\": {\n            \"@id\": \"fiware:owner\",\n            \"@type\": \"@id\"\n        },\n        \"precipitation\": \"https://w3id.org/saref#precipitation\",\n        \"pressure\": \"https://w3id.org/saref#pressure\",\n        \"provider\": {\n            \"@id\": \"fiware:provider\",\n            \"@type\": \"xsd:string\"\n        },\n        \"refDeviceModel\": {\n            \"@id\": \"fiware:refDeviceModel\",\n            \"@type\": \"@id\"\n        },\n        \"refMap\": {\n            \"@id\": \"fiware:refMap\",\n            \"@type\": \"xs:anyURI\"\n        },\n        \"rssi\": {\n            \"@id\": \"fiware:rssi\",\n            \"@type\": \"xsd:string\"\n        },\n        \"sensor\": \"https://w3id.org/saref#sensor\",\n        \"serialNumber\": {\n            \"@id\": \"fiware:serialNumber\",\n            \"@type\": \"xsd:string\"\n        },\n        \"service\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dservice\",\n        \"shed\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dshed\",\n        \"softwareVersion\": {\n            \"@id\": \"fiware:softwareVersion\",\n            \"@type\": \"xsd:string\"\n        },\n        \"soilMoisture\": \"https://w3id.org/saref#soilMoisture\",\n        \"solarRadiation\": \"https://w3id.org/saref#solarRadiation\",\n        \"source\": {\n            \"@id\": \"fiware:source\",\n            \"@type\": \"xsd:string\"\n        },\n        \"stable\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dstable\",\n        \"sty\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dsty\",\n        \"supportedProtocol\": {\n            \"@id\": \"fiware:supportedProtocol\",\n            \"@type\": \"@vocab\"\n        },\n        \"taxID\": {\n            \"@id\": \"schema:taxID\",\n            \"@type\": \"xsd:string\"\n        },\n        \"telephone\": {\n            \"@id\": \"schema:telephone\",\n            \"@type\": \"xsd:string\"\n        },\n        \"temperature\": \"https://w3id.org/saref#temperature\",\n        \"transformer_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dtransformer_tower\",\n        \"value\": {\n            \"@id\": \"fiware:value\",\n            \"@type\": \"xsd:string\"\n        },\n        \"vatID\": {\n            \"@id\": \"schema:vatID\",\n            \"@type\": \"xsd:string\"\n        },\n        \"waterConsumption\": \"https://w3id.org/saref#waterConsumption\",\n        \"water_tower\": \"https://wiki.openstreetmap.org/wiki/Tag:building%3Dwater_tower\",\n        \"weatherConditions\": \"https://w3id.org/saref#weatherConditions\",\n        \"weight\": \"https://w3id.org/saref#weight\",\n        \"windDirection\": \"https://w3id.org/saref#windDirection\",\n        \"windSpeed\": \"https://w3id.org/saref#windSpeed\",\n        \"state\": \"https://saref.etsi.org/core/hasState\",\n        \"heartRate\": \"https://purl.bioontology.org/ontology/MESH/D006339\",\n        \"status\": \"https://saref.etsi.org/core/status\",\n        \"product\": {\n            \"@id\": \"fiware:refObject\",\n            \"@type\": \"@id\"\n        },\n        \"worker\": {\n            \"@id\": \"fiware:refAgent\",\n            \"@type\": \"@id\"\n        },\n        \"field\": {\n            \"@id\": \"fiware:refTarget\",\n            \"@type\": \"@id\"\n        },\n        \"on\": \"https://w3id.org/saref#on\",\n        \"off\": \"https://w3id.org/saref#off\",\n        \"species\": \"fiware:species\",\n        \"sex\": \"fiware:sex\",\n        \"legalID\": \"fiware:legalID\"\n    },\n    \"@graph\": [\n        {\n            \"@id\": \"fiware:Building\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Building\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:TemperatureSensor\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A device that consists of a sensor, has category `saref:Sensor` and is used for the purpose of sensing temperature`.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"TemperatureSensor\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:FillingLevelSensor\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A device that consists of a sensor, has category `saref:Sensor` and is used for the purpose of sensing filling Level.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"FillingLevelSensor\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:Person\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Person\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"schema:Thing\"\n            }\n        },\n        {\n            \"@id\": \"fiware:temperature\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is measured in a temperature unit (degree_Celsius, degree_Fahrenheit, or degree_kelvin)\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"temperature\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"fiware:fillingLevel\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is a filling level.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"fillingLevel\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"fiware:temperature\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is measured in a temperature unit (degree_Celsius, degree_Fahrenheit, or degree_kelvin)\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"temperature\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"fiware:fillingLevel\",\n            \"@type\": \"ngsi-ld:Property\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Property related to some measurements that are characterized by a certain value that is a filling level.\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"fillingLevel\"\n                }\n            ]\n        }\n    ]\n}",
        "output": "str",
        "x": 340,
        "y": 3840,
        "wires": [
            [
                "277f7eac02a1467f"
            ]
        ]
    },
    {
        "id": "277f7eac02a1467f",
        "type": "file",
        "z": "8a8bfba2422cf698",
        "name": "",
        "filename": "public/data-models/json-context.jsonld",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 630,
        "y": 3840,
        "wires": [
            [
                "1d5d4e3667283f34"
            ]
        ]
    },
    {
        "id": "6db0fc9422636862",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "@context file (PEP Proxy)",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"@context\": {\n        \"type\": \"@type\",\n        \"id\": \"@id\",\n        \"schema\": \"https://schema.org/\",\n        \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n        \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n        \"fiware\": \"https://uri.fiware.org/ns/data-models#\",\n        \"tutorial\": \"https://fiware.github.io/tutorials.Step-by-Step/schema/\",\n        \"Building\": \"fiware:Building\",\n        \"Product\": \"tutorial:Product\",\n        \"Shelf\": \"tutorial:Shelf\",\n        \"StockOrder\": \"tutorial:StockOrder\",\n        \"Person\": \"schema:Person\",\n        \"address\": \"schema:address\",\n        \"category\": \"fiware:category\",\n        \"commercial\": \"fiware:commercial\",\n        \"office\": \"fiware:office\",\n        \"industrial\": \"fiware:industrial\",\n        \"retail\": \"fiware:retail\",\n        \"residential\": \"fiware:residential\",\n        \"containedInPlace\": \"fiware:containedInPlace\",\n        \"dataProvider\": \"fiware:dataProvider\",\n        \"description\": \"fiware:description\",\n        \"floorsAboveGround\": \"fiware:floorsAboveGround\",\n        \"floorsBelowGround\": \"fiware:floorsBelowGround\",\n        \"tweets\": \"tutorial:tweets\",\n        \"owner\": \"fiware:owner\",\n        \"occupier\": \"fiware:occupier\",\n        \"refMap\": \"fiware:refMap\",\n        \"source\": \"fiware:source\",\n        \"installedBy\": \"tutorial:installedBy\",\n        \"locatedIn\": \"tutorial:locatedIn\",\n        \"maxCapacity\": \"tutorial:maxCapacity\",\n        \"statusOfWork\": \"tutorial:statusOfWork\",\n        \"requested\": \"tutorial:requested\",\n        \"completed\": \"tutorial:completed\",\n        \"scheduled\": \"tutorial:scheduled\",\n        \"inProgress\": \"tutorial:inProgress\",\n        \"stocks\": \"tutorial:stocks\",\n        \"currency\": \"tutorial:currency\",\n        \"price\": \"tutorial:price\",\n        \"size\": \"tutorial:size\",\n        \"furniture\": \"tutorial:furniture\",\n        \"verified\": \"tutorial:verified\",\n        \"requestedFor\": \"tutorial:requestedFor\",\n        \"requestedBy\": \"tutorial:requestedBy\",\n        \"orderedProduct\": \"tutorial:orderedProduct\",\n        \"orderDate\": \"tutorial:orderDate\",\n        \"stockCount\": \"tutorial:stockCount\",\n        \"numberOfItems\": \"tutorial:numberOfItems\"\n    },\n    \"@graph\": [\n        {\n            \"@id\": \"tutorial:Product\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Product is something sold in a Store.\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Product\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Thing\"\n            }\n        },\n        {\n            \"@id\": \"tutorial:Shelf\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A Shelf is a unit of Store Furniture\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Shelf\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Thing\"\n            }\n        },\n        {\n            \"@id\": \"tutorial:StockOrder\",\n            \"@type\": \"rdfs:Class\",\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"StockOrder an entry in a list of items sold in one or more stores\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"1\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"StockOrder\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Intangible\"\n            }\n        },\n        {\n            \"@id\": \"schema:Person\",\n            \"@type\": \"rdfs:Class\",\n            \"http://purl.org/dc/terms/source\": {\n                \"@id\": \"http://www.w3.org/wiki/WebSchemas/SchemaDotOrgSources#source_rNews\"\n            },\n            \"http://www.w3.org/2002/07/owl#equivalentClass\": {\n                \"@id\": \"http://xmlns.com/foaf/0.1/Person\"\n            },\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"A person (alive, dead, undead, or fictional).\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \" (, , , )\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Person\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:subClassOf\": {\n                \"@id\": \"http://schema.org/Thing\"\n            }\n        },\n        {\n            \"@id\": \"tutoral:requestedBy\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                },\n                {\n                    \"@id\": \"tutorial:StockOrder\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"schema:Person\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Object requested by person.\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"requestedBy\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutoral:installedBy\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"schema:Person\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Person who installs an Object\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"installedBy\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:furniture\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"fiware:Building\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Units found within a Building\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"furniture\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:locatedIn\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"fiware:Building\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Building in which an item is found\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"locatedIn\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:stocks\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:Shelf\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"tutorial:Product\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"The product found on a shelf\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"stocks\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:requestedFor\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:StockOrder\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"fiware:Building\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"Store for which an item is requested\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"requestedFor\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ]\n        },\n        {\n            \"@id\": \"tutorial:orderedProduct\",\n            \"@type\": \"https://uri.etsi.org/ngsi-ld/Relationship\",\n            \"schema:domainIncludes\": [\n                {\n                    \"@id\": \"tutorial:StockOrder\"\n                }\n            ],\n            \"schema:rangeIncludes\": [\n                {\n                    \"@id\": \"tutorial:Product\"\n                }\n            ],\n            \"rdfs:comment\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"The Product ordered for a store\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ],\n            \"rdfs:label\": [\n                {\n                    \"@language\": \"en\",\n                    \"@value\": \"orderedProduct\"\n                },\n                {\n                    \"@language\": \"ja\",\n                    \"@value\": \"\"\n                }\n            ]\n        }\n    ]\n}",
        "output": "str",
        "x": 330,
        "y": 3900,
        "wires": [
            [
                "af4a4a102ab001d4"
            ]
        ]
    },
    {
        "id": "af4a4a102ab001d4",
        "type": "file",
        "z": "8a8bfba2422cf698",
        "name": "",
        "filename": "public/data-models/tutorial-context.jsonld",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 620,
        "y": 3900,
        "wires": [
            [
                "1d5d4e3667283f34"
            ]
        ]
    },
    {
        "id": "4a21e622d9533fba",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "other",
                "valueValue": "<https://fiware.github.io/tutorials.Step-by-Step/tutorials-context.jsonld>; rel=\"http://www.w3.org/ns/json-ld#context\"; type=\"application/ld+json\""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 430,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "da1685f5ec68f07c",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "FIWARE Lab",
        "props": [
            {
                "p": "orion",
                "v": "http://orion.lab.fiware.org:1026",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "https://account.lab.fiware.org",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "FIWARE_CLIENT_ID",
                "vt": "env"
            },
            {
                "p": "clientSecret",
                "v": "FIWARE_CLIENT_SECRET",
                "vt": "env"
            },
            {
                "p": "username",
                "v": "FIWARE_EMAIL",
                "vt": "env"
            },
            {
                "p": "password",
                "v": "FIWARE_PASSWORD",
                "vt": "env"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 100,
        "wires": [
            [
                "62a058eae9b0310f"
            ]
        ]
    },
    {
        "id": "3f76a21e3e653395",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "Gitpod",
        "rules": [
            {
                "t": "set",
                "p": "gitpod",
                "pt": "msg",
                "to": "payload.url",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "\"https://1027-\" & $replace(gitpod,\"https://\",\"\")",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "\"https://1029-\" & $replace(gitpod,\"https://\",\"\")",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "keyrock",
                "pt": "msg",
                "to": "\"https://3005-\" & $replace(gitpod,\"https://\",\"\")",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "alice-the-admin@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-xpresswebapp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-clientsecret",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 120,
        "wires": [
            [
                "62a058eae9b0310f",
                "fbf549245582690b"
            ]
        ]
    },
    {
        "id": "ec9912f2843ecf5e",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "password",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "password",
        "targetType": "msg",
        "statusVal": "$pad(\"\",$length(password),\"*\")\t",
        "statusType": "jsonata",
        "x": 780,
        "y": 120,
        "wires": []
    },
    {
        "id": "fe0b3cc3ac16b15c",
        "type": "ui_template",
        "z": "8a8bfba2422cf698",
        "group": "bb8657c15acd1db1",
        "name": "HTML Viewer",
        "order": 1,
        "width": "6",
        "height": "7",
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 800,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "a7471ff7b9118378",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "Open in Gitpod",
        "info": "# [Start FIWARE here](https://gitpod.io/#https://github.com/zeldalegends/tutorials.PEP-Proxy/tree/minimal)\n\n### Legacy\n\n[zeldalegend-tutorialspe-1sxitfv423q.ws-eu59](https://zeldalegend-tutorialspe-1sxitfv423q.ws-eu59.gitpod.io/)\n\nCustom-NGSI-LD\n[Github](https://github.com/alinonet/tutorials.PEP-Proxy/tree/custom-NGSI-LD)\n[Gitpod](https://alinonet-tutorialspeppr-0cblvtrp6ur.ws-eu54.gitpod.io/)\n\nFIWARE Universe\n[Github](https://github.com/alinonet/tutorials.PEP-Proxy/tree/fiware-universe)\n[Gitpod](https://alinonet-tutorialspeppr-n5lnjorgk89.ws-eu59.gitpod.io/)\n",
        "x": 560,
        "y": 60,
        "wires": []
    },
    {
        "id": "aebe0d02f96579ca",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "UTILS",
        "info": "",
        "x": 130,
        "y": 3780,
        "wires": []
    },
    {
        "id": "7d3ac942f6ac7939",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /v2/entities?{query}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 590,
        "y": 1840,
        "wires": [
            [
                "d74907bec2f7fae7"
            ]
        ]
    },
    {
        "id": "d74907bec2f7fae7",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 1840,
        "wires": []
    },
    {
        "id": "d4e29e9ea0dd6a1b",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "all entities",
        "props": [
            {
                "p": "options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 1900,
        "wires": [
            [
                "90d123e2b5bfed4f"
            ]
        ]
    },
    {
        "id": "90d123e2b5bfed4f",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "options",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"options\": \"{{options}}\"\n}\n",
        "output": "json",
        "x": 360,
        "y": 1900,
        "wires": [
            [
                "e0086952b279ecf0"
            ]
        ]
    },
    {
        "id": "e0086952b279ecf0",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 1840,
        "wires": [
            [
                "7d3ac942f6ac7939"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "82348a4cb777df8f",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /v2/op/update",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/op/update",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 580,
        "y": 1600,
        "wires": [
            [
                "638712a9bebbbfea"
            ]
        ]
    },
    {
        "id": "0b96daa1e49f7338",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 1600,
        "wires": [
            [
                "82348a4cb777df8f"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "c88a268c52c89c4f",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "import-data (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Store:001\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Bornholmer Strae 65\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Prenzlauer Berg\",\"postalCode\":\"10439\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3986,52.5547]}},\"name\":{\"type\":\"Text\",\"value\":\"Bsebrcke Einkauf\"}},{\"id\":\"urn:ngsi-ld:Store:002\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Friedrichstrae 44\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Kreuzberg\",\"postalCode\":\"10969\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3903,52.5075]}},\"name\":{\"type\":\"Text\",\"value\":\"Checkpoint Markt\"}},{\"id\":\"urn:ngsi-ld:Store:003\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Mhlenstrasse 10\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Friedrichshain\",\"postalCode\":\"10243\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447,52.5031]}},\"name\":{\"type\":\"Text\",\"value\":\"East Side Galleria\"}},{\"id\":\"urn:ngsi-ld:Store:004\",\"type\":\"Store\",\"address\":{\"type\":\"PostalAddress\",\"value\":{\"streetAddress\":\"Panoramastrae 1A\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Mitte\",\"postalCode\":\"10178\"}},\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4094,52.5208]}},\"name\":{\"type\":\"Text\",\"value\":\"Tower Trdelmarkt\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit001\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3986112,52.554699]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit002\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3987221,52.554664]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 1\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit003\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3987221,52.554664]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 2\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit004\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.390311,52.507522]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit005\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.390309,52.50751]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":200},\"name\":{\"type\":\"Text\",\"value\":\"Long Wall Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit006\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447112,52.503199]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit007\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447221,52.503164]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 1\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit008\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4447221,52.503164]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":100},\"name\":{\"type\":\"Text\",\"value\":\"Wall Unit 2\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit009\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.444711,52.503122]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":50},\"name\":{\"type\":\"Text\",\"value\":\"Corner Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"}},{\"id\":\"urn:ngsi-ld:Shelf:unit010\",\"type\":\"Shelf\",\"location\":{\"type\":\"geo:json\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.4094111,52.5208028]}},\"maxCapacity\":{\"type\":\"Integer\",\"value\":200},\"name\":{\"type\":\"Text\",\"value\":\"Long Wall Unit\"},\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:004\"}},{\"id\":\"urn:ngsi-ld:Product:001\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Beer\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:002\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Red Wine\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1099}},{\"id\":\"urn:ngsi-ld:Product:003\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"White Wine\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1499}},{\"id\":\"urn:ngsi-ld:Product:004\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Vodka\"},\"size\":{\"type\":\"Text\",\"value\":\"XL\"},\"price\":{\"type\":\"Integer\",\"value\":5000}},{\"id\":\"urn:ngsi-ld:Product:005\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Lager\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:006\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Whisky\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:007\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Gin\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:008\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Apple Juice\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:Product:009\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Orange Juice\"},\"size\":{\"type\":\"Text\",\"value\":\"S\"},\"price\":{\"type\":\"Integer\",\"value\":99}},{\"id\":\"urn:ngsi-ld:InventoryItem:001\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit001\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":15}},{\"id\":\"urn:ngsi-ld:InventoryItem:002\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit002\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:003\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:003\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:001\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit003\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:004\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:004\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit004\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":15}},{\"id\":\"urn:ngsi-ld:InventoryItem:005\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:002\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit005\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:002\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":15}},{\"id\":\"urn:ngsi-ld:InventoryItem:006\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit006\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:007\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit007\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:008\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:008\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:003\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit008\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:009\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}},{\"id\":\"urn:ngsi-ld:InventoryItem:401\",\"type\":\"InventoryItem\",\"refStore\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Store:004\"},\"refShelf\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Shelf:unit010\"},\"refProduct\":{\"type\":\"Relationship\",\"value\":\"urn:ngsi-ld:Product:001\"},\"stockCount\":{\"type\":\"Integer\",\"value\":10000},\"shelfCount\":{\"type\":\"Integer\",\"value\":50}}]",
        "payloadType": "json",
        "x": 160,
        "y": 1660,
        "wires": [
            [
                "1d57b0ab9f6bb3b6"
            ]
        ]
    },
    {
        "id": "f7e8b1aab794d28e",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "WRITE (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 150,
        "y": 1500,
        "wires": []
    },
    {
        "id": "efa0a870160f400e",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "entities (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Product:011\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Brandy\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1199}},{\"id\":\"urn:ngsi-ld:Product:012\",\"type\":\"Product\",\"name\":{\"type\":\"Text\",\"value\":\"Port\"},\"size\":{\"type\":\"Text\",\"value\":\"M\"},\"price\":{\"type\":\"Integer\",\"value\":1099}}]",
        "payloadType": "json",
        "x": 150,
        "y": 1600,
        "wires": [
            [
                "1d57b0ab9f6bb3b6"
            ]
        ]
    },
    {
        "id": "e5c3bdca72116db2",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "READ (v2)",
        "info": " - [CRUD Tutorial](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 140,
        "y": 1740,
        "wires": []
    },
    {
        "id": "dbd4936be75bc21c",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "search by",
        "props": [
            {
                "p": "type",
                "v": "Product",
                "vt": "str"
            },
            {
                "p": "attrs",
                "v": "name,price",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 1840,
        "wires": [
            [
                "e1f54f9f99bf60c2"
            ]
        ]
    },
    {
        "id": "e1f54f9f99bf60c2",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "type,attrs",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"type\": \"{{type}}\",\n    \"attrs\": \"{{attrs}}\"\n}\n",
        "output": "json",
        "x": 360,
        "y": 1840,
        "wires": [
            [
                "e0086952b279ecf0"
            ]
        ]
    },
    {
        "id": "a3aec4f01873c616",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensor",
        "props": [
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 1780,
        "wires": [
            [
                "1d44783ad1c4f67e"
            ]
        ]
    },
    {
        "id": "16ff0b9f96b24ea5",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ {\"id\":\"urn:ngsi-ld:TemperatureSensor:001\"}]",
        "payloadType": "json",
        "x": 130,
        "y": 2020,
        "wires": [
            [
                "40df771ceb428736"
            ]
        ]
    },
    {
        "id": "9d2a585d08031f3c",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /v2/op/update",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/op/update",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 580,
        "y": 2080,
        "wires": [
            [
                "7a347f1a8c0a49c6"
            ]
        ]
    },
    {
        "id": "37f7d9e05ee8ed4a",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "import-data (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Store:001\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:002\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:003\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Store:004\",\"type\":\"Store\"},{\"id\":\"urn:ngsi-ld:Shelf:unit001\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit002\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit003\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit004\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit005\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit006\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit007\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit008\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit009\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Shelf:unit010\",\"type\":\"Shelf\"},{\"id\":\"urn:ngsi-ld:Product:001\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:002\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:003\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:004\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:005\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:006\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:007\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:008\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:009\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:InventoryItem:001\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:002\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:003\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:004\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:005\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:006\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:007\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:008\",\"type\":\"InventoryItem\"},{\"id\":\"urn:ngsi-ld:InventoryItem:401\",\"type\":\"InventoryItem\"}]",
        "payloadType": "json",
        "x": 160,
        "y": 2140,
        "wires": [
            [
                "40df771ceb428736"
            ]
        ]
    },
    {
        "id": "38578dd3d54d2642",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "entities (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Product:011\",\"type\":\"Product\"},{\"id\":\"urn:ngsi-ld:Product:012\",\"type\":\"Product\"}]",
        "payloadType": "json",
        "x": 150,
        "y": 2080,
        "wires": [
            [
                "40df771ceb428736"
            ]
        ]
    },
    {
        "id": "2cf128a8757480b8",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "all entities",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 2200,
        "wires": [
            [
                "930b5bdbba7c7e7c"
            ]
        ]
    },
    {
        "id": "e625042fda6334f9",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 2200,
        "wires": [
            [
                "249f0899508ab298"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "249f0899508ab298",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /v2/entities?{query}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 590,
        "y": 2200,
        "wires": [
            [
                "40df771ceb428736"
            ]
        ]
    },
    {
        "id": "930b5bdbba7c7e7c",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "attrs",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"attrs\": \"id\"\n}",
        "output": "json",
        "x": 350,
        "y": 2200,
        "wires": [
            [
                "e625042fda6334f9"
            ]
        ]
    },
    {
        "id": "638712a9bebbbfea",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"updated at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 1600,
        "wires": []
    },
    {
        "id": "7a347f1a8c0a49c6",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 790,
        "y": 2080,
        "wires": []
    },
    {
        "id": "1d57b0ab9f6bb3b6",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "append",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"actionType\": \"append\",\t   \"entities\": payload\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1600,
        "wires": [
            [
                "0b96daa1e49f7338"
            ]
        ]
    },
    {
        "id": "40df771ceb428736",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "delete",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t   \"actionType\": \"delete\",\t   \"entities\": payload\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 2080,
        "wires": [
            [
                "db0bce7d8e4c8472"
            ]
        ]
    },
    {
        "id": "e9e92a579a48d99e",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "DELETE (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n",
        "x": 150,
        "y": 1980,
        "wires": []
    },
    {
        "id": "3a3dd6d02e32e8b2",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\t    {\t        \"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\t        \"type\":\"TemperatureSensor\",\t        \"category\": {\t            \"type\":\"Text\",\t            \"value\":\"Sensor\"\t        },\t        \"temperature\": {\t            \"type\":\"Integer\",\t            \"value\":$round(200*$random())-50,\t            \"metadata\": {\t                \"unitCode\": {\t                    \"type\": \"Text\",\t                    \"value\": \"CEL\"\t                }\t            }\t        }\t    }\t]",
        "payloadType": "jsonata",
        "x": 130,
        "y": 1540,
        "wires": [
            [
                "1d57b0ab9f6bb3b6"
            ]
        ]
    },
    {
        "id": "1d44783ad1c4f67e",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "id",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"id\": \"{{id}}\"\n}\n",
        "output": "json",
        "x": 350,
        "y": 1780,
        "wires": [
            [
                "e0086952b279ecf0"
            ]
        ]
    },
    {
        "id": "bded8b956f3869a2",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "WRITE (LD)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-LD)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-LD)\n",
        "x": 1130,
        "y": 1500,
        "wires": []
    },
    {
        "id": "d770fb8ad1b71ea6",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "entities (LD)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:TemperatureSensor:002\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\"temperature\":{\"type\":\"Property\",\"value\":21,\"unitCode\":\"CEL\"}},{\"id\":\"urn:ngsi-ld:TemperatureSensor:003\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Property\",\"value\":\"sensor\"},\"temperature\":{\"type\":\"Property\",\"value\":27,\"unitCode\":\"CEL\"}}]",
        "payloadType": "json",
        "x": 1130,
        "y": 1600,
        "wires": [
            [
                "1ca3b2b4c01a4a25"
            ]
        ]
    },
    {
        "id": "81e1946a15d8d648",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1830,
        "y": 1600,
        "wires": []
    },
    {
        "id": "82a4eeed0bed5a27",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\t    \"id\": \"urn:ngsi-ld:TemperatureSensor:001\",\t    \"type\": \"TemperatureSensor\",\t    \"category\": {\t        \"type\": \"Property\",\t        \"value\": \"Sensor\"\t    },\t    \"temperature\": {\t        \"type\": \"Property\",\t        \"value\": $round(200*$random())-50,\t        \"unitCode\": \"CEL\"\t    }\t}]",
        "payloadType": "jsonata",
        "x": 1110,
        "y": 1540,
        "wires": [
            [
                "1ca3b2b4c01a4a25"
            ]
        ]
    },
    {
        "id": "d7ed6c618b916793",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /ngsi-ld/v1/entityOperations/upsert",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/upsert",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            }
        ],
        "x": 1560,
        "y": 1600,
        "wires": [
            [
                "81e1946a15d8d648"
            ]
        ]
    },
    {
        "id": "b4909fb37f7cf604",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "import-data (LD)",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[{\"id\":\"urn:ngsi-ld:Building:farm001\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Groer Stern 1\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3505,52.5144]}},\"name\":{\"type\":\"Property\",\"value\":\"Victory Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:barn002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"barn\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Strae des 17. Juni\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3698,52.5163]}},\"name\":{\"type\":\"Property\",\"value\":\"Big Red Barn\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:tower003\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"water_tower\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"John-Foster-Dulles-Allee\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10557\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3598,52.5165]}},\"name\":{\"type\":\"Property\",\"value\":\"Triton Tower\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person001\"}},{\"id\":\"urn:ngsi-ld:Building:farm002\",\"type\":\"Building\",\"category\":{\"type\":\"Property\",\"value\":[\"farm\"]},\"address\":{\"type\":\"Property\",\"value\":{\"streetAddress\":\"Hardenbergplatz 8\",\"addressRegion\":\"Berlin\",\"addressLocality\":\"Tiergarten\",\"postalCode\":\"10787\"},\"verified\":{\"type\":\"Property\",\"value\":true}},\"location\":{\"type\":\"GeoProperty\",\"value\":{\"type\":\"Point\",\"coordinates\":[13.3127,52.4893]}},\"name\":{\"type\":\"Property\",\"value\":\"Animal Farm\"},\"owner\":{\"type\":\"Relationship\",\"object\":\"urn:ngsi-ld:Person:person002\"}},{\"id\":\"urn:ngsi-ld:Person:person001\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Old MacDonald\"}},{\"id\":\"urn:ngsi-ld:Person:person002\",\"type\":\"Person\",\"name\":{\"type\":\"Property\",\"value\":\"Napoleon the Pig\"}}]",
        "payloadType": "json",
        "x": 1140,
        "y": 1660,
        "wires": [
            [
                "1ca3b2b4c01a4a25"
            ]
        ]
    },
    {
        "id": "1ca3b2b4c01a4a25",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "LD",
        "rules": [
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "link",
                "pt": "msg",
                "to": "link",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1600,
        "wires": [
            [
                "d7ed6c618b916793"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "cbe12ed9980cdf08",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "create entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Text\",\"value\":\"Sensor\"},\"temperature\":{\"type\":\"Integer\",\"value\":0,\"metadata\":{\"unitCode\":{\"type\":\"Text\",\"value\":\"CEL\"}}}}",
        "payloadType": "json",
        "x": 150,
        "y": 560,
        "wires": [
            [
                "65660e31adc2f543"
            ]
        ]
    },
    {
        "id": "30793419702565d9",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "PUT /v2/entities/{id}/attrs/{attr}/value",
        "method": "PUT",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}/attrs/{{{attr}}}/value",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Content-Type",
                "valueType": "other",
                "valueValue": "text/plain"
            }
        ],
        "x": 450,
        "y": 640,
        "wires": [
            [
                "c404f0aba350bf63"
            ]
        ]
    },
    {
        "id": "019ee462e80cebd4",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "write attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "attr",
                "v": "temperature",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "$round(200*$random())-50",
        "payloadType": "jsonata",
        "x": 150,
        "y": 640,
        "wires": [
            [
                "30793419702565d9",
                "4f4c9eeef48b18a8"
            ]
        ]
    },
    {
        "id": "675ad6bf4f572b6b",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test create",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"created at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 560,
        "wires": []
    },
    {
        "id": "c404f0aba350bf63",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test write",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"updated at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 780,
        "y": 640,
        "wires": []
    },
    {
        "id": "e65099e492fe714f",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "read attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "attr",
                "v": "temperature",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 720,
        "wires": [
            [
                "07489dcd4e69648e"
            ]
        ]
    },
    {
        "id": "b6133e092bb8b9b6",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test read",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : payload)",
        "statusType": "jsonata",
        "x": 780,
        "y": 720,
        "wires": []
    },
    {
        "id": "076d04399391fbcf",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "TEST (v2)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-v2)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-v2)\n",
        "x": 140,
        "y": 520,
        "wires": []
    },
    {
        "id": "65660e31adc2f543",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /v2/entities",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 390,
        "y": 560,
        "wires": [
            [
                "675ad6bf4f572b6b"
            ]
        ]
    },
    {
        "id": "07489dcd4e69648e",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /v2/entities/{id}/attrs/{attr}/value",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}/attrs/{{{attr}}}/value",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 450,
        "y": 720,
        "wires": [
            [
                "b6133e092bb8b9b6"
            ]
        ]
    },
    {
        "id": "5829dfe1ec7c226b",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /v2/entities/{id}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 390,
        "y": 800,
        "wires": [
            [
                "79cf8160467da45a"
            ]
        ]
    },
    {
        "id": "79cf8160467da45a",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test get",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : payload.id)",
        "statusType": "jsonata",
        "x": 780,
        "y": 800,
        "wires": []
    },
    {
        "id": "cf107cac040141bb",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "get entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 800,
        "wires": [
            [
                "5829dfe1ec7c226b"
            ]
        ]
    },
    {
        "id": "fa27063a7bf6195b",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "DELETE /v2/entities/{id}",
        "method": "DELETE",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 880,
        "wires": [
            [
                "8894f46c652c9947"
            ]
        ]
    },
    {
        "id": "e3a5989df349625d",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "delete entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 880,
        "wires": [
            [
                "fa27063a7bf6195b"
            ]
        ]
    },
    {
        "id": "8894f46c652c9947",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test delete",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"deleted at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 880,
        "wires": []
    },
    {
        "id": "9fea8b0ec4a98c13",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 400,
        "y": 1400,
        "wires": [
            [
                "1610fd0ffc401112"
            ]
        ]
    },
    {
        "id": "e1eddb8d79a6f592",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "list all subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 1400,
        "wires": [
            [
                "9fea8b0ec4a98c13"
            ]
        ]
    },
    {
        "id": "e5277c3ed5b13c26",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "DELETE /v2/subscriptions/{{id}}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/{{id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 430,
        "y": 1320,
        "wires": [
            [
                "9fea8b0ec4a98c13",
                "b2aa5e215a16718f"
            ]
        ]
    },
    {
        "id": "32ec1b985fb6c9cd",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "delete latest sub",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 160,
        "y": 1320,
        "wires": [
            [
                "e5277c3ed5b13c26"
            ]
        ]
    },
    {
        "id": "87e3c9a6b2f61c1b",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "delete all subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 1240,
        "wires": [
            [
                "496f9de875f5383a"
            ]
        ]
    },
    {
        "id": "496f9de875f5383a",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 400,
        "y": 1240,
        "wires": [
            [
                "31ed62fb53150a18",
                "03c82ecd2f79872e"
            ]
        ]
    },
    {
        "id": "d160da67b71a3c84",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "get flow.latest",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.id",
        "statusType": "msg",
        "x": 800,
        "y": 1400,
        "wires": []
    },
    {
        "id": "19946242bcc1e415",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "313a0daf1ef9a291",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 1240,
        "wires": [
            [
                "e5277c3ed5b13c26"
            ]
        ]
    },
    {
        "id": "aa926683326581e8",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "SUBSCRIBE (v2)",
        "info": " - [Subscriptions](https://github.com/FIWARE/tutorials.Subscriptions/tree/NGSI-v2)\n",
        "x": 160,
        "y": 980,
        "wires": []
    },
    {
        "id": "b2aa5e215a16718f",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 790,
        "y": 1320,
        "wires": []
    },
    {
        "id": "31ed62fb53150a18",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "split",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 630,
        "y": 1240,
        "wires": []
    },
    {
        "id": "cb1fed63426cad3c",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "split",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 630,
        "y": 1400,
        "wires": []
    },
    {
        "id": "03c82ecd2f79872e",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 630,
        "y": 1240,
        "wires": [
            [
                "313a0daf1ef9a291"
            ]
        ]
    },
    {
        "id": "1a4bbb09658b6100",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 630,
        "y": 1400,
        "wires": [
            [
                "d160da67b71a3c84",
                "19946242bcc1e415"
            ]
        ]
    },
    {
        "id": "14c74b01f031d233",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "create simple sub",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all temperature changes\",\"subject\":{\"entities\":[{\"idPattern\":\".*\",\"type\":\"TemperatureSensor\"}],\"condition\":{\"attrs\":[\"temperature\"]}},\"notification\":{\"http\":{\"url\":\"https://bd4nrg.engsep.repl.co/temperature-change\"}}}",
        "payloadType": "json",
        "x": 160,
        "y": 1060,
        "wires": [
            [
                "8d7a7f266a547fe5"
            ]
        ]
    },
    {
        "id": "8d7a7f266a547fe5",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /v2/subscriptions/",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 410,
        "y": 1000,
        "wires": [
            [
                "e1e0505eca9d3907"
            ]
        ]
    },
    {
        "id": "33c94face6704cb1",
        "type": "http in",
        "z": "8a8bfba2422cf698",
        "name": "",
        "url": "/temperature-change",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 430,
        "y": 1060,
        "wires": [
            [
                "66b3812f40cc19e4",
                "9d4ff73c8a8f0cd6"
            ]
        ]
    },
    {
        "id": "66b3812f40cc19e4",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "/temperature-change",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature.value",
        "statusType": "msg",
        "x": 820,
        "y": 1060,
        "wires": []
    },
    {
        "id": "4f4c9eeef48b18a8",
        "type": "delay",
        "z": "8a8bfba2422cf698",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 255,
        "y": 680,
        "wires": [
            [
                "07489dcd4e69648e"
            ]
        ],
        "l": false
    },
    {
        "id": "3720db5296328fc0",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "create entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "payload"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Property\",\"value\":\"Sensor\"},\"temperature\":{\"type\":\"Property\",\"value\":0,\"unitCode\":\"CEL\"}}",
        "payloadType": "json",
        "x": 1130,
        "y": 560,
        "wires": [
            [
                "a81d2bca9ae6c3c5",
                "e22f52831fd1232d"
            ]
        ]
    },
    {
        "id": "aafda94e1e80a7bc",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "PATCH /ngsi-ld/v1/entities/{id}/attrs",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}/attrs",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            }
        ],
        "x": 1420,
        "y": 640,
        "wires": [
            [
                "c97650f9d89919b0"
            ]
        ]
    },
    {
        "id": "e5d2e8de6c4771d0",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "write attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "method",
                "v": "PATCH",
                "vt": "str"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"temperature\": {\t       \"value\": $round(200*$random())-50,\t       \"type\": \"Property\"\t      }\t}\t\t",
        "payloadType": "jsonata",
        "x": 1130,
        "y": 640,
        "wires": [
            [
                "aafda94e1e80a7bc",
                "3652a062071f4cd2"
            ]
        ]
    },
    {
        "id": "c86465b961b10914",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test create",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"created at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 1830,
        "y": 560,
        "wires": []
    },
    {
        "id": "c97650f9d89919b0",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test write",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"updated at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 1820,
        "y": 640,
        "wires": []
    },
    {
        "id": "c6307833dacca874",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "read attribute",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"attrs\":\"temperature\",\"options\":\"keyValues\"}",
        "payloadType": "json",
        "x": 1130,
        "y": 720,
        "wires": [
            [
                "ba0e3ccc74a12d49"
            ]
        ]
    },
    {
        "id": "a9c09a87fc451be6",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test get / read",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (payload.title ? payload.title : payload.temperature)",
        "statusType": "jsonata",
        "x": 1840,
        "y": 720,
        "wires": []
    },
    {
        "id": "5071bca458dfe129",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "TEST (LD)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-LD)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-LD)\n",
        "x": 1120,
        "y": 520,
        "wires": []
    },
    {
        "id": "e22f52831fd1232d",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /ngsi-ld/v1/entities/",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            }
        ],
        "x": 1390,
        "y": 560,
        "wires": [
            [
                "c86465b961b10914"
            ]
        ]
    },
    {
        "id": "979a9760f0beb99f",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/entities/{id}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            }
        ],
        "x": 1400,
        "y": 800,
        "wires": [
            [
                "a9c09a87fc451be6",
                "801680fa5197c993"
            ]
        ]
    },
    {
        "id": "6e06fa455ecf279d",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "get entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "link",
                "v": "link",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1120,
        "y": 800,
        "wires": [
            [
                "979a9760f0beb99f"
            ]
        ]
    },
    {
        "id": "54c41ee45d85886c",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "DELETE /ngsi-ld/v1/entities/{{id}",
        "method": "DELETE",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1410,
        "y": 880,
        "wires": [
            [
                "a8b6b23ad4ab6c0f"
            ]
        ]
    },
    {
        "id": "56239bdf10e28d41",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "delete entity",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1130,
        "y": 880,
        "wires": [
            [
                "54c41ee45d85886c"
            ]
        ]
    },
    {
        "id": "a8b6b23ad4ab6c0f",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test delete",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.title : \"deleted at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 1830,
        "y": 880,
        "wires": []
    },
    {
        "id": "3387ca041cb99710",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/subscriptions",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1400,
        "y": 1400,
        "wires": [
            [
                "a6512fb7b7162e0d"
            ]
        ]
    },
    {
        "id": "64e7e33a5abfcf73",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "list all subs",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1120,
        "y": 1400,
        "wires": [
            [
                "3387ca041cb99710"
            ]
        ]
    },
    {
        "id": "865b81ef879f931c",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "DELETE /ngsi-ld/v1/subscriptions/{{id}}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions/{{id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1430,
        "y": 1320,
        "wires": [
            [
                "3387ca041cb99710",
                "8ba0f6306a0d21ed"
            ]
        ]
    },
    {
        "id": "804f64c6d1e6fd78",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "delete latest sub",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1140,
        "y": 1320,
        "wires": [
            [
                "865b81ef879f931c"
            ]
        ]
    },
    {
        "id": "bbd11fe6e3e6cbb3",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "delete all subs",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1130,
        "y": 1240,
        "wires": [
            [
                "66f3c5ce77b274af"
            ]
        ]
    },
    {
        "id": "66f3c5ce77b274af",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/subscriptions",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1400,
        "y": 1240,
        "wires": [
            [
                "b3e4b36ccbd29155",
                "6b0526fab2aa7038"
            ]
        ]
    },
    {
        "id": "bb4414ee9f151290",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "get flow.latest",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.id",
        "statusType": "msg",
        "x": 1840,
        "y": 1400,
        "wires": []
    },
    {
        "id": "8295fa9f40e8a11c",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1840,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "1ed2d1c411a2be9d",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "move id and remove payload",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "id",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1880,
        "y": 1240,
        "wires": [
            [
                "865b81ef879f931c"
            ]
        ]
    },
    {
        "id": "a31d2f1e5ee8568d",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "SUBSCRIBE (LD)",
        "info": " - [Subscriptions](https://github.com/FIWARE/tutorials.Subscriptions/tree/NGSI-LD)\n",
        "x": 1150,
        "y": 980,
        "wires": []
    },
    {
        "id": "8ba0f6306a0d21ed",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1830,
        "y": 1320,
        "wires": []
    },
    {
        "id": "b3e4b36ccbd29155",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "split",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1650,
        "y": 1240,
        "wires": []
    },
    {
        "id": "2f8b6f52a0a5de42",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "split",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1650,
        "y": 1400,
        "wires": []
    },
    {
        "id": "6b0526fab2aa7038",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1650,
        "y": 1240,
        "wires": [
            [
                "1ed2d1c411a2be9d"
            ]
        ]
    },
    {
        "id": "708fb359c06cd030",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1650,
        "y": 1400,
        "wires": [
            [
                "bb4414ee9f151290",
                "8295fa9f40e8a11c"
            ]
        ]
    },
    {
        "id": "10de80eef310caab",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "create simple ld sub",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all temperature changes\",\"type\":\"Subscription\",\"entities\":[{\"type\":\"TemperatureSensor\"}],\"watchedAttributes\":[\"temperature\"],\"notification\":{\"format\":\"keyValues\",\"endpoint\":{\"uri\":\"https://bd4nrg.engsep.repl.co/temperature-change-ld\",\"accept\":\"application/json\"}},\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\"}",
        "payloadType": "json",
        "x": 1150,
        "y": 1060,
        "wires": [
            [
                "fb017b5994d1675f"
            ]
        ]
    },
    {
        "id": "fb017b5994d1675f",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /ngsi-ld/v1/subscriptions",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/subscriptions",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/ld+json"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1410,
        "y": 1000,
        "wires": [
            [
                "1b496502815d90ff"
            ]
        ]
    },
    {
        "id": "1b496502815d90ff",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & $replace(headers.location, \"/ngsi-ld/v1/subscriptions/\", \"\")",
        "statusType": "jsonata",
        "x": 1830,
        "y": 1000,
        "wires": []
    },
    {
        "id": "aa55f3c502640a5a",
        "type": "http in",
        "z": "8a8bfba2422cf698",
        "name": "",
        "url": "/temperature-change-ld",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 1420,
        "y": 1060,
        "wires": [
            [
                "49e879e88b14612e",
                "6d08ce102d53b130"
            ]
        ]
    },
    {
        "id": "49e879e88b14612e",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "/temperature-change-ld",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 1870,
        "y": 1060,
        "wires": []
    },
    {
        "id": "a81d2bca9ae6c3c5",
        "type": "NGSI-v2ToLD",
        "z": "8a8bfba2422cf698",
        "name": "",
        "x": 1360,
        "y": 500,
        "wires": [
            [
                "ebf85d10f3b96ac1"
            ]
        ]
    },
    {
        "id": "91716ace7e34d74d",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "test entity",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1820,
        "y": 500,
        "wires": []
    },
    {
        "id": "ebf85d10f3b96ac1",
        "type": "json",
        "z": "8a8bfba2422cf698",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1650,
        "y": 500,
        "wires": [
            [
                "91716ace7e34d74d"
            ]
        ]
    },
    {
        "id": "1a6a5f01e7fe1240",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "create ld sub with query",
        "props": [
            {
                "p": "orion-ld",
                "v": "orion-ld",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all 'anomalous' temperatures (LD version)\",\"type\":\"Subscription\",\"entities\":[{\"type\":\"TemperatureSensor\"}],\"watchedAttributes\":[\"temperature\"],\"q\":\"temperature>75\",\"notification\":{\"attributes\":[\"temperature\"],\"format\":\"keyValues\",\"endpoint\":{\"uri\":\"https://bd4nrg.engsep.repl.co/test-simple-ads-ld\",\"accept\":\"application/json\"}},\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\"}",
        "payloadType": "json",
        "x": 1160,
        "y": 1120,
        "wires": [
            [
                "fb017b5994d1675f"
            ]
        ]
    },
    {
        "id": "3652a062071f4cd2",
        "type": "delay",
        "z": "8a8bfba2422cf698",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1235,
        "y": 680,
        "wires": [
            [
                "ba0e3ccc74a12d49"
            ]
        ],
        "l": false
    },
    {
        "id": "ba0e3ccc74a12d49",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"attrs\":\"temperature\",\"options\":\"keyValues\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 720,
        "wires": [
            [
                "979a9760f0beb99f"
            ]
        ]
    },
    {
        "id": "801680fa5197c993",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "d": true,
        "name": "test get",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (payload.title? payload.title : payload.id)",
        "statusType": "jsonata",
        "x": 1820,
        "y": 800,
        "wires": []
    },
    {
        "id": "c2df2e7c266b0489",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "LD >>>",
        "info": "",
        "x": 950,
        "y": 520,
        "wires": []
    },
    {
        "id": "511ac63e27a4fc08",
        "type": "http in",
        "z": "8a8bfba2422cf698",
        "name": "",
        "url": "/test-simple-ads-ld",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 1410,
        "y": 1120,
        "wires": [
            [
                "6d08ce102d53b130",
                "eb2257f38a891ad2"
            ]
        ]
    },
    {
        "id": "6d08ce102d53b130",
        "type": "http response",
        "z": "8a8bfba2422cf698",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1810,
        "y": 1120,
        "wires": []
    },
    {
        "id": "eb2257f38a891ad2",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "/test-simple-ads-ld",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 1850,
        "y": 1180,
        "wires": []
    },
    {
        "id": "d159a369b61ced47",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "create scoped sub",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"description\":\"Notify me of all anomalous temperatures\",\"subject\":{\"entities\":[{\"idPattern\":\".*\",\"type\":\"TemperatureSensor\"}],\"condition\":{\"attrs\":[\"temperature\"],\"expression\":{\"q\":\"temperature>75\"}}},\"notification\":{\"http\":{\"url\":\"https://bd4nrg.engsep.repl.co/test-simple-ads\"}}}",
        "payloadType": "json",
        "x": 170,
        "y": 1120,
        "wires": [
            [
                "8d7a7f266a547fe5"
            ]
        ]
    },
    {
        "id": "62f4c16d2673aa71",
        "type": "http in",
        "z": "8a8bfba2422cf698",
        "name": "",
        "url": "/test-simple-ads",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 420,
        "y": 1120,
        "wires": [
            [
                "9d4ff73c8a8f0cd6",
                "291a1b35956d7265"
            ]
        ]
    },
    {
        "id": "9d4ff73c8a8f0cd6",
        "type": "http response",
        "z": "8a8bfba2422cf698",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1120,
        "wires": []
    },
    {
        "id": "291a1b35956d7265",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "/test-simple-ads",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].temperature",
        "statusType": "msg",
        "x": 800,
        "y": 1180,
        "wires": []
    },
    {
        "id": "e1e0505eca9d3907",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & $replace(headers.location, \"/v2/subscriptions/\", \"\")",
        "statusType": "jsonata",
        "x": 790,
        "y": 1000,
        "wires": []
    },
    {
        "id": "1610fd0ffc401112",
        "type": "trigger",
        "z": "8a8bfba2422cf698",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "250",
        "extend": true,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 420,
        "y": 1460,
        "wires": [
            [
                "cb1fed63426cad3c",
                "1a4bbb09658b6100"
            ]
        ]
    },
    {
        "id": "a6512fb7b7162e0d",
        "type": "trigger",
        "z": "8a8bfba2422cf698",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "250",
        "extend": true,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1440,
        "y": 1460,
        "wires": [
            [
                "2f8b6f52a0a5de42",
                "708fb359c06cd030"
            ]
        ]
    },
    {
        "id": "323768871eef57af",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode&\" - \"&(payload.error?payload.error:$count(payload)&($count(payload)=1?\" result\":\" results\"))",
        "statusType": "jsonata",
        "x": 1830,
        "y": 1840,
        "wires": []
    },
    {
        "id": "318b28c2ed8755f5",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "search by types (verbose)",
        "props": [
            {
                "p": "payload.type",
                "v": "TemperatureSensor,Building,Person",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1170,
        "y": 1900,
        "wires": [
            [
                "b77ed478d407bd57"
            ]
        ]
    },
    {
        "id": "fa4f3c8490c91db5",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "READ (LD)",
        "info": " - [CRUD Tutorial](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-LD)\n - [PEP Proxy](https://github.com/FIWARE/tutorials.PEP-Proxy/tree/NGSI-LD)\n",
        "x": 1120,
        "y": 1740,
        "wires": []
    },
    {
        "id": "c06eb7b4d79184a6",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "search by type",
        "props": [
            {
                "p": "payload.type",
                "v": "Building",
                "vt": "str"
            },
            {
                "p": "payload.attrs",
                "v": "category,name",
                "vt": "str"
            },
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1140,
        "y": 1840,
        "wires": [
            [
                "b77ed478d407bd57"
            ]
        ]
    },
    {
        "id": "bbf11aac36868819",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensor",
        "props": [
            {
                "p": "payload.id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1110,
        "y": 1780,
        "wires": [
            [
                "b77ed478d407bd57"
            ]
        ]
    },
    {
        "id": "60002156113fa363",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "sensor",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"urn:ngsi-ld:TemperatureSensor:001\"]",
        "payloadType": "json",
        "x": 1110,
        "y": 2020,
        "wires": [
            [
                "b74d63fef2d81744"
            ]
        ]
    },
    {
        "id": "f9752cf931481649",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /ngsi-ld/v1/entityOperations/delete",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entityOperations/delete",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1560,
        "y": 2080,
        "wires": [
            [
                "d19e08689b48a7b6"
            ]
        ]
    },
    {
        "id": "0bdebc63a8c64c75",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "import-data (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"urn:ngsi-ld:Building:farm001\",\"urn:ngsi-ld:Building:farm002\",\"urn:ngsi-ld:Building:tower003\",\"urn:ngsi-ld:Building:barn002\",\"urn:ngsi-ld:Person:person001\",\"urn:ngsi-ld:Person:person002\"]",
        "payloadType": "json",
        "x": 1140,
        "y": 2140,
        "wires": [
            [
                "b74d63fef2d81744"
            ]
        ]
    },
    {
        "id": "a4e03551edcd35c6",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "entities (v2)",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[\"urn:ngsi-ld:TemperatureSensor:002\",\"urn:ngsi-ld:TemperatureSensor:003\"]",
        "payloadType": "json",
        "x": 1130,
        "y": 2080,
        "wires": [
            [
                "b74d63fef2d81744"
            ]
        ]
    },
    {
        "id": "d19e08689b48a7b6",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1830,
        "y": 2080,
        "wires": []
    },
    {
        "id": "01025f175db24373",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "DELETE (LD)",
        "info": " - [CRUD operations](https://github.com/FIWARE/tutorials.CRUD-Operations/tree/NGSI-LD)\n",
        "x": 1130,
        "y": 1980,
        "wires": []
    },
    {
        "id": "755568beed7a7ce0",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"type\": \"Building\",\n    \"atts\": \"category,name\",\n    \"options\": \"keyValues\"\n}\n",
        "output": "json",
        "x": 1460,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "d3e1c7e69825d5bc",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1510,
        "y": 1840,
        "wires": [
            [
                "323768871eef57af",
                "44372dc630e6e7af"
            ]
        ]
    },
    {
        "id": "b77ed478d407bd57",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "LD",
        "rules": [
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "link",
                "pt": "msg",
                "to": "link",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1840,
        "wires": [
            [
                "d3e1c7e69825d5bc"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "df4b3e01e5559a96",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "all entities (simulated - doesn't exist in LD)",
        "props": [
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            },
            {
                "p": "payload.type",
                "v": "TemperatureSensor,Building,Person",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1220,
        "y": 2200,
        "wires": [
            [
                "46b34d79633fd048"
            ]
        ]
    },
    {
        "id": "46b34d79633fd048",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "LD",
        "rules": [
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "link",
                "pt": "msg",
                "to": "link",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 2200,
        "wires": [
            [
                "2d106d9291b9a3a4"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "2d106d9291b9a3a4",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 1650,
        "y": 2200,
        "wires": [
            [
                "3eadbdfeebe0d7be"
            ]
        ]
    },
    {
        "id": "3eadbdfeebe0d7be",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1330,
        "y": 2140,
        "wires": [
            [
                "66c25e674a99c997"
            ]
        ]
    },
    {
        "id": "86820ebcad9220a9",
        "type": "join",
        "z": "8a8bfba2422cf698",
        "name": "",
        "mode": "auto",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 1670,
        "y": 2140,
        "wires": [
            [
                "b74d63fef2d81744"
            ]
        ]
    },
    {
        "id": "66c25e674a99c997",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1500,
        "y": 2140,
        "wires": [
            [
                "86820ebcad9220a9"
            ]
        ]
    },
    {
        "id": "b74d63fef2d81744",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "LD",
        "rules": [
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "link",
                "pt": "msg",
                "to": "link",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 2080,
        "wires": [
            [
                "f9752cf931481649"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "44372dc630e6e7af",
        "type": "split",
        "z": "8a8bfba2422cf698",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1690,
        "y": 1780,
        "wires": [
            [
                "d7258ae1d8ccc451"
            ]
        ]
    },
    {
        "id": "d7258ae1d8ccc451",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1830,
        "y": 1780,
        "wires": []
    },
    {
        "id": "cfde64b95b24daeb",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/entities (with @context removed)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion-ld}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "Link",
                "valueType": "msg",
                "valueValue": "link"
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "Accept",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            }
        ],
        "x": 1590,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "64696ec093a0f7c3",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "Note",
        "info": "The DELETE /v2/entities/id method \nseems to be less reliable than the\nBatch Delete Multiple Entities\nPOST /v2/op/update (see example below).",
        "x": 490,
        "y": 860,
        "wires": []
    },
    {
        "id": "902f602bd646ce60",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "AIO",
        "info": "",
        "x": 110,
        "y": 4040,
        "wires": []
    },
    {
        "id": "7bc5216a2ca9413c",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clientCredentials",
                "pt": "msg",
                "to": "clientId & \":\" & clientSecret",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 4200,
        "wires": [
            [
                "fd8d0c46ebcfc880"
            ]
        ]
    },
    {
        "id": "fd8d0c46ebcfc880",
        "type": "base64",
        "z": "8a8bfba2422cf698",
        "name": "",
        "action": "str",
        "property": "clientCredentials",
        "x": 640,
        "y": 4200,
        "wires": [
            [
                "bbb08793860f17f0",
                "41a1b1db30f6d938"
            ]
        ]
    },
    {
        "id": "bbb08793860f17f0",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "encoded credentials",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "clientCredentials",
        "statusType": "msg",
        "x": 840,
        "y": 4200,
        "wires": []
    },
    {
        "id": "41a1b1db30f6d938",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & clientCredentials",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 4260,
        "wires": [
            [
                "514db5781b8d144e"
            ]
        ]
    },
    {
        "id": "c204e08aa9c0e3da",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/x-www-form-urlencoded"
            }
        ],
        "x": 560,
        "y": 4260,
        "wires": [
            [
                "e9b615c234f8a8a5",
                "15367bef329e3000"
            ]
        ]
    },
    {
        "id": "e9b615c234f8a8a5",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "payload.access_token",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 4320,
        "wires": [
            [
                "699a1262636db96f"
            ]
        ]
    },
    {
        "id": "15367bef329e3000",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "access_token",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.access_token",
        "statusType": "msg",
        "x": 820,
        "y": 4260,
        "wires": []
    },
    {
        "id": "769ba9bbe96ca698",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "SETUP",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "clientId",
                "v": "clientId",
                "vt": "flow"
            },
            {
                "p": "clientSecret",
                "v": "clientSecret",
                "vt": "flow"
            },
            {
                "p": "username",
                "v": "username",
                "vt": "flow"
            },
            {
                "p": "password",
                "v": "password",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 4120,
        "wires": [
            [
                "c10b8bd5aea2b5ff"
            ]
        ]
    },
    {
        "id": "699a1262636db96f",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "set msg.payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"type\": \"https://uri.fiware.org/ns/data-models#Building\"\n}\n",
        "output": "json",
        "x": 360,
        "y": 4320,
        "wires": [
            [
                "447d514d8dc1e7b8"
            ]
        ]
    },
    {
        "id": "447d514d8dc1e7b8",
        "type": "http request",
        "z": "8a8bfba2422cf698",
        "name": "GET /ngsi-ld/v1/entities",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/ngsi-ld/v1/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 570,
        "y": 4320,
        "wires": [
            [
                "198a6c810c32f2b0"
            ]
        ]
    },
    {
        "id": "198a6c810c32f2b0",
        "type": "debug",
        "z": "8a8bfba2422cf698",
        "name": "context broker",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & \" entities\"\t",
        "statusType": "jsonata",
        "x": 820,
        "y": 4320,
        "wires": []
    },
    {
        "id": "c10b8bd5aea2b5ff",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "Alice",
        "rules": [
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-xpresswebapp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-clientsecret",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "alice-the-admin@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 4120,
        "wires": [
            [
                "7bc5216a2ca9413c"
            ]
        ]
    },
    {
        "id": "f9a278d7828226b2",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "Bob",
        "rules": [
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-xpresswebapp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-clientsecret",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "bob-the-manager@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 4160,
        "wires": [
            [
                "7bc5216a2ca9413c"
            ]
        ]
    },
    {
        "id": "b8d1bfa01119aea5",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "Charlie",
        "rules": [
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-xpresswebapp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-clientsecret",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "charlie-security@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 4200,
        "wires": [
            [
                "7bc5216a2ca9413c"
            ]
        ]
    },
    {
        "id": "06a413089d55b577",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "SETUP",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "clientId",
                "v": "clientId",
                "vt": "flow"
            },
            {
                "p": "clientSecret",
                "v": "clientSecret",
                "vt": "flow"
            },
            {
                "p": "username",
                "v": "username",
                "vt": "flow"
            },
            {
                "p": "password",
                "v": "password",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 4160,
        "wires": [
            [
                "f9a278d7828226b2"
            ]
        ]
    },
    {
        "id": "304d5e77ec68b6af",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "SETUP",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "clientId",
                "v": "clientId",
                "vt": "flow"
            },
            {
                "p": "clientSecret",
                "v": "clientSecret",
                "vt": "flow"
            },
            {
                "p": "username",
                "v": "username",
                "vt": "flow"
            },
            {
                "p": "password",
                "v": "password",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 4200,
        "wires": [
            [
                "b8d1bfa01119aea5"
            ]
        ]
    },
    {
        "id": "514db5781b8d144e",
        "type": "template",
        "z": "8a8bfba2422cf698",
        "name": "set msg.payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "username={{username}}&password={{password}}&grant_type=password",
        "output": "str",
        "x": 360,
        "y": 4260,
        "wires": [
            [
                "c204e08aa9c0e3da"
            ]
        ]
    },
    {
        "id": "d96d07f85e67b35b",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "name": "SETUP",
        "props": [
            {
                "p": "keyrock",
                "v": "keyrock",
                "vt": "flow"
            },
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "clientId",
                "v": "clientId",
                "vt": "flow"
            },
            {
                "p": "clientSecret",
                "v": "clientSecret",
                "vt": "flow"
            },
            {
                "p": "username",
                "v": "username",
                "vt": "flow"
            },
            {
                "p": "password",
                "v": "password",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 4080,
        "wires": [
            [
                "eb5d4de9d591474d"
            ]
        ]
    },
    {
        "id": "eb5d4de9d591474d",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "Default",
        "rules": [
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-xpresswebapp",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "tutorial-dckr-site-0000-clientsecret",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "alice-the-admin@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 4080,
        "wires": [
            [
                "7bc5216a2ca9413c"
            ]
        ]
    },
    {
        "id": "fbf549245582690b",
        "type": "link out",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "0863a646bf2e8b3c"
        ],
        "x": 535,
        "y": 120,
        "wires": []
    },
    {
        "id": "404d3ea79bb21719",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "https://bd4nrg.engsep.repl.co",
        "info": "",
        "x": 120,
        "y": 1020,
        "wires": []
    },
    {
        "id": "02d285b5f98f6512",
        "type": "comment",
        "z": "8a8bfba2422cf698",
        "name": "https://bd4nrg.engsep.repl.co",
        "info": "",
        "x": 1120,
        "y": 1020,
        "wires": []
    },
    {
        "id": "db1af1905e253621",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "Node-RED",
        "rules": [
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "ddb58d86-b6bb-45e5-8796-d12484066787",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "0d40ddc8-a7dd-45c6-97b1-2a6e96840a35",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "alice-the-admin@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test123",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1030,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "eaf184f7af77eb13",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "Replit",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "http://217.172.12.171:1027",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "keyrock",
                "pt": "msg",
                "to": "http://217.172.12.171:3005",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientId",
                "pt": "msg",
                "to": "4db99560-1296-46b9-938c-1c2622d14846",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "msg",
                "to": "4ecb637f-8ef4-46e5-9fa4-3b6c551cb46e",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "username",
                "pt": "msg",
                "to": "alice-the-admin@test.com",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "password",
                "pt": "msg",
                "to": "test123",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "4199924d0379446f",
        "type": "inject",
        "z": "8a8bfba2422cf698",
        "g": "8cec89091c0fa3a3",
        "name": "Cloud VMs",
        "props": [
            {
                "p": "username",
                "v": "zelda@hyrule.com",
                "vt": "str"
            },
            {
                "p": "password",
                "v": "test",
                "vt": "str"
            },
            {
                "p": "orion",
                "v": "http://217.172.12.210:1026",
                "vt": "str"
            },
            {
                "p": "orion-ld",
                "v": "http://217.172.12.210:1027",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "http://217.172.12.210:3005",
                "vt": "str"
            },
            {
                "p": "clientSecret",
                "v": "tutorial-dckr-site-0000-clientsecret",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "tutorial-dckr-site-0000-xpresswebapp",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "62a058eae9b0310f"
            ]
        ]
    },
    {
        "id": "db0bce7d8e4c8472",
        "type": "change",
        "z": "8a8bfba2422cf698",
        "name": "get orion+token flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 455,
        "y": 2080,
        "wires": [
            [
                "9d2a585d08031f3c"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png",
        "l": false
    },
    {
        "id": "e982f42b5f657dc5",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "Lista RPC Goerli",
        "info": "**[Infura](https://infura.io/dashboard/ethereum/5335c51b15474082b174e255701d969f/settings)** (100000 richieste/giorno) (efbrtobrhrdauyhmib@nthrw.com)\nhttps://goerli.infura.io/v3/5335c51b15474082b174e255701d969f\n\n**[RPC Info](https://rpc.info/)** (public)\nhttps://goerli.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161\n\n**[Ankr](https://www.ankr.com/rpc/eth/eth_goerli/)** (public)\nhttps://rpc.ankr.com/eth_goerli\n\n**[Alchemy](https://dashboard.alchemy.com/usage)** (ybwyourptbrsevjdzn@nvhrw.com)\nhttps://eth-goerli.g.alchemy.com/v2/c_o7OYGYQFXHsLYv7GPlT_VAQQYaxQz2\n\n",
        "x": 860,
        "y": 500,
        "wires": []
    },
    {
        "id": "409b03a059fc1130",
        "type": "contract-call",
        "z": "828bae03b631ac33",
        "name": "checkDocument",
        "smartContract": "7785b085c868737e",
        "contractFunction": "checkDocument",
        "senderAccount": "a46f63f7bc8183e7",
        "readonlyFunction": true,
        "weiTransfer": "",
        "onlyEstimateGas": false,
        "useEstimatedGasLimit": true,
        "gasLimit": "",
        "usePreviousBlocksGasPrice": true,
        "gasPrice": "",
        "fetchFullTransaction": false,
        "x": 400,
        "y": 160,
        "wires": [
            [],
            [
                "99b5202092915dbf"
            ]
        ]
    },
    {
        "id": "349691404796910f",
        "type": "contract-call",
        "z": "828bae03b631ac33",
        "name": "notarize",
        "smartContract": "7785b085c868737e",
        "contractFunction": "notarize",
        "senderAccount": "a46f63f7bc8183e7",
        "readonlyFunction": false,
        "weiTransfer": "",
        "onlyEstimateGas": false,
        "useEstimatedGasLimit": true,
        "gasLimit": "46591",
        "usePreviousBlocksGasPrice": true,
        "gasPrice": "46591",
        "fetchFullTransaction": false,
        "x": 380,
        "y": 340,
        "wires": [
            [
                "bac81f696513e89c"
            ],
            [
                "a843b2ba2665e4fc",
                "88483be87bf15ded"
            ]
        ]
    },
    {
        "id": "2684d261b0cde95f",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "transaction",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 850,
        "y": 240,
        "wires": []
    },
    {
        "id": "91bdd4bd368f523b",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"a\":\"test\"}",
        "payloadType": "json",
        "x": 120,
        "y": 380,
        "wires": [
            [
                "89dd78f24a14ecd8"
            ]
        ]
    },
    {
        "id": "f2c21ce70eccfb91",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "test",
        "payloadType": "str",
        "x": 110,
        "y": 340,
        "wires": [
            [
                "349691404796910f"
            ]
        ]
    },
    {
        "id": "3ffac9e5dbd43f88",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "Per trovare la Private Key",
        "info": "# Procedura su Chrome\n - Estensione Metamask\n - Opzioni account (overflow menu icon)\n - Dettagli Account\n - Esporta Chiave Privata",
        "x": 890,
        "y": 100,
        "wires": []
    },
    {
        "id": "c42c451395bd8c75",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "Per trovare la Public Key",
        "info": "bash $ `npm i -g ethereum-private-key-to-public-key`\nbash $ `ethereum-private-key-to-public-key` _private-key_\n\n0406c16dffbd03799962604dac8056a0615fd0586c1a1df8c09c05bedd41acec25ab9756c6bc577d0804d4244ed08d86a5bd3fb83991fc67ca13c096a8b8f040e9",
        "x": 890,
        "y": 140,
        "wires": []
    },
    {
        "id": "fb5cd562e3b14165",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "node-red-contrib-ethereum",
        "info": "[Github](https://github.com/timweing/node-red-contrib-ethereum)",
        "x": 890,
        "y": 40,
        "wires": []
    },
    {
        "id": "5b3ae1cdb8f71953",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 280,
        "wires": [
            [
                "349691404796910f"
            ]
        ]
    },
    {
        "id": "eba39feef1563071",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 160,
        "wires": [
            [
                "409b03a059fc1130"
            ]
        ]
    },
    {
        "id": "49f86f06850c4b56",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "create",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t    \"sender\":\"0x7efC9d38581c7Cb8372325c349Ec5095D027B3Dd\",\t    \"storedValue\":$random(),\t    \"timestamp\":$toMillis($now())\t}",
        "payloadType": "jsonata",
        "x": 110,
        "y": 40,
        "wires": [
            [
                "6ca56127a4114633"
            ]
        ]
    },
    {
        "id": "9b6d4685c1683664",
        "type": "change",
        "z": "828bae03b631ac33",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "storedValue",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 40,
        "wires": [
            [
                "7961f8fbccbd1456"
            ]
        ]
    },
    {
        "id": "7961f8fbccbd1456",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "$eval(payload)",
        "targetType": "jsonata",
        "statusVal": "$eval(payload)",
        "statusType": "auto",
        "x": 600,
        "y": 40,
        "wires": []
    },
    {
        "id": "6ca56127a4114633",
        "type": "json",
        "z": "828bae03b631ac33",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 250,
        "y": 40,
        "wires": [
            [
                "9b6d4685c1683664"
            ]
        ]
    },
    {
        "id": "89dd78f24a14ecd8",
        "type": "json",
        "z": "828bae03b631ac33",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 250,
        "y": 380,
        "wires": [
            [
                "349691404796910f"
            ]
        ]
    },
    {
        "id": "a843b2ba2665e4fc",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "block hash",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.blockHash",
        "statusType": "msg",
        "x": 850,
        "y": 400,
        "wires": []
    },
    {
        "id": "99b5202092915dbf",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "result",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 590,
        "y": 120,
        "wires": []
    },
    {
        "id": "43eba451ac1a2cfc",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "My_PoE.sol",
        "info": "[Remix](https://remix.ethereum.org/)\n```\n// SPDX-License-Identifier: GPL-3.0\npragma solidity >=0.7.0 <0.9.0;\n\n/**\n * @title Proof of Existence\n * @dev Notarization with Blockchain\n */\ncontract ProofOfExistence {\n  // @dev The contract state\n  mapping (bytes32 => bool) private proofs;\n\n  // @dev Private helper function to get a document's SHA256 hash\n  // *pure function\n  function calculateProof(string memory document) private pure returns (bytes32) {\n    return sha256(abi.encode(document));\n  }\n  \n  // @dev Calculate and store the proof for a document in the contract state\n  // *transactional function*\n  function notarize(string memory document) public returns (bytes32) {\n    bytes32 hash = calculateProof(document);\n    require(proofs[hash] != true, \"Document already notarized.\");\n    proofs[hash] = true;\n    return hash;\n  }\n\n  // @dev Check if a document has been notarized\n  // *read-only function*\n  function checkDocument(string memory document) public view returns (bool) {\n    return proofs[calculateProof(document)];\n  }\n}\n```",
        "x": 850,
        "y": 460,
        "wires": []
    },
    {
        "id": "f08d7e7d5bc3e581",
        "type": "transaction-reader",
        "z": "828bae03b631ac33",
        "name": "",
        "ethereumClient": "6405face102d3b52",
        "queryReceipt": false,
        "getByTxHash": true,
        "fromBlock": "-9",
        "toBlock": "latest",
        "filterFrom": "",
        "filterTo": "",
        "x": 630,
        "y": 440,
        "wires": [
            [
                "a843b2ba2665e4fc"
            ]
        ]
    },
    {
        "id": "bac81f696513e89c",
        "type": "change",
        "z": "828bae03b631ac33",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "transaction",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 220,
        "wires": [
            [
                "2684d261b0cde95f"
            ]
        ]
    },
    {
        "id": "88483be87bf15ded",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "summary",
        "targetType": "msg",
        "statusVal": "summary.args[0]",
        "statusType": "msg",
        "x": 860,
        "y": 320,
        "wires": []
    },
    {
        "id": "82e59ac46dd7bf62",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "name": "",
        "network": "0a1c6c0edd1fd842",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "checkDocument",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 410,
        "y": 500,
        "wires": [
            [
                "343b44a645a124a8"
            ]
        ]
    },
    {
        "id": "343b44a645a124a8",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 500,
        "wires": []
    },
    {
        "id": "4eb06c77ae9169d5",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "name": "",
        "network": "0a1c6c0edd1fd842",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "notarize",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 400,
        "y": 560,
        "wires": [
            [
                "b55d0fd4c4292310"
            ]
        ]
    },
    {
        "id": "dee77c998df2ba4b",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 560,
        "wires": []
    },
    {
        "id": "7a7a33d2a11469eb",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Test",
        "payloadType": "str",
        "x": 110,
        "y": 520,
        "wires": [
            [
                "82e59ac46dd7bf62"
            ]
        ]
    },
    {
        "id": "a419cd2f5b0e1ce7",
        "type": "comment",
        "z": "828bae03b631ac33",
        "name": "Ropsten (deprecated)",
        "info": "ProofOfExistence3 (Sepolia)\n0x208e521112313e58EbFe8C7642a23dDEEefB4C8C",
        "x": 140,
        "y": 440,
        "wires": []
    },
    {
        "id": "48d9d6a478548454",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 480,
        "wires": [
            [
                "82e59ac46dd7bf62"
            ]
        ]
    },
    {
        "id": "ab3eac0ea2fa027f",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 560,
        "wires": [
            [
                "4eb06c77ae9169d5"
            ]
        ]
    },
    {
        "id": "153a3b029871f4cc",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "name": "",
        "network": "d9ce9f5276beafeb",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "notarize",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 400,
        "y": 240,
        "wires": [
            [
                "7e7114a13cfd415d"
            ]
        ]
    },
    {
        "id": "6c1d160895e29491",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "name": "",
        "network": "d9ce9f5276beafeb",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "26a531bf9aef221a",
        "apiCall": "checkDocument",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 410,
        "y": 120,
        "wires": [
            [
                "99b5202092915dbf"
            ]
        ]
    },
    {
        "id": "b24a6b53296ab496",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "transaction",
        "payloadType": "flow",
        "x": 400,
        "y": 440,
        "wires": [
            [
                "f08d7e7d5bc3e581"
            ]
        ]
    },
    {
        "id": "aac231a57e83c1d0",
        "type": "change",
        "z": "828bae03b631ac33",
        "name": "sample transaction",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"_msgid\":\"06ba71824fc60399\",\"payload\":\"0x8f263d464d41833aab773550d0f16e67958debd264ad3b942796c7268d3bbe7d\",\"topic\":\"\",\"summary\":{\"function\":\"notarize\",\"args\":[\"{\\\"sender\\\":\\\"0x7efC9d38581c7Cb8372325c349Ec5095D027B3Dd\\\",\\\"storedValue\\\":0.8997582773418946,\\\"timestamp\\\":1662672346100}\"],\"options\":{\"from\":\"0x7efc9d38581c7cb8372325c349ec5095d027b3dd\",\"data\":\"0x7183616c000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000727b2273656e646572223a22307837656643396433383538316337436238333732333235633334394563353039354430323742334464222c2273746f72656456616c7565223a302e383939373538323737333431383934362c2274696d657374616d70223a313636323637323334363130307d0000000000000000000000000000\",\"gasPrice\":\"0x3fc6e787\",\"gas\":\"0xb6ee\",\"to\":\"0xe1989a90127a449bd22176299104cf6d2cb5ba86\",\"nonce\":\"0x17\"},\"txHash\":\"0x8f263d464d41833aab773550d0f16e67958debd264ad3b942796c7268d3bbe7d\"}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "821c0620d9ace9fe",
        "type": "change",
        "z": "828bae03b631ac33",
        "name": "sample block hash",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"_msgid\":\"06ba71824fc60399\",\"payload\":{\"blockHash\":\"0x9b1afb5b2e37aefe6ee3411064eaec7ac082727354d94a9bfe8bc664dff24df5\",\"blockNumber\":12952138,\"contractAddress\":null,\"cumulativeGasUsed\":2610890,\"effectiveGasPrice\":1070000007,\"from\":\"0x7efc9d38581c7cb8372325c349ec5095d027b3dd\",\"gasUsed\":46830,\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"status\":true,\"to\":\"0xe1989a90127a449bd22176299104cf6d2cb5ba86\",\"transactionHash\":\"0x8f263d464d41833aab773550d0f16e67958debd264ad3b942796c7268d3bbe7d\",\"transactionIndex\":12,\"type\":\"0x0\",\"events\":{}},\"topic\":\"\",\"summary\":{\"function\":\"notarize\",\"args\":[\"{\\\"sender\\\":\\\"0x7efC9d38581c7Cb8372325c349Ec5095D027B3Dd\\\",\\\"storedValue\\\":0.8997582773418946,\\\"timestamp\\\":1662672346100}\"],\"options\":{\"from\":\"0x7efc9d38581c7cb8372325c349ec5095d027b3dd\",\"data\":\"0x7183616c000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000727b2273656e646572223a22307837656643396433383538316337436238333732333235633334394563353039354430323742334464222c2273746f72656456616c7565223a302e383939373538323737333431383934362c2274696d657374616d70223a313636323637323334363130307d0000000000000000000000000000\",\"gasPrice\":\"0x3fc6e787\",\"gas\":\"0xb6ee\",\"to\":\"0xe1989a90127a449bd22176299104cf6d2cb5ba86\",\"nonce\":\"0x17\"},\"txHash\":\"0x8f263d464d41833aab773550d0f16e67958debd264ad3b942796c7268d3bbe7d\",\"result\":{\"blockHash\":\"0x9b1afb5b2e37aefe6ee3411064eaec7ac082727354d94a9bfe8bc664dff24df5\",\"blockNumber\":12952138,\"contractAddress\":null,\"cumulativeGasUsed\":2610890,\"effectiveGasPrice\":1070000007,\"from\":\"0x7efc9d38581c7cb8372325c349ec5095d027b3dd\",\"gasUsed\":46830,\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"status\":true,\"to\":\"0xe1989a90127a449bd22176299104cf6d2cb5ba86\",\"transactionHash\":\"0x8f263d464d41833aab773550d0f16e67958debd264ad3b942796c7268d3bbe7d\",\"transactionIndex\":12,\"type\":\"0x0\",\"events\":{}}}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "7e7114a13cfd415d",
        "type": "function",
        "z": "828bae03b631ac33",
        "name": "set flow.transaction",
        "func": "if (!msg.error) {\n    node.status({ fill: \"green\", shape: \"dot\", \"text\": msg.payload });\n    flow.set(\"transaction\", msg.payload);\n    msg.payload = \"https://goerli.etherscan.io/tx/\" + msg.payload;\n    return msg;\n}\nnode.status({ fill: \"red\", shape: \"dot\", \"text\": msg.error });\n//node.warn(msg.error);\nnode.error(msg.error, msg);\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 260,
        "wires": [
            [
                "2684d261b0cde95f"
            ]
        ]
    },
    {
        "id": "b55d0fd4c4292310",
        "type": "function",
        "z": "828bae03b631ac33",
        "name": "check result",
        "func": "if (!msg.error) {\n    node.status({ fill: \"green\", shape: \"dot\", \"text\": msg.payload });\n    //flow.set(\"transaction\", msg.payload);\n    msg.payload = \"https://ropsten.etherscan.io/tx/\" + msg.payload;\n    return msg;\n}\nnode.status({ fill: \"red\", shape: \"dot\", \"text\": msg.error });\nnode.warn(msg.error);\n//node.error(msg.error, msg);\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 560,
        "wires": [
            [
                "dee77c998df2ba4b"
            ]
        ]
    },
    {
        "id": "a45dd6a68388274b",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 240,
        "wires": [
            [
                "153a3b029871f4cc"
            ]
        ]
    },
    {
        "id": "109b73d7f8eda0e5",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "storedValue",
        "payloadType": "flow",
        "x": 140,
        "y": 120,
        "wires": [
            [
                "6c1d160895e29491"
            ]
        ]
    },
    {
        "id": "17a71bc5c80987ee",
        "type": "catch",
        "z": "828bae03b631ac33",
        "name": "",
        "scope": [
            "349691404796910f"
        ],
        "uncaught": false,
        "x": 370,
        "y": 380,
        "wires": [
            [
                "9de09c2259420837"
            ]
        ]
    },
    {
        "id": "9de09c2259420837",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "error",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 590,
        "y": 380,
        "wires": []
    },
    {
        "id": "ca402f3ad8871b4a",
        "type": "ethers-transaction",
        "z": "828bae03b631ac33",
        "name": "",
        "network": "d9ce9f5276beafeb",
        "wallet": "93b18379800c0f5a",
        "output": "payload",
        "outputType": "msg",
        "wait": false,
        "address": "",
        "addressType": "str",
        "ether": "",
        "etherType": "str",
        "gaslimit": "",
        "contract": "4fa439e414df7abd",
        "apiCall": "hello",
        "params": [
            "payload"
        ],
        "param0": "payload",
        "typeParam0": "msg",
        "x": 740,
        "y": 180,
        "wires": [
            [
                "e3f17e4fbd4d3a28"
            ]
        ]
    },
    {
        "id": "eccb6964207bf47c",
        "type": "inject",
        "z": "828bae03b631ac33",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "\"Ale, it's \" & $replace($now(),\"T\",\" at \")",
        "payloadType": "jsonata",
        "x": 590,
        "y": 180,
        "wires": [
            [
                "ca402f3ad8871b4a"
            ]
        ]
    },
    {
        "id": "e3f17e4fbd4d3a28",
        "type": "debug",
        "z": "828bae03b631ac33",
        "name": "debug",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 180,
        "wires": []
    },
    {
        "id": "d0a332827f3f0e01",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "get flow.client id",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientId",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 800,
        "y": 500,
        "wires": []
    },
    {
        "id": "966a2708d5e5fd55",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "get flow.client.secret",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "clientSecret",
        "targetType": "msg",
        "statusVal": "clientId",
        "statusType": "auto",
        "x": 820,
        "y": 560,
        "wires": []
    },
    {
        "id": "45b5854cddd78b4d",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clientSecret",
                "pt": "flow",
                "to": "clientSecret",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "024f8d250c5467de",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "clientId",
                "pt": "flow",
                "to": "clientId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "6c8196fdf6d2d565",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "get flow.username",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "username",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 810,
        "y": 380,
        "wires": []
    },
    {
        "id": "727668b992a93900",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "username",
                "pt": "flow",
                "to": "username",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "934a6cd011e1c810",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "get flow.password",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "password",
        "targetType": "msg",
        "statusVal": "password",
        "statusType": "auto",
        "x": 810,
        "y": 440,
        "wires": []
    },
    {
        "id": "e1a51d08c8aa20ba",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "password",
                "pt": "flow",
                "to": "password",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "80debba302a50283",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "get flow.orion",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "orion",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 790,
        "y": 260,
        "wires": []
    },
    {
        "id": "f9ce26ed2deaf144",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "orion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "aaa907d00f8886ec",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "get flow.keyrock",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "keyrock",
        "targetType": "msg",
        "statusVal": "username",
        "statusType": "auto",
        "x": 800,
        "y": 320,
        "wires": []
    },
    {
        "id": "4e96098b7102f8f6",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "keyrock",
                "pt": "flow",
                "to": "keyrock",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "33a9735a5628993b",
        "type": "debug",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "keyrock access token",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.access_token",
        "statusType": "msg",
        "x": 480,
        "y": 420,
        "wires": []
    },
    {
        "id": "e3ca9d0671c9fc1e",
        "type": "change",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload.access_token",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 420,
        "wires": [
            [
                "33a9735a5628993b",
                "62ba3fcd6ba74055"
            ]
        ]
    },
    {
        "id": "171b84747715c128",
        "type": "http request",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "content-type"
            }
        ],
        "x": 480,
        "y": 360,
        "wires": [
            [
                "e3ca9d0671c9fc1e"
            ]
        ]
    },
    {
        "id": "63f00eed41c192f8",
        "type": "change",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "set headers",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & client",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "content-type",
                "pt": "msg",
                "to": "application/x-www-form-urlencoded",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 130,
        "y": 360,
        "wires": [
            [
                "60684f9c16c45d6c"
            ]
        ]
    },
    {
        "id": "96355a0cac696254",
        "type": "change",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "client",
                "pt": "msg",
                "to": "clientId & \":\" & clientSecret",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 300,
        "wires": [
            [
                "4786b8914334a6c7"
            ]
        ]
    },
    {
        "id": "292bba24e28383ae",
        "type": "inject",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "FIWARE Lab VM",
        "props": [
            {
                "p": "orion",
                "v": "http://217.172.12.210:1026",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "http://217.172.12.210:3005",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "FIWARE_CLIENT_ID",
                "vt": "env"
            },
            {
                "p": "clientSecret",
                "v": "FIWARE_CLIENT_SECRET",
                "vt": "env"
            },
            {
                "p": "email",
                "v": "FIWARE_EMAIL",
                "vt": "env"
            },
            {
                "p": "password",
                "v": "FIWARE_PASSWORD",
                "vt": "env"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 300,
        "wires": [
            [
                "96355a0cac696254"
            ]
        ]
    },
    {
        "id": "62ba3fcd6ba74055",
        "type": "change",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 540,
        "wires": [
            [
                "31f16b7d8c113c20",
                "a16a3956fe82a1d4"
            ]
        ]
    },
    {
        "id": "31f16b7d8c113c20",
        "type": "http request",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "GET /v2/entities/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 360,
        "y": 540,
        "wires": [
            [
                "c445361ce2c45fb4"
            ]
        ]
    },
    {
        "id": "c445361ce2c45fb4",
        "type": "debug",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "all ngsi db",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & \" entities\"\t",
        "statusType": "jsonata",
        "x": 520,
        "y": 540,
        "wires": []
    },
    {
        "id": "a16a3956fe82a1d4",
        "type": "http request",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "GET /version",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 370,
        "y": 480,
        "wires": [
            [
                "b5d4b9ff56bf0fe1"
            ]
        ]
    },
    {
        "id": "b5d4b9ff56bf0fe1",
        "type": "debug",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "version",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.orion.version",
        "statusType": "msg",
        "x": 520,
        "y": 480,
        "wires": []
    },
    {
        "id": "4786b8914334a6c7",
        "type": "base64",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "",
        "action": "str",
        "property": "client",
        "x": 520,
        "y": 300,
        "wires": [
            [
                "63f00eed41c192f8",
                "f9ce26ed2deaf144",
                "4e96098b7102f8f6",
                "727668b992a93900",
                "e1a51d08c8aa20ba",
                "024f8d250c5467de",
                "45b5854cddd78b4d"
            ]
        ]
    },
    {
        "id": "1c341ecd88c511f3",
        "type": "comment",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "FIWARE Authentication",
        "info": "",
        "x": 160,
        "y": 480,
        "wires": []
    },
    {
        "id": "b625eb0be86b7ccf",
        "type": "NGSI-v2ToLD",
        "z": "204a29931e5e7230",
        "name": "",
        "x": 560,
        "y": 40,
        "wires": [
            [
                "acef4b3c50ea4b14"
            ]
        ]
    },
    {
        "id": "acef4b3c50ea4b14",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "NGSI-LD Entity",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 40,
        "wires": []
    },
    {
        "id": "4aaf0640e186d85c",
        "type": "NGSI-Dataset",
        "z": "204a29931e5e7230",
        "name": "",
        "endpoint": "5a6b78f4b2dc9415",
        "protocol": "v2",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "TemperatureSensor",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 350,
        "y": 140,
        "wires": [
            [
                "4d63a7b37bb62156"
            ]
        ]
    },
    {
        "id": "b004f5d78a53eb03",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "READ",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 130,
        "y": 140,
        "wires": [
            [
                "4aaf0640e186d85c"
            ]
        ]
    },
    {
        "id": "4d63a7b37bb62156",
        "type": "json",
        "z": "204a29931e5e7230",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 140,
        "wires": [
            [
                "05cac0dc1df8ccaf"
            ]
        ]
    },
    {
        "id": "05cac0dc1df8ccaf",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 140,
        "wires": []
    },
    {
        "id": "347653888f8c20bc",
        "type": "NGSI-Update",
        "z": "204a29931e5e7230",
        "name": "",
        "endpoint": "5a6b78f4b2dc9415",
        "protocol": "v2",
        "updateMode": "upsert-replace",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 550,
        "y": 80,
        "wires": [
            [
                "a59b0a62c384d465"
            ]
        ]
    },
    {
        "id": "a59b0a62c384d465",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "status",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 770,
        "y": 80,
        "wires": []
    },
    {
        "id": "52322e94cbca550c",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "set orion+token",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "http://orion.lab.fiware.org:1026",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 900,
        "wires": [
            [
                "b2073815cba496cb"
            ]
        ]
    },
    {
        "id": "b2073815cba496cb",
        "type": "http request",
        "z": "204a29931e5e7230",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 680,
        "y": 900,
        "wires": [
            [
                "4b24293d86a670fa"
            ]
        ]
    },
    {
        "id": "4b24293d86a670fa",
        "type": "split",
        "z": "204a29931e5e7230",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 910,
        "y": 900,
        "wires": [
            [
                "4a30d429dba50a63"
            ]
        ]
    },
    {
        "id": "4a30d429dba50a63",
        "type": "http request",
        "z": "204a29931e5e7230",
        "name": "DELETE /v2/subscriptions/{{payload.id}}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 740,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "a180df466a5073ef",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "manual",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 900,
        "wires": [
            [
                "52322e94cbca550c"
            ]
        ]
    },
    {
        "id": "278aaee67d91e96e",
        "type": "NGSI-Subscription",
        "z": "204a29931e5e7230",
        "name": "",
        "endpoint": "5a6b78f4b2dc9415",
        "protocol": "v2",
        "ldContext": "https://schema.lab.fiware.org/ld/context",
        "entityType": "TemperatureSensor",
        "watchedAttributes": "",
        "q": "",
        "notificationMode": "normalized",
        "notificationEndpoint": "https://bd4nrg.engsep.repl.co/notify",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 350,
        "y": 180,
        "wires": [
            [
                "94e73ac31a704456"
            ]
        ]
    },
    {
        "id": "94e73ac31a704456",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "subscription",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.statusCode",
        "statusType": "msg",
        "x": 790,
        "y": 180,
        "wires": []
    },
    {
        "id": "eea038c817f512c1",
        "type": "http in",
        "z": "204a29931e5e7230",
        "name": "",
        "url": "/notify",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 330,
        "y": 220,
        "wires": [
            [
                "61f88589d74f67b9"
            ]
        ]
    },
    {
        "id": "61f88589d74f67b9",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "notification",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].id",
        "statusType": "msg",
        "x": 550,
        "y": 220,
        "wires": []
    },
    {
        "id": "024a3b75315e803d",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "SUBSCRIBE",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 180,
        "wires": [
            [
                "278aaee67d91e96e"
            ]
        ]
    },
    {
        "id": "813751037e52a5be",
        "type": "template",
        "z": "204a29931e5e7230",
        "name": "TemperatureSensor",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"id\": \"{{topic}}\",\n    \"type\": \"TemperatureSensor\",\n    \"category\": {\n        \"type\": \"Text\",\n        \"value\": \"sensor\"\n    },\n    \"temperature\": {\n        \"type\": \"Integer\",\n        \"value\": {{payload}},\n        \"metadata\": {\n            \"unitCode\": {\n                \"type\": \"Text\",\n                \"value\": \"CEL\"\n            }\n        }\n    }\n}",
        "output": "str",
        "x": 350,
        "y": 60,
        "wires": [
            [
                "347653888f8c20bc",
                "b625eb0be86b7ccf"
            ]
        ]
    },
    {
        "id": "a0f7dc136c0aaec1",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "WRITE 001",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "urn:ngsi-ld:TemperatureSensor:001",
        "payload": "$round($random()*60-15)",
        "payloadType": "jsonata",
        "x": 150,
        "y": 40,
        "wires": [
            [
                "813751037e52a5be"
            ]
        ]
    },
    {
        "id": "64e72db64009b5b6",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "WRITE 002",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "urn:ngsi-ld:TemperatureSensor:002",
        "payload": "$round($random()*60-15)",
        "payloadType": "jsonata",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "813751037e52a5be"
            ]
        ]
    },
    {
        "id": "e1ef3ce59416e405",
        "type": "http request",
        "z": "204a29931e5e7230",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 380,
        "y": 740,
        "wires": [
            [
                "9dfef9594bdde0b0",
                "09abc8e107a68494"
            ]
        ]
    },
    {
        "id": "101a10a18aa55777",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "list subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 140,
        "y": 740,
        "wires": [
            [
                "e1ef3ce59416e405"
            ]
        ]
    },
    {
        "id": "c708440b6191cb9b",
        "type": "http request",
        "z": "204a29931e5e7230",
        "name": "DELETE /v2/subscriptions/{{id}}",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/{{id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 410,
        "y": 680,
        "wires": [
            [
                "e1ef3ce59416e405",
                "bc12eb7387c4f1b8"
            ]
        ]
    },
    {
        "id": "e2b4981d37421e40",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "delete latest sub",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "headers.X-Auth-Token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 160,
        "y": 680,
        "wires": [
            [
                "c708440b6191cb9b"
            ]
        ]
    },
    {
        "id": "9dfef9594bdde0b0",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "latest",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & \" subs\"",
        "statusType": "jsonata",
        "x": 550,
        "y": 740,
        "wires": []
    },
    {
        "id": "8a29583b2c3908cc",
        "type": "inject",
        "z": "204a29931e5e7230",
        "name": "delete all subs",
        "props": [
            {
                "p": "orion",
                "v": "orion",
                "vt": "flow"
            },
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 150,
        "y": 620,
        "wires": [
            [
                "04369a9562d301f1"
            ]
        ]
    },
    {
        "id": "04369a9562d301f1",
        "type": "http request",
        "z": "204a29931e5e7230",
        "name": "GET /v2/subscriptions/",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 380,
        "y": 620,
        "wires": [
            [
                "4fb38594fa5631b5",
                "0336decab6d45369"
            ]
        ]
    },
    {
        "id": "0336decab6d45369",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "split",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "$count(payload) & \" subs\"",
        "statusType": "jsonata",
        "x": 550,
        "y": 620,
        "wires": []
    },
    {
        "id": "4fb38594fa5631b5",
        "type": "split",
        "z": "204a29931e5e7230",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 550,
        "y": 620,
        "wires": [
            [
                "d5c27ea7e089de1b"
            ]
        ]
    },
    {
        "id": "09abc8e107a68494",
        "type": "split",
        "z": "204a29931e5e7230",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 550,
        "y": 740,
        "wires": [
            [
                "e24452eba463bcef",
                "5a311634f510b820"
            ]
        ]
    },
    {
        "id": "5a311634f510b820",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "get flow.latest",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.id",
        "statusType": "msg",
        "x": 800,
        "y": 740,
        "wires": []
    },
    {
        "id": "e24452eba463bcef",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "bc12eb7387c4f1b8",
        "type": "debug",
        "z": "204a29931e5e7230",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 780,
        "y": 680,
        "wires": []
    },
    {
        "id": "d5c27ea7e089de1b",
        "type": "change",
        "z": "204a29931e5e7230",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.id",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 620,
        "wires": [
            [
                "c708440b6191cb9b"
            ]
        ]
    },
    {
        "id": "60684f9c16c45d6c",
        "type": "template",
        "z": "204a29931e5e7230",
        "g": "38c9d45a7c3e062f",
        "name": "set payload",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "username={{email}}&password={{password}}&grant_type=password",
        "output": "str",
        "x": 290,
        "y": 360,
        "wires": [
            [
                "171b84747715c128"
            ]
        ]
    },
    {
        "id": "c022499a.8456e8",
        "type": "NGSI-Entity",
        "z": "1d4de0a0.3422df",
        "name": "",
        "endpoint": "d30314b8512b1944",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mode": "normalized",
        "mimeType": "application/ld+json",
        "attrs": "",
        "x": 390,
        "y": 200,
        "wires": [
            [
                "1e4925bc.e9d3ba"
            ]
        ]
    },
    {
        "id": "81fc8d2a.50e54",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:entities:E1",
        "payloadType": "str",
        "x": 130,
        "y": 160,
        "wires": [
            [
                "c022499a.8456e8"
            ]
        ]
    },
    {
        "id": "43ba68c.c64a398",
        "type": "NGSI-Update",
        "z": "1d4de0a0.3422df",
        "g": "39f652babe826162",
        "name": "",
        "endpoint": "d30314b8512b1944",
        "protocol": "LD",
        "updateMode": "upsert-update",
        "updateModev2": "append",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "mimeType": "application/ld+json",
        "x": 390,
        "y": 120,
        "wires": [
            [
                "122e0790.4854c8"
            ]
        ]
    },
    {
        "id": "55debfa0.ddcf",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "set E1.p1 = 12",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"id\":\"urn:entities:E1\",\"type\":\"T\",\"p1\":{\"type\":\"Property\",\"value\":12}}",
        "payloadType": "json",
        "x": 140,
        "y": 40,
        "wires": [
            [
                "43ba68c.c64a398"
            ]
        ]
    },
    {
        "id": "4d0d6303.6354fc",
        "type": "http in",
        "z": "1d4de0a0.3422df",
        "name": "",
        "url": "/T",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 260,
        "y": 380,
        "wires": [
            [
                "d7265125.a7a54",
                "59c14aa84ad82398"
            ]
        ]
    },
    {
        "id": "d7265125.a7a54",
        "type": "json",
        "z": "1d4de0a0.3422df",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570,
        "y": 340,
        "wires": [
            [
                "9cc8f9b8.29da58"
            ]
        ]
    },
    {
        "id": "8086a035.db37c",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "subscribe",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 120,
        "y": 300,
        "wires": [
            [
                "8947534.0ef18b"
            ]
        ]
    },
    {
        "id": "122e0790.4854c8",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "status",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 570,
        "y": 120,
        "wires": []
    },
    {
        "id": "cdd0301e.aebaa",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "p1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.p1.value",
        "statusType": "msg",
        "x": 710,
        "y": 200,
        "wires": []
    },
    {
        "id": "1e4925bc.e9d3ba",
        "type": "json",
        "z": "1d4de0a0.3422df",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570,
        "y": 200,
        "wires": [
            [
                "cdd0301e.aebaa"
            ]
        ]
    },
    {
        "id": "e3e83f05.aad23",
        "type": "http request",
        "z": "1d4de0a0.3422df",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 570,
        "y": 440,
        "wires": [
            [
                "fe3f614c.1a6e8",
                "b011aceadafc5a87"
            ]
        ]
    },
    {
        "id": "bbdb248d.38a688",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "list subscriptions",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 440,
        "wires": [
            [
                "07b2f134d5825e43"
            ]
        ]
    },
    {
        "id": "fe3f614c.1a6e8",
        "type": "split",
        "z": "1d4de0a0.3422df",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 440,
        "wires": [
            [
                "11cb989c.650d57",
                "e12f45d8.c42638"
            ]
        ]
    },
    {
        "id": "6a195e60.90594",
        "type": "http request",
        "z": "1d4de0a0.3422df",
        "name": "DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/{{topic}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 580,
        "y": 500,
        "wires": [
            [
                "e3e83f05.aad23"
            ]
        ]
    },
    {
        "id": "6764b7e7.1e2138",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "delete latest subscription",
        "props": [
            {
                "p": "topic",
                "v": "latest",
                "vt": "flow"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 170,
        "y": 500,
        "wires": [
            [
                "72d12cdb2e60bde1"
            ]
        ]
    },
    {
        "id": "217df94f.4b12d6",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "subscribe",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.subscriptionId",
        "targetType": "msg",
        "statusVal": "payload.statusCode",
        "statusType": "msg",
        "x": 380,
        "y": 300,
        "wires": []
    },
    {
        "id": "9cc8f9b8.29da58",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "notify",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.data[0].p1.value",
        "statusType": "msg",
        "x": 710,
        "y": 340,
        "wires": []
    },
    {
        "id": "11cb989c.650d57",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload.id",
        "statusType": "msg",
        "x": 870,
        "y": 440,
        "wires": []
    },
    {
        "id": "d37f713c.b326a",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:entities:E2",
        "payloadType": "str",
        "x": 130,
        "y": 180,
        "wires": [
            [
                "c022499a.8456e8"
            ]
        ]
    },
    {
        "id": "528d901b.75bc4",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "urn:entities:E3",
        "payloadType": "str",
        "x": 130,
        "y": 200,
        "wires": [
            [
                "c022499a.8456e8"
            ]
        ]
    },
    {
        "id": "98a25d956608fe16",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "g": "39f652babe826162",
        "name": "Orion LD Proxy",
        "props": [
            {
                "p": "orion",
                "v": "https://1029-zeldalegend-tutorialspe-1sxitfv423q.ws-eu59.gitpod.io",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 400,
        "y": 60,
        "wires": [
            [
                "37b3cea5e9de438d"
            ]
        ]
    },
    {
        "id": "37b3cea5e9de438d",
        "type": "change",
        "z": "1d4de0a0.3422df",
        "name": "set ORION",
        "rules": [
            {
                "t": "set",
                "p": "ORION",
                "pt": "global",
                "to": "orion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 60,
        "wires": [
            [
                "ab6e551fc32ca4ad"
            ]
        ]
    },
    {
        "id": "e76cf421c5dc70d2",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "version",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload[\"orionld version\"]",
        "statusType": "msg",
        "x": 880,
        "y": 60,
        "wires": []
    },
    {
        "id": "ab6e551fc32ca4ad",
        "type": "http request",
        "z": "1d4de0a0.3422df",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 730,
        "y": 60,
        "wires": [
            [
                "e76cf421c5dc70d2"
            ]
        ]
    },
    {
        "id": "fc2aa57c34fa77d7",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "set E1.p1 = random",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\t   \"@context\": \"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\t   \"id\":\"urn:entities:E1\",\t   \"type\":\"T\",\t   \"p1\":{\t       \"type\":\"Property\",\t       \"value\":$round($random()*100)\t   }\t}",
        "payloadType": "jsonata",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "43ba68c.c64a398"
            ]
        ]
    },
    {
        "id": "afda43ba9276b10d",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "set E2.p2 = 24",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"id\":\"urn:entities:E2\",\"type\":\"T\",\"p2\":{\"type\":\"Property\",\"value\":24}}",
        "payloadType": "json",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "43ba68c.c64a398"
            ]
        ]
    },
    {
        "id": "a6851ee5cfe4f1af",
        "type": "NGSI-Dataset",
        "z": "1d4de0a0.3422df",
        "name": "",
        "endpoint": "d30314b8512b1944",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "T",
        "attrs": "p1,p2",
        "q": "",
        "mode": "keyValues",
        "x": 370,
        "y": 260,
        "wires": [
            [
                "65660eec3e1284d0"
            ]
        ]
    },
    {
        "id": "b6bbd32ce1835dd7",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "all entities",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 260,
        "wires": [
            [
                "a6851ee5cfe4f1af"
            ]
        ]
    },
    {
        "id": "65660eec3e1284d0",
        "type": "json",
        "z": "1d4de0a0.3422df",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 570,
        "y": 260,
        "wires": [
            [
                "303b877a448f9892",
                "534352fddac82113"
            ]
        ]
    },
    {
        "id": "303b877a448f9892",
        "type": "split",
        "z": "1d4de0a0.3422df",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 300,
        "wires": [
            [
                "da8e4ea311cd72ee"
            ]
        ]
    },
    {
        "id": "da8e4ea311cd72ee",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "entity",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 300,
        "wires": []
    },
    {
        "id": "534352fddac82113",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "entities",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 720,
        "y": 260,
        "wires": []
    },
    {
        "id": "59c14aa84ad82398",
        "type": "http response",
        "z": "1d4de0a0.3422df",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 570,
        "y": 380,
        "wires": []
    },
    {
        "id": "6cf1c92fa830aac0",
        "type": "split",
        "z": "1d4de0a0.3422df",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 710,
        "y": 560,
        "wires": [
            [
                "1866462355534941"
            ]
        ]
    },
    {
        "id": "9f5cd8ac8c7bf870",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "delete all subscriptions",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 160,
        "y": 560,
        "wires": [
            [
                "c22856c6c20a5b6d"
            ]
        ]
    },
    {
        "id": "8621d02b.926e6",
        "type": "inject",
        "z": "1d4de0a0.3422df",
        "name": "set E3.p1 = 36, p2 = 48",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"@context\":\"https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld\",\"id\":\"urn:entities:E3\",\"type\":\"T\",\"p1\":{\"type\":\"Property\",\"value\":36},\"p2\":{\"type\":\"Property\",\"value\":48}}",
        "payloadType": "json",
        "x": 160,
        "y": 100,
        "wires": [
            [
                "43ba68c.c64a398"
            ]
        ]
    },
    {
        "id": "07b2f134d5825e43",
        "type": "change",
        "z": "1d4de0a0.3422df",
        "name": "get ORION",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "ORION",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 440,
        "wires": [
            [
                "e3e83f05.aad23"
            ]
        ]
    },
    {
        "id": "6654929366336c82",
        "type": "http request",
        "z": "1d4de0a0.3422df",
        "name": "GET",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 570,
        "y": 560,
        "wires": [
            [
                "6cf1c92fa830aac0"
            ]
        ]
    },
    {
        "id": "1866462355534941",
        "type": "http request",
        "z": "1d4de0a0.3422df",
        "name": "DELETE",
        "method": "DELETE",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/ngsi-ld/v1/subscriptions/{{payload.id}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 880,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "72d12cdb2e60bde1",
        "type": "change",
        "z": "1d4de0a0.3422df",
        "name": "get ORION",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "ORION",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 500,
        "wires": [
            [
                "6a195e60.90594"
            ]
        ]
    },
    {
        "id": "c22856c6c20a5b6d",
        "type": "change",
        "z": "1d4de0a0.3422df",
        "name": "get ORION",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "ORION",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 560,
        "wires": [
            [
                "6654929366336c82"
            ]
        ]
    },
    {
        "id": "e12f45d8.c42638",
        "type": "change",
        "z": "1d4de0a0.3422df",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "latest",
                "pt": "flow",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "a3907d51ecac9136",
        "type": "comment",
        "z": "1d4de0a0.3422df",
        "name": "set notification endpoint",
        "info": "",
        "x": 120,
        "y": 360,
        "wires": []
    },
    {
        "id": "8947534.0ef18b",
        "type": "NGSI-Subscription",
        "z": "1d4de0a0.3422df",
        "name": "",
        "endpoint": "d30314b8512b1944",
        "protocol": "LD",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "T",
        "watchedAttributes": "",
        "q": "",
        "notificationMode": "normalized",
        "notificationEndpoint": "https://bd4nrg.engsep.repl.co/T",
        "notificationAttributes": "",
        "mimeType": "application/ld+json",
        "x": 250,
        "y": 340,
        "wires": [
            [
                "217df94f.4b12d6"
            ]
        ]
    },
    {
        "id": "b011aceadafc5a87",
        "type": "debug",
        "z": "1d4de0a0.3422df",
        "name": "array",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 400,
        "wires": []
    },
    {
        "id": "f279627921458d5f",
        "type": "debug",
        "z": "ba9285a6.957868",
        "name": "GitHub vars",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 120,
        "wires": []
    },
    {
        "id": "bdd706d8fb85efbd",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set flow.Github",
        "rules": [
            {
                "t": "set",
                "p": "Github.bearer",
                "pt": "flow",
                "to": "$contains($lowercase(token), \"bearer \") ? token : (\"bearer \" & token)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "Github.owner",
                "pt": "flow",
                "to": "username",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "Github.repo",
                "pt": "flow",
                "to": "repository",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 120,
        "wires": [
            [
                "f279627921458d5f"
            ]
        ]
    },
    {
        "id": "172d6356ab04a229",
        "type": "http request",
        "z": "ba9285a6.957868",
        "name": "PUT github",
        "method": "PUT",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api.github.com/repos/{{owner}}/{{repo}}/contents/node-red/data/{{{file}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 870,
        "y": 460,
        "wires": [
            [
                "0c7340d2a44049f7"
            ]
        ]
    },
    {
        "id": "3e5ce0e41afcd72f",
        "type": "http request",
        "z": "ba9285a6.957868",
        "name": "GET github",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://api.github.com/repos/{{owner}}/{{repo}}/contents/node-red/data/{{{file}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 870,
        "y": 220,
        "wires": [
            [
                "e866bd89f8560646"
            ]
        ]
    },
    {
        "id": "64523d55e5caf6a2",
        "type": "file in",
        "z": "ba9285a6.957868",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 660,
        "y": 380,
        "wires": [
            [
                "48decdeb736e977e"
            ]
        ]
    },
    {
        "id": "749b59e6136e3253",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "sha",
                "pt": "msg",
                "to": "payload.sha",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 300,
        "wires": [
            [
                "64523d55e5caf6a2"
            ]
        ]
    },
    {
        "id": "48decdeb736e977e",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set msg.payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"content\": $base64encode(payload)}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload.message",
                "pt": "msg",
                "to": "Saved from Node-RED editor",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "sha",
                "pt": "msg",
                "to": "payload.sha",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 380,
        "wires": [
            [
                "69472f5dbcdf5382"
            ]
        ]
    },
    {
        "id": "e866bd89f8560646",
        "type": "delay",
        "z": "ba9285a6.957868",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 670,
        "y": 300,
        "wires": [
            [
                "749b59e6136e3253"
            ]
        ]
    },
    {
        "id": "69472f5dbcdf5382",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set msg.headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"User-Agent\":\"Node-RED\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.Authorization",
                "pt": "msg",
                "to": "bearer",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 460,
        "wires": [
            [
                "172d6356ab04a229"
            ]
        ]
    },
    {
        "id": "acda9dd01f83bbe0",
        "type": "debug",
        "z": "ba9285a6.957868",
        "name": "commit statusCode",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 850,
        "y": 540,
        "wires": []
    },
    {
        "id": "43dcd85b58dfee39",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set msg.headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"User-Agent\":\"Node-RED\"}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.Authorization",
                "pt": "msg",
                "to": "bearer",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 220,
        "wires": [
            [
                "3e5ce0e41afcd72f"
            ]
        ]
    },
    {
        "id": "eaf63b0745580f85",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "get flow.Github",
        "rules": [
            {
                "t": "set",
                "p": "bearer",
                "pt": "msg",
                "to": "Github.bearer",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "owner",
                "pt": "msg",
                "to": "Github.owner",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "repo",
                "pt": "msg",
                "to": "Github.repo",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 160,
        "wires": [
            [
                "43dcd85b58dfee39"
            ]
        ]
    },
    {
        "id": "0c7340d2a44049f7",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "filename",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 540,
        "wires": [
            [
                "acda9dd01f83bbe0"
            ]
        ]
    },
    {
        "id": "3118e4be366f0844",
        "type": "comment",
        "z": "ba9285a6.957868",
        "name": "Github token",
        "info": "Repository:\nhttps://github.com/${GITHUB_USERNAME}/${GITHUB_REPOSITORY}\n\nToken:\nhttps://github.com/settings/tokens\n",
        "x": 890,
        "y": 40,
        "wires": []
    },
    {
        "id": "581edb20c9a627e2",
        "type": "change",
        "z": "ba9285a6.957868",
        "name": "set file paths",
        "rules": [
            {
                "t": "set",
                "p": "file",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "\"/data/\" & file",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 220,
        "wires": [
            [
                "eaf63b0745580f85"
            ]
        ]
    },
    {
        "id": "7c55382072ac5ecd",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "flows_cred.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "flows_cred.json",
        "payloadType": "str",
        "x": 140,
        "y": 220,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "6efcdb36f7b67ad3",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "flows.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "flows.json",
        "payloadType": "str",
        "x": 120,
        "y": 180,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "30b8aaf6d52456ce",
        "type": "inject",
        "z": "ba9285a6.957868",
        "g": "416fb17dde932093",
        "name": "GitHub",
        "props": [
            {
                "p": "token",
                "v": "GITHUB_TOKEN",
                "vt": "env"
            },
            {
                "p": "username",
                "v": "hybuild-project",
                "vt": "str"
            },
            {
                "p": "repository",
                "v": "PEP-Proxy-NGSI-LD",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "x": 440,
        "y": 60,
        "wires": [
            [
                "bdd706d8fb85efbd"
            ]
        ]
    },
    {
        "id": "f3b82308cbd26c4e",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "settings.js",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "settings.js",
        "payloadType": "str",
        "x": 120,
        "y": 140,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "826cd1312e95863f",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": "package.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "package.json",
        "payloadType": "str",
        "x": 130,
        "y": 100,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "9ee5ee3ce991d462",
        "type": "inject",
        "z": "ba9285a6.957868",
        "name": ".config.users.json",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": ".config.users.json",
        "payloadType": "str",
        "x": 140,
        "y": 60,
        "wires": [
            [
                "581edb20c9a627e2"
            ]
        ]
    },
    {
        "id": "91618269345c9b5a",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Refresh",
        "group": "160e81fb.f1c86e",
        "order": 10,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "#5CFEF2",
        "bgcolor": "",
        "className": "",
        "icon": "refresh",
        "payload": "",
        "payloadType": "str",
        "topic": "refresh",
        "topicType": "str",
        "x": 100,
        "y": 380,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "fc10e0dafc44c769",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Delete",
        "group": "160e81fb.f1c86e",
        "order": 8,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#f31100",
        "className": "",
        "icon": "delete",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 90,
        "y": 440,
        "wires": [
            [
                "f115a2bc122c7201"
            ]
        ]
    },
    {
        "id": "f115a2bc122c7201",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "get flow.File",
        "func": "// Get the filename from the flow context\nlet filename = flow.get(\"File\");\n\n// check, if the filename is undefined that means it does not exist yet, nothing is selected yet\n// return: do not output anything\nif (filename === undefined) {\n    return;\n}\n\n// return the filename to the file-in node to delete\nmsg.filename = filename;\n\nif (msg.filename.replace(/^.*(\\\\|\\/|\\:)/, '')[0] !== \".\") {\n    // Only do this if this is a file, we don't delete folders\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 440,
        "wires": [
            [
                "b25609b65f7426c8"
            ]
        ]
    },
    {
        "id": "30c322a137fb9155",
        "type": "file",
        "z": "48a7733923a33252",
        "name": "delete file",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "delete",
        "encoding": "none",
        "x": 920,
        "y": 440,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "9618a7d3262da78d",
        "type": "http in",
        "z": "48a7733923a33252",
        "name": "",
        "url": "/download",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 560,
        "wires": [
            [
                "aca8d6bf153a2f2e"
            ]
        ]
    },
    {
        "id": "8aeaad20c7c71351",
        "type": "http response",
        "z": "48a7733923a33252",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 790,
        "y": 560,
        "wires": []
    },
    {
        "id": "aca8d6bf153a2f2e",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "extract file",
        "func": "msg.filename = msg.req.query.filename;\nmsg.contentdisposition = \"attachment; filename=\\\"\" + msg.req.query.filename.replace(/^.*(\\\\|\\/|\\:)/, '') + \"\\\"\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 560,
        "wires": [
            [
                "4ab5604bd381f56f"
            ]
        ],
        "outputLabels": [
            "Folder selected"
        ]
    },
    {
        "id": "4ab5604bd381f56f",
        "type": "file in",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 480,
        "y": 560,
        "wires": [
            [
                "2fbdf1b2f1e51187"
            ]
        ]
    },
    {
        "id": "2fbdf1b2f1e51187",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set headers",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "headers.content-type",
                "pt": "msg",
                "to": "application/octet-stream",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "headers.Content-Disposition",
                "pt": "msg",
                "to": "contentdisposition",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 560,
        "wires": [
            [
                "8aeaad20c7c71351"
            ]
        ]
    },
    {
        "id": "ac46716ba55a985b",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Graph",
        "group": "160e81fb.f1c86e",
        "order": 12,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "#FFFE00",
        "bgcolor": "",
        "className": "",
        "icon": "show_chart",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 90,
        "y": 500,
        "wires": [
            [
                "95f454061a2fb879"
            ]
        ]
    },
    {
        "id": "95f454061a2fb879",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "get flow.File",
        "func": "// Get the filename from the flow context\nlet filename = flow.get(\"File\");\n\n// check, if the filename is undefined that means it does not exist yet, nothing is selected yet\n// return: do not output anything\nif (filename === undefined) {\n    return;\n}\n\n// return the filename to the file-in node to delete\nmsg.filename = filename;\n\nif (msg.filename.replace(/^.*(\\\\|\\/|\\:)/, '')[0] !== \".\") {\n    // Only do this if this is a file, we don't delete folders\n    return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 500,
        "wires": [
            [
                "56b9e648a82f0f9e"
            ]
        ]
    },
    {
        "id": "56b9e648a82f0f9e",
        "type": "file in",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 480,
        "y": 500,
        "wires": [
            [
                "2fc2950c9cc1e983"
            ]
        ]
    },
    {
        "id": "2fc2950c9cc1e983",
        "type": "csv",
        "z": "48a7733923a33252",
        "name": "",
        "sep": ",",
        "hdrin": true,
        "hdrout": "",
        "multi": "mult",
        "ret": "\\n",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": false,
        "include_null_values": false,
        "x": 630,
        "y": 500,
        "wires": [
            [
                "57d4a10a48990a5b"
            ]
        ]
    },
    {
        "id": "57d4a10a48990a5b",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "chart data",
        "func": "var chart = [{\n    \"series\":[],\n    \"data\":[],\n    \"labels\":[msg.filename]\n}];\n\nlet columns = 0;\n\nfor(var series in msg.payload[0]) {\n    if(series!==\"time\") {\n        chart[0].series.push(series);\n        chart[0].data.push([]);\n        columns++;\n    }\n}\n\nfor (var j=0; j<msg.payload.length; j++) {\n   for(var i=0;i<columns;i++) {\n       chart[0].data[i].push({\"x\":msg.payload[j].time, \"y\":msg.payload[j][chart[0].series[i]]});\n   } \n}\n\nmsg.payload = chart;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 500,
        "wires": [
            [
                "3995b2e8155a78af"
            ]
        ]
    },
    {
        "id": "a4a7c1b41f99642e",
        "type": "ui_toast",
        "z": "48a7733923a33252",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "No",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "ask",
        "x": 630,
        "y": 440,
        "wires": [
            [
                "4df07b1e9c4c73b2"
            ]
        ]
    },
    {
        "id": "b25609b65f7426c8",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set text",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "\"Delete \" & filename & \"?\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Confirmation",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 440,
        "wires": [
            [
                "a4a7c1b41f99642e"
            ]
        ]
    },
    {
        "id": "4df07b1e9c4c73b2",
        "type": "switch",
        "z": "48a7733923a33252",
        "name": "yes?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Yes",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 790,
        "y": 440,
        "wires": [
            [
                "30c322a137fb9155"
            ]
        ]
    },
    {
        "id": "874dcadb8b86c83d",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "set flow.Dir&Hidden",
        "func": "let dir = flow.get(\"Dir\") || \"/\";\nflow.set(\"Dir\", dir);\n\nlet hidden = flow.get(\"Hidden\") || false;\nflow.set(\"Hidden\", hidden);\n\nif (msg.topic===\"parent\") {\n    var path = dir.split('/');\n    path.pop();\n    dir = path.join('/'); \n    if (dir===\"\") dir=\"/\";\n    flow.set(\"Dir\", dir);\n}\n\nif (msg.topic===\"change\") {\n    dir=msg.payload;    \n    flow.set(\"Dir\", dir);\n}\n\nif (msg.topic===\"hidden\") {\n    hidden=msg.payload;    \n    flow.set(\"Hidden\", hidden);\n}\n\n//if (msg.topic===\"refresh\") {\n//}\nnode.status({ fill: \"green\", shape: \"dot\", text: dir });\n\nmsg.payload = {\"start\":dir, \"hidden\": hidden};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 280,
        "wires": [
            [
                "1c8f7941c9d116e6",
                "05e5d89d8abad833"
            ]
        ]
    },
    {
        "id": "5adbf59db2d4b64f",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Parent",
        "group": "160e81fb.f1c86e",
        "order": 4,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "arrow_upwards",
        "payload": "",
        "payloadType": "str",
        "topic": "parent",
        "topicType": "str",
        "x": 90,
        "y": 160,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "d560959631afbf82",
        "type": "ui_button",
        "z": "48a7733923a33252",
        "name": "Home",
        "group": "160e81fb.f1c86e",
        "order": 6,
        "width": 1,
        "height": 1,
        "passthru": true,
        "label": "",
        "tooltip": "",
        "color": "",
        "bgcolor": "#51aa00",
        "className": "",
        "icon": "home",
        "payload": "HOME",
        "payloadType": "global",
        "topic": "change",
        "topicType": "str",
        "x": 90,
        "y": 100,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "1f60efffec2661cc",
        "type": "ui_switch",
        "z": "48a7733923a33252",
        "name": "Hidden",
        "label": "",
        "tooltip": "Show hidden files",
        "group": "160e81fb.f1c86e",
        "order": 14,
        "width": 1,
        "height": 1,
        "passthru": false,
        "decouple": "false",
        "topic": "hidden",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "check_box",
        "oncolor": "#000000",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "check_box_outline_blank",
        "offcolor": "#000000",
        "animate": true,
        "className": "",
        "x": 100,
        "y": 220,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "f3b40cbd5c41ca85",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "chdir",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "change",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 280,
        "wires": [
            [
                "874dcadb8b86c83d"
            ]
        ]
    },
    {
        "id": "0f87aa78c13d2d5c",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set flow.File",
        "rules": [
            {
                "t": "set",
                "p": "File",
                "pt": "flow",
                "to": "payload.name",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "payload.name",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 140,
        "wires": [
            [
                "4eccfb8e73e80732"
            ]
        ]
    },
    {
        "id": "d0799928afba9280",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "table data",
        "func": "for (var i = 0; i < msg.payload.length; i++) {\n//  msg.payload[i].stat.size = msg.payload[i].stat.size / 1024;\n    msg.payload[i].stat.created = msg.payload[i].stat.created.toISOString().slice(0, 19).replace('T', ' ');\n    msg.payload[i].stat.changed = msg.payload[i].stat.changed.toISOString().slice(0, 19).replace('T', ' ');\n    msg.payload[i].stat.accessed = msg.payload[i].stat.accessed.toISOString().slice(0, 19).replace('T', ' ');\n    msg.payload[i].stat.statusChanged = msg.payload[i].stat.statusChanged.toISOString().slice(0, 19).replace('T', ' ');\n//  msg.payload[i].fname = (msg.payload[i].stat.isFile?\"\":\"[\") + msg.payload[i].name.replace(/^.*(\\\\|\\/|\\:)/, '')+(msg.payload[i].stat.isFile?\"\":\"]\");\n    msg.payload[i].fname = (msg.payload[i].stat.isFile ? \"\" : \"<b>[\") + msg.payload[i].name.replace(/^.*(\\\\|\\/|\\:)/, '') + (msg.payload[i].stat.isFile ? \"\" : \"]</b>\");\n    if (msg.payload[i].fname.startsWith('.') || msg.payload[i].fname.startsWith('<b>[.'))\n        msg.payload[i].fname = \"<i>\" + msg.payload[i].fname + \"</i>\";\n//  msg.payload[i].link = msg.payload[i].stat.isDirectory ? \"\" : \"/download?filename=\" + msg.payload[i].name;\n    msg.payload[i].link = msg.payload[i].stat.isDirectory ? \"\" : \"<a href=\\\"/download?filename=\" + msg.payload[i].name + \"\\\"><img src=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACf0lEQVR42mNkwAE0ApLF/wqIKwOZ/5k/vLxzY8Pc19jUMaILGPdsjfik4VDy5ieD0X+oPBPQEBF2htN8Nw50nynxXoPVADEzVw6himVLX/znCmLAAyQZv6142xEV/+rU7l8oBiitfrn2HRMPXDPQVgZWJgj797//DP+QHCv878uyu6Hi0XADJKuXR3438luGbJO7GAPDbP2/YHbqsc8MO7/wAVUzweW5zm0KetYauR5sgPCiJ2f/cgsa4TIg7fA7hl1vWRj+cfIDnQYxhPnL22Nv4+WsGZnldSR4+048AxrPCHOSuzgDg6nAf4ZUuX9gxbOvfWI49/4fw643TAy/OaCG/P//73ORmSgji56TDU/95sPItjuLMjDM1PvLwAZ18a+//xmyj31g2PcWKMDMzPCbnRfsnS/1nqaMzFrWtrzNuw6hhzbMEKBNYM37gZoZmRghbmRiZvjFxs3wqcrZjJFRQEKab86dx4yMjIyYhvxnYPnyjmH/G0awZogSKM3I+O9FmpY4WISn68h5FmVDfZAmTmYGBjvh/3BDmP7+YWD++xOs6cCL3wx/gBEMYv++dfrU63pfc7CtrFZB8dxFixaAwpGf5R9DtsRnRKwDxRih9NQ7fxl+MjCDDXjbEx/x48yOlTB1zFxFi9azWQf7gvzM+O8vA8uvL+DEBFIMcTHC+d8Or177fmpOGFDgH8LfrOx8XDkzl7Jah/iAFf//x8D2+xsDM5CGRTBU8/r3MwrjGP7+/oItM7GymvvFs/sX5DGrmWqDgo7t7w8Glr+///2+ffrS501TJ/44u3MJUN0fnLkRCtgYuQXkmMQVlBj+A93y8v7d/98+PgElCXSFAKXm39j74So1AAAAAElFTkSuQmCC\\\" /></a>\";\n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 200,
        "wires": [
            [
                "b8b88aab13c13447"
            ]
        ]
    },
    {
        "id": "b8b88aab13c13447",
        "type": "sort",
        "z": "48a7733923a33252",
        "name": "",
        "order": "ascending",
        "as_num": false,
        "target": "payload",
        "targetType": "msg",
        "msgKey": "$lowercase(fname)\t",
        "msgKeyType": "jsonata",
        "seqKey": "payload",
        "seqKeyType": "msg",
        "x": 270,
        "y": 140,
        "wires": [
            [
                "54cee00c2aab4588"
            ]
        ]
    },
    {
        "id": "e02e46b423ddef65",
        "type": "switch",
        "z": "48a7733923a33252",
        "name": "is file?",
        "property": "payload.stat.isFile",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 630,
        "y": 140,
        "wires": [
            [
                "0f87aa78c13d2d5c",
                "2999856f3c6017d7"
            ],
            [
                "f3b40cbd5c41ca85"
            ]
        ]
    },
    {
        "id": "f696127a39b59722",
        "type": "yaml",
        "z": "48a7733923a33252",
        "property": "payload",
        "name": "",
        "x": 770,
        "y": 100,
        "wires": [
            [
                "dcfa53334425c5c5"
            ]
        ]
    },
    {
        "id": "dcfa53334425c5c5",
        "type": "ui_template",
        "z": "48a7733923a33252",
        "group": "26e8fe8026c92abb",
        "name": "Details",
        "order": 2,
        "width": 6,
        "height": 6,
        "format": "<textarea rows=\"21\">{{msg.payload}}</textarea>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 930,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "968d285a67eab4bb",
        "type": "inject",
        "z": "48a7733923a33252",
        "name": "INIT",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "ui_control",
                "v": "{\"tabulator\":{\"selectable\":1}}",
                "vt": "json"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 90,
        "y": 40,
        "wires": [
            [
                "54cee00c2aab4588",
                "b3b5c93025760016"
            ]
        ]
    },
    {
        "id": "4eccfb8e73e80732",
        "type": "file in",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 920,
        "y": 200,
        "wires": [
            [
                "bffe6dff2143e980"
            ]
        ]
    },
    {
        "id": "4931b2b91991fb77",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "clean",
        "rules": [
            {
                "t": "delete",
                "p": "payload.link",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "payload.fname",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 100,
        "wires": [
            [
                "f696127a39b59722"
            ]
        ]
    },
    {
        "id": "3995b2e8155a78af",
        "type": "ui_chart",
        "z": "48a7733923a33252",
        "name": "",
        "group": "26e8fe8026c92abb",
        "order": 3,
        "width": 6,
        "height": 4,
        "label": "CSV file",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "4",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 920,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "54cee00c2aab4588",
        "type": "ui_table",
        "z": "48a7733923a33252",
        "group": "160e81fb.f1c86e",
        "name": "",
        "order": 18,
        "width": 12,
        "height": 10,
        "columns": [
            {
                "field": "fname",
                "title": "Name",
                "width": "35%",
                "align": "left",
                "formatter": "html",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "stat.size",
                "title": "Size",
                "width": "15%",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "stat.created",
                "title": "Created",
                "width": "22%",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "stat.changed",
                "title": "Changed",
                "width": "22%",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "link",
                "title": "",
                "width": "",
                "align": "left",
                "formatter": "html",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 490,
        "y": 140,
        "wires": [
            [
                "e02e46b423ddef65",
                "4931b2b91991fb77"
            ]
        ]
    },
    {
        "id": "aa26cdb6da42d2f5",
        "type": "ui_form",
        "z": "48a7733923a33252",
        "name": "Editor",
        "label": "",
        "group": "4128a70510a0cd4e",
        "order": 2,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "File name",
                "value": "filename",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "",
                "value": "content",
                "type": "multiline",
                "required": true,
                "rows": 9
            }
        ],
        "formValue": {
            "filename": "",
            "content": ""
        },
        "payload": "",
        "submit": "Save",
        "cancel": "",
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "x": 930,
        "y": 320,
        "wires": [
            [
                "7ec0ae66e287c97c"
            ]
        ]
    },
    {
        "id": "bffe6dff2143e980",
        "type": "function",
        "z": "48a7733923a33252",
        "name": "form data",
        "func": "var cloned = RED.util.cloneMessage(msg);\nvar formdata = {payload:{}};\nformdata.payload.filename = cloned.filename;\nformdata.payload.content = cloned.payload;\nreturn formdata;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 260,
        "wires": [
            [
                "aa26cdb6da42d2f5"
            ]
        ]
    },
    {
        "id": "7ec0ae66e287c97c",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "set msg",
        "rules": [
            {
                "t": "move",
                "p": "payload.filename",
                "pt": "msg",
                "to": "filename",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.content",
                "pt": "msg",
                "to": "content",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Confirmation",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "\"Save \" & filename & \"?\"",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 380,
        "wires": [
            [
                "50d209d0b31f25a6"
            ]
        ]
    },
    {
        "id": "50d209d0b31f25a6",
        "type": "ui_toast",
        "z": "48a7733923a33252",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": false,
        "outputs": 1,
        "ok": "Yes",
        "cancel": "No",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "confirm",
        "x": 480,
        "y": 380,
        "wires": [
            [
                "d6dd05798b041c4a"
            ]
        ]
    },
    {
        "id": "d6dd05798b041c4a",
        "type": "switch",
        "z": "48a7733923a33252",
        "name": "yes?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Yes",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 630,
        "y": 380,
        "wires": [
            [
                "c84fa79f2496e377"
            ]
        ]
    },
    {
        "id": "5aec8815f6ae6c9c",
        "type": "file",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 920,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "c84fa79f2496e377",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "content",
        "rules": [
            {
                "t": "move",
                "p": "content",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 380,
        "wires": [
            [
                "5aec8815f6ae6c9c"
            ]
        ]
    },
    {
        "id": "b3b5c93025760016",
        "type": "exec",
        "z": "48a7733923a33252",
        "command": "pwd",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 270,
        "y": 40,
        "wires": [
            [
                "1a1a090377e2b43e"
            ],
            [],
            []
        ]
    },
    {
        "id": "8096898980123bce",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "get Dir",
        "rules": [
            {
                "t": "set",
                "p": "path",
                "pt": "msg",
                "to": "Dir",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "path & \"/\" & file.name",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 40,
        "wires": [
            [
                "5af00f52190803f6"
            ]
        ]
    },
    {
        "id": "5af00f52190803f6",
        "type": "file",
        "z": "48a7733923a33252",
        "name": "",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 920,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1c8f7941c9d116e6",
        "type": "change",
        "z": "48a7733923a33252",
        "name": "is dir",
        "rules": [
            {
                "t": "set",
                "p": "payload.name",
                "pt": "msg",
                "to": "payload.start",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 280,
        "wires": [
            [
                "2999856f3c6017d7"
            ]
        ]
    },
    {
        "id": "2999856f3c6017d7",
        "type": "ui_text",
        "z": "48a7733923a33252",
        "group": "160e81fb.f1c86e",
        "order": 2,
        "width": 12,
        "height": 1,
        "name": "",
        "label": "Path:",
        "format": "{{msg.payload.name}}",
        "layout": "row-left",
        "className": "",
        "x": 630,
        "y": 280,
        "wires": []
    },
    {
        "id": "05e5d89d8abad833",
        "type": "fs-file-lister",
        "z": "48a7733923a33252",
        "name": "",
        "start": "data",
        "pattern": "*.*",
        "folders": "*",
        "hidden": false,
        "lstype": "both",
        "path": true,
        "single": true,
        "depth": 0,
        "stat": true,
        "showWarnings": false,
        "x": 280,
        "y": 200,
        "wires": [
            [
                "d0799928afba9280"
            ]
        ]
    },
    {
        "id": "c5268070.c55a3",
        "type": "ui_template",
        "z": "48a7733923a33252",
        "group": "26e8fe8026c92abb",
        "name": "upload",
        "order": 4,
        "width": 6,
        "height": 1,
        "format": "\n<body>\n<button class=\"md-raised md-button md-ink-ripple\" onclick=\"importData()\">Upload</button>    \n\n<script>\nlet restoreScope = scope;\n\nfunction importData() {\n  let input = document.createElement('input');\n  input.type = 'file';\n  input.id = 'restoreBtn';\n  input.onchange = _ => {\n    // you can use this method to get file and perform respective operations\n        let fReader = new FileReader();\n        fReader.readAsArrayBuffer(input.files[0]);\n        fReader.onloadend = function(event){\n        restoreScope.send({\n            file:{name:input.files[0].name},\n            payload:event.target.result\n          });}\n        };\n  input.click();\n}\n</script>\n</body>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 630,
        "y": 60,
        "wires": [
            [
                "8096898980123bce"
            ]
        ]
    },
    {
        "id": "1a1a090377e2b43e",
        "type": "change",
        "z": "48a7733923a33252",
        "g": "34047250a1f44ce1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HOME",
                "pt": "global",
                "to": "$trim(payload)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 60,
        "wires": [
            [
                "d560959631afbf82"
            ]
        ]
    },
    {
        "id": "c40baf7823997e05",
        "type": "catch",
        "z": "48a7733923a33252",
        "name": "void",
        "scope": [
            "71ca9deecf8d99c0",
            "e945f13798bed93a",
            "c58e8827edbef0b8"
        ],
        "uncaught": false,
        "x": 50,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "71ca9deecf8d99c0",
        "type": "watch-directory",
        "z": "48a7733923a33252",
        "folder": "Dir",
        "recursive": 0,
        "typeEvent": "create",
        "ignoreInitial": true,
        "ignoredFiles": "",
        "name": "create",
        "x": 70,
        "y": 280,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "e945f13798bed93a",
        "type": "watch-directory",
        "z": "48a7733923a33252",
        "folder": "Dir",
        "recursive": 0,
        "typeEvent": "update",
        "ignoreInitial": true,
        "ignoredFiles": "",
        "name": "update",
        "x": 90,
        "y": 300,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "c58e8827edbef0b8",
        "type": "watch-directory",
        "z": "48a7733923a33252",
        "folder": "Dir",
        "recursive": 0,
        "typeEvent": "delete",
        "ignoreInitial": true,
        "ignoredFiles": "",
        "name": "delete",
        "x": 110,
        "y": 320,
        "wires": [
            [
                "91618269345c9b5a"
            ]
        ]
    },
    {
        "id": "b382101fb64bb6cd",
        "type": "debug",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 360,
        "wires": []
    },
    {
        "id": "85770b738242d577",
        "type": "inject",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "5s",
        "props": [],
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "x": 110,
        "y": 120,
        "wires": [
            [
                "b36e0ea9b8c2c5a8"
            ]
        ]
    },
    {
        "id": "b36e0ea9b8c2c5a8",
        "type": "function",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "system mon",
        "func": "var freemem               = os.freemem();\nvar totalmem              = os.totalmem();\nvar os_uptime             = os.uptime();\nvar {user, system}        = process.cpuUsage();\nvar {heapUsed, heapTotal} = process.memoryUsage();\nvar p_uptime              = process.uptime();\nvar loadavg               = os.loadavg();\n\ncpuUsage(perc => node.send({\n    payload: {\n        cpu_usage:    perc,\n        cpu_user:     user / 1000 / 1000,\n        cpu_system:   system / 1000 / 1000,\n\n        used_heap_MB: round(heapUsed / 1024 / 1024),\n        heap_usage:   round(heapUsed / heapTotal * 100),\n        tot_heap_MB:  round(heapTotal / 1024 / 1024),\n        free_heap_MB: round((heapTotal - heapUsed) / 1024 / 1024),\n        \n        free_ram_GB:  round(freemem / 1024 / 1024 / 1024),\n        tot_ram_GB:   round(totalmem / 1024 / 1024 / 1024),\n        ram_usage:    round((1 - freemem / totalmem) * 100),\n        used_ram_GB:  round((totalmem - freemem) / 1024 / 1024 / 1024),\n\n        loadavg_1:    loadavg[0],\n        loadavg_5:    loadavg[1],\n        loadavg_15:   loadavg[2],\n\n        os_uptime_s:  os_uptime,\n        os_uptime:    timeConversion(os_uptime),\n        p_uptime_s:   p_uptime,\n        p_uptime:     timeConversion(p_uptime),\n\n        last_update: new Date()\n    }\n}))\n\n/**\n * Method used in node-os-utils\n * \n * @description Measure the CPU usage calculated between two different CPU usage samples\n * @param {function} cb A callback function the result is passed to\n * @param {number} [core=-1] The CPU core index to measure. When is not greater than -1 then it is \"averaged\" for all CPU cores.\n * @param {number} [sampleMs=1000]  The number of milliseconds between the CPU usage samples\n */\nfunction cpuUsage(cb, core, sampleMs) {\n    var deltaUsed;\n    var deltaIdle;\n    var timesKeys = [\"user\", \"nice\", \"sys\", \"irq\"];\n    var allCores = null === core || !(core > -1);\n\n    var byCore = (cpu, i) =>\n        allCores || core === i;\n\n    var bySampleKey = (sample, key) =>\n        sample.filter(byCore).reduce(\n            (sum, cpu) => sum + cpu.times[key], 0);\n\n    var sample0 = os.cpus();\n\n    setTimeout(function () {\n        var sample1 = os.cpus();\n\n        deltaUsed = timesKeys.reduce(\n            (diff, key) => diff + bySampleKey(sample1, key) - bySampleKey(sample0, key), 0);\n\n        deltaIdle = bySampleKey(sample1, \"idle\") - bySampleKey(sample0, \"idle\");\n\n        if (\"function\" === typeof cb) {\n            cb(100 * (deltaUsed / (deltaUsed + deltaIdle)));\n        }\n    }, sampleMs || 1000);\n}\n\nfunction round(n, d = 2) {\n    return Math.round(n * 10 ** d) / 10 ** d;\n}\n\nfunction timeConversion(seconds) {\n    var minutes = seconds / 60;\n    var hours = seconds / 3600;\n    var days = seconds / 86400;\n\n    if (seconds < 60) {\n        return seconds.toFixed(1) + \" Sec\";\n    } else if (minutes < 60) {\n        return minutes.toFixed(1) + \" Min\";\n    } else if (hours < 24) {\n        return hours.toFixed(1) + \" Hrs\";\n    } else {\n        return days.toFixed(1) + \" Days\"\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "os",
                "module": "os"
            },
            {
                "var": "process",
                "module": "process"
            }
        ],
        "x": 290,
        "y": 120,
        "wires": [
            [
                "d433dfb4813e729c",
                "87e284b688c9bc1d",
                "d5f8bbdc8a50d1c4",
                "1bb52214bb93b59c",
                "407393b06d188578",
                "978f120d4b6d5d8d",
                "7c204748fb1d30c6",
                "9c89af026d6e876a",
                "943a803ae4a09ae9"
            ]
        ]
    },
    {
        "id": "d59207da68d0e961",
        "type": "ui_chart",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "ade1f84b9abbf285",
        "order": 2,
        "width": "6",
        "height": "5",
        "label": "Memory",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 840,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "4b5a96f2a67089df",
        "type": "ui_chart",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "ade1f84b9abbf285",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Processor",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 840,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "d433dfb4813e729c",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 1,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Uptime os/node",
        "format": "{{msg.payload.os_uptime}} / {{msg.payload.p_uptime}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 220,
        "wires": []
    },
    {
        "id": "e475bf4d1347ce6d",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 2,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Hostname (IP)",
        "format": "{{msg.payload.hostname}} ({{msg.payload.address}})",
        "layout": "row-right",
        "className": "",
        "x": 540,
        "y": 260,
        "wires": []
    },
    {
        "id": "38fb665c04a2fa2b",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 3,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Platform Arch",
        "format": "{{msg.payload.platform}} {{msg.payload.arch}} {{msg.payload.endianness}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 300,
        "wires": []
    },
    {
        "id": "12262ec3b4702e3b",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 4,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Cloud Release",
        "format": "{{msg.payload.release}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 340,
        "wires": []
    },
    {
        "id": "93fcb0ebab0ad1fb",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 5,
        "width": "0",
        "height": "0",
        "name": "CPU Model",
        "label": "CPU #{{msg.payload.n_cores}}",
        "format": "{{msg.payload.cpu_model}}",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 380,
        "wires": []
    },
    {
        "id": "772de72b62e1e4e0",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 6,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "User info (GID:UID)",
        "format": "{{msg.payload.username}} ({{msg.payload.gid}}:{{msg.payload.uid}})",
        "layout": "row-spread",
        "className": "",
        "x": 550,
        "y": 460,
        "wires": []
    },
    {
        "id": "990e8802adb04ed7",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 9,
        "width": "0",
        "height": "0",
        "name": "",
        "label": "Node version",
        "format": "{{msg.payload.node_version}}",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 580,
        "wires": []
    },
    {
        "id": "1bb52214bb93b59c",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "b6cc1aae65862dae",
        "order": 4,
        "width": "6",
        "height": "3",
        "gtype": "gage",
        "title": "CPU",
        "label": "units",
        "format": "{{msg.payload.cpu_usage | number:3}} %",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 510,
        "y": 80,
        "wires": []
    },
    {
        "id": "87e284b688c9bc1d",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "b6cc1aae65862dae",
        "order": 4,
        "width": "6",
        "height": "3",
        "gtype": "gage",
        "title": "Heap",
        "label": "MB",
        "format": "{{msg.payload.used_heap_MB| number:2}} / {{msg.payload.tot_heap_MB| number:2}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 510,
        "y": 160,
        "wires": []
    },
    {
        "id": "d5f8bbdc8a50d1c4",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "b6cc1aae65862dae",
        "order": 4,
        "width": "6",
        "height": "3",
        "gtype": "gage",
        "title": "RAM",
        "label": "GB",
        "format": "{{msg.payload.used_ram_GB| number:2}} / {{msg.payload.tot_ram_GB| number:2}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 510,
        "y": 120,
        "wires": []
    },
    {
        "id": "357b6025664fd028",
        "type": "inject",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "5min",
        "props": [],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "x": 110,
        "y": 320,
        "wires": [
            [
                "e5dc586dcb92b24a"
            ]
        ]
    },
    {
        "id": "4a1850006419b797",
        "type": "function",
        "z": "f29ecd9eab0f0d83",
        "name": "node-os-utils",
        "func": "var freemem = os.freemem();\nvar totalmem = os.totalmem();\nvar os_uptime = os.uptime();\nvar { user, system } = process.cpuUsage();\nvar { heapUsed, heapTotal } = process.memoryUsage();\nvar p_uptime = process.uptime();\nvar loadavg = os.loadavg();\n\ncpuUsage(perc => node.send({\n    payload: {\n        cpu_usage:    perc,\n        cpu_user:     user / 1000 / 1000,\n        cpu_system:   system / 1000 / 1000,\n\n        used_heap_MB: round(heapUsed / 1024 / 1024),\n        heap_usage:   round(heapUsed / heapTotal * 100),\n        tot_heap_MB:  round(heapTotal / 1024 / 1024),\n        free_heap_MB: round((heapTotal - heapUsed) / 1024 / 1024),\n        \n        free_ram_GB:  round(freemem / 1024 / 1024 / 1024),\n        tot_ram_GB:   round(totalmem / 1024 / 1024 / 1024),\n        ram_usage:    round((1 - freemem / totalmem) * 100),\n        used_ram_GB:  round((totalmem - freemem) / 1024 / 1024 / 1024),\n        \n        loadavg_1:    loadavg[0],\n        loadavg_5:    loadavg[1],\n        loadavg_15:   loadavg[2],\n\n        os_uptime_s:  os_uptime,\n        os_uptime:    timeConversion(os_uptime),\n        p_uptime_s:   p_uptime,\n        p_uptime:     timeConversion(p_uptime),\n\n        arch: os.arch(),\n        cpus: os.cpus(),\n        cpu_model: os.cpus()[os.cpus().length - 1].model,\n        cpu_speed: os.cpus()[os.cpus().length - 1].speed,\n        n_cores: os.cpus().length,\n        endianness: os.endianness(),\n        homedir: os.homedir(),\n        hostname: os.hostname(),\n        network: os.networkInterfaces(),\n        address: os.networkInterfaces().eth0[0].address,\n        platform: os.platform(),\n        release: os.release(),\n        type: os.type(),\n        userInfo: os.userInfo(),\n        gid: os.userInfo().gid,\n        uid: os.userInfo().uid,\n        username: os.userInfo().username,\n        shell: os.userInfo().shell,\n        os_version: os.version(),\n\n        cwd: process.cwd(),\n        node_version: process.version,\n\n        last_update: new Date()\n    }\n}))\n\n/**\n * Method used in node-os-utils\n * \n * @description Measure the CPU usage calculated between two different CPU usage samples\n * @param {function} cb A callback function the result is passed to\n * @param {number} [core=-1] The CPU core index to measure. When is not greater than -1 then it is \"averaged\" for all CPU cores.\n * @param {number} [sampleMs=1000]  The number of milliseconds between the CPU usage samples\n */\nfunction cpuUsage(cb, core, sampleMs) {\n    var deltaUsed;\n    var deltaIdle;\n    var timesKeys = [\"user\", \"nice\", \"sys\", \"irq\"];\n    var allCores = null === core || !(core > -1);\n\n    var byCore = (cpu, i) =>\n        allCores || core === i;\n\n    var bySampleKey = (sample, key) =>\n        sample.filter(byCore).reduce(\n            (sum, cpu) => sum + cpu.times[key], 0);\n\n    var sample0 = os.cpus();\n\n    setTimeout(function () {\n        var sample1 = os.cpus();\n\n        deltaUsed = timesKeys.reduce(\n            (diff, key) => diff + bySampleKey(sample1, key) - bySampleKey(sample0, key), 0);\n\n        deltaIdle = bySampleKey(sample1, \"idle\") - bySampleKey(sample0, \"idle\");\n\n        if (\"function\" === typeof cb) {\n            cb(100 * (deltaUsed / (deltaUsed + deltaIdle)));\n        }\n    }, sampleMs || 1000);\n}\n\nfunction round(n, d = 2) {\n    return Math.round(n * 10 ** d) / 10 ** d;\n}\n\nfunction timeConversion(seconds) {\n    var minutes = seconds / 60;\n    var hours = seconds / 3600;\n    var days = seconds / 86400;\n\n    if (seconds < 60) {\n        return seconds.toFixed(1) + \" Sec\";\n    } else if (minutes < 60) {\n        return minutes.toFixed(1) + \" Min\";\n    } else if (hours < 24) {\n        return hours.toFixed(1) + \" Hrs\";\n    } else {\n        return days.toFixed(1) + \" Days\"\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "os",
                "module": "os"
            },
            {
                "var": "process",
                "module": "process"
            }
        ],
        "x": 290,
        "y": 360,
        "wires": [
            [
                "407393b06d188578",
                "1bb52214bb93b59c",
                "d5f8bbdc8a50d1c4",
                "87e284b688c9bc1d",
                "d433dfb4813e729c",
                "7c204748fb1d30c6",
                "9c89af026d6e876a",
                "943a803ae4a09ae9",
                "978f120d4b6d5d8d",
                "e475bf4d1347ce6d",
                "38fb665c04a2fa2b",
                "12262ec3b4702e3b",
                "93fcb0ebab0ad1fb",
                "772de72b62e1e4e0",
                "a72c3c707a0495a6",
                "f66d1fae20c650a0",
                "990e8802adb04ed7",
                "716b83720f6ed7c3",
                "b382101fb64bb6cd"
            ]
        ]
    },
    {
        "id": "a72c3c707a0495a6",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 7,
        "width": "0",
        "height": "0",
        "name": "Home (bash)",
        "label": "Home (bash:{{msg.payload.shell}}) Current dir",
        "format": "{{msg.payload.homedir}} {{msg.payload.cwd}} ",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 500,
        "wires": []
    },
    {
        "id": "f66d1fae20c650a0",
        "type": "ui_text",
        "z": "f29ecd9eab0f0d83",
        "group": "a9912d64.97094",
        "order": 8,
        "width": "0",
        "height": "0",
        "name": "OS version",
        "label": "{{msg.payload.type}} version",
        "format": "{{msg.payload.os_version}}",
        "layout": "row-spread",
        "className": "",
        "x": 530,
        "y": 540,
        "wires": []
    },
    {
        "id": "e5dc586dcb92b24a",
        "type": "function",
        "z": "f29ecd9eab0f0d83",
        "d": true,
        "name": "system info",
        "func": "msg.payload = {       \n    arch:         os.arch(),\n    cpus:         os.cpus(),\n    cpu_model:    os.cpus()[os.cpus().length - 1].model,\n    cpu_speed:    os.cpus()[os.cpus().length - 1].speed,\n    n_cpus:       os.cpus().length,\n    endianness:   os.endianness(),\n    homedir:      os.homedir(),\n    hostname:     os.hostname(),\n    network:      os.networkInterfaces(),\n    address:      os.networkInterfaces().eth0[0].address,\n    platform:     os.platform(),\n    release:      os.release(),\n    type:         os.type(),\n    userInfo:     os.userInfo(),\n    gid:          os.userInfo().gid,\n    uid:          os.userInfo().uid,\n    username:     os.userInfo().username,\n    shell:        os.userInfo().shell,\n    os_version:   os.version(),\n\n    cwd:          process.cwd(),\n    node_version: process.version,\n\n    last_update:  new Date()\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "os",
                "module": "os"
            },
            {
                "var": "process",
                "module": "process"
            }
        ],
        "x": 290,
        "y": 320,
        "wires": [
            [
                "e475bf4d1347ce6d",
                "38fb665c04a2fa2b",
                "12262ec3b4702e3b",
                "93fcb0ebab0ad1fb",
                "772de72b62e1e4e0",
                "a72c3c707a0495a6",
                "f66d1fae20c650a0",
                "990e8802adb04ed7"
            ]
        ]
    },
    {
        "id": "407393b06d188578",
        "type": "split",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 510,
        "y": 40,
        "wires": [
            [
                "e14bc855c64bcbec",
                "1ff2be7d96afb5f0"
            ]
        ]
    },
    {
        "id": "e14bc855c64bcbec",
        "type": "switch",
        "z": "f29ecd9eab0f0d83",
        "name": "mem?",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ram",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "heap",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 60,
        "wires": [
            [],
            [
                "d59207da68d0e961"
            ]
        ]
    },
    {
        "id": "5a48bbed736ee220",
        "type": "comment",
        "z": "f29ecd9eab0f0d83",
        "name": "README",
        "info": "### Function nodes\n```node-os-utils``` =\n```system mon``` + \n```system info```\n\n### Swith node\n*mem* = *ram* + *heap*\n\n### UI Widget configuration via msg.ui_control\nhttps://github.com/node-red/node-red-dashboard/blob/master/config-fields.md",
        "x": 100,
        "y": 40,
        "wires": []
    },
    {
        "id": "7c204748fb1d30c6",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 1,
        "width": "6",
        "height": "2",
        "gtype": "gage",
        "title": "1 Minute",
        "label": "load",
        "format": "{{msg.payload.loadavg_1| number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "1",
        "seg2": "3",
        "className": "",
        "x": 840,
        "y": 500,
        "wires": []
    },
    {
        "id": "9c89af026d6e876a",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 2,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "5 Minutes",
        "label": "load",
        "format": "{{msg.payload.loadavg_5| number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "1",
        "seg2": "3",
        "className": "",
        "x": 840,
        "y": 540,
        "wires": []
    },
    {
        "id": "943a803ae4a09ae9",
        "type": "ui_gauge",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 4,
        "width": "3",
        "height": "3",
        "gtype": "gage",
        "title": "15 Minutes",
        "label": "load",
        "format": "{{msg.payload.loadavg_15| number:2}}",
        "min": 0,
        "max": "4",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "1",
        "seg2": "3",
        "className": "",
        "x": 850,
        "y": 580,
        "wires": []
    },
    {
        "id": "52c2417885093efb",
        "type": "ui_chart",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "group": "f6e5eaea1a3d31cf",
        "order": 0,
        "width": "6",
        "height": "4",
        "label": "CPU Load Average",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": "6",
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": "",
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 870,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "978f120d4b6d5d8d",
        "type": "split",
        "z": "f29ecd9eab0f0d83",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 510,
        "y": 420,
        "wires": [
            [
                "4fef2b553738432c"
            ]
        ]
    },
    {
        "id": "4fef2b553738432c",
        "type": "switch",
        "z": "f29ecd9eab0f0d83",
        "name": "load?",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "n_cores",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "loadavg",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 420,
        "wires": [
            [
                "72daa15a9e8dee07"
            ],
            [
                "52c2417885093efb"
            ]
        ]
    },
    {
        "id": "eeac84aba4122de6",
        "type": "inject",
        "z": "f29ecd9eab0f0d83",
        "name": "5s",
        "props": [],
        "repeat": "15",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "x": 110,
        "y": 360,
        "wires": [
            [
                "4a1850006419b797"
            ]
        ]
    },
    {
        "id": "716b83720f6ed7c3",
        "type": "change",
        "z": "f29ecd9eab0f0d83",
        "name": "gauge",
        "rules": [
            {
                "t": "set",
                "p": "ui_control.max",
                "pt": "msg",
                "to": "payload.n_cores * 4",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "ui_control.seg1",
                "pt": "msg",
                "to": "payload.n_cores *1.5",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "ui_control.seg2",
                "pt": "msg",
                "to": "payload.n_cores * 3",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 540,
        "wires": [
            [
                "7c204748fb1d30c6",
                "9c89af026d6e876a",
                "943a803ae4a09ae9"
            ]
        ]
    },
    {
        "id": "1ff2be7d96afb5f0",
        "type": "switch",
        "z": "f29ecd9eab0f0d83",
        "name": "cpu?",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "cpu_sys",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "cpu_us",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 20,
        "wires": [
            [
                "4b5a96f2a67089df"
            ],
            [
                "4b5a96f2a67089df"
            ]
        ]
    },
    {
        "id": "72daa15a9e8dee07",
        "type": "change",
        "z": "f29ecd9eab0f0d83",
        "name": "warning",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "warning",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload * 2",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 420,
        "wires": [
            [
                "52c2417885093efb"
            ]
        ]
    },
    {
        "id": "03d52703c754740f",
        "type": "base64",
        "z": "ad74ebf02b043edd",
        "name": "",
        "action": "str",
        "property": "client",
        "x": 600,
        "y": 40,
        "wires": [
            [
                "b3eeed6c89dea822"
            ]
        ]
    },
    {
        "id": "b3eeed6c89dea822",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "authorization",
                "pt": "msg",
                "to": "\"Basic \" & client",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 40,
        "wires": [
            [
                "4f65d8de5f98839d"
            ]
        ]
    },
    {
        "id": "4f65d8de5f98839d",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "POST /oauth2/token",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{keyrock}}}/oauth2/token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Authorization",
                "keyValue": "",
                "valueType": "msg",
                "valueValue": "authorization"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "other",
                "valueValue": "application/x-www-form-urlencoded"
            }
        ],
        "x": 140,
        "y": 120,
        "wires": [
            [
                "da138042bdf3be14",
                "010630e8a878e3f1"
            ]
        ]
    },
    {
        "id": "010630e8a878e3f1",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "move msg.payload.access_token",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode & \": \" & (statusCode>300?payload.error:payload.access_token)",
        "statusType": "jsonata",
        "x": 440,
        "y": 120,
        "wires": []
    },
    {
        "id": "38e0fcfa95507736",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "set flow vars",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "orion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 120,
        "wires": [
            [
                "2fcf1d197f6fc2cf",
                "be89ddde14752b89"
            ]
        ]
    },
    {
        "id": "db311fb4dc3be4cd",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "FIWARE Lab*",
        "rules": [
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "http://orion.lab.fiware.org:1026",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "keyrock",
                "pt": "msg",
                "to": "https://account.lab.fiware.org",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "client",
                "pt": "msg",
                "to": "d74430bb62c242309390fe797e403595:cbebd77526dc4cb09631734a9e0dc451",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "grant_type=password&username=ecb00600@yuoia.com&password=ecb00600@yuoia.com",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 40,
        "wires": [
            [
                "03d52703c754740f"
            ]
        ]
    },
    {
        "id": "2fcf1d197f6fc2cf",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "vars",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 200,
        "wires": [
            [
                "bfad9e0c06ac7047"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "bfad9e0c06ac7047",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "GET /version (v2)",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/version",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 650,
        "y": 260,
        "wires": [
            [
                "871fd1a41385a6e3"
            ]
        ]
    },
    {
        "id": "871fd1a41385a6e3",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "orion",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload.orion.version",
        "statusType": "msg",
        "x": 890,
        "y": 260,
        "wires": []
    },
    {
        "id": "f761a6a06d1a6c6d",
        "type": "comment",
        "z": "ad74ebf02b043edd",
        "name": "CREATE - v2",
        "info": "",
        "x": 110,
        "y": 320,
        "wires": []
    },
    {
        "id": "6d0e29f38722ce85",
        "type": "inject",
        "z": "ad74ebf02b043edd",
        "name": "NGSI v2 entity",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"id\":\"urn:ngsi-ld:TemperatureSensor:001\",\"type\":\"TemperatureSensor\",\"category\":{\"type\":\"Text\",\"value\":\"Sensor\"},\"temperature\":{\"type\":\"Integer\",\"value\":0,\"metadata\":{\"unitCode\":{\"type\":\"Text\",\"value\":\"CEL\"}}}}",
        "payloadType": "json",
        "x": 110,
        "y": 360,
        "wires": [
            [
                "6f42459eaa465d9b"
            ]
        ]
    },
    {
        "id": "6f42459eaa465d9b",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "vars",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 360,
        "wires": [
            [
                "b127ec887d3577f0"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "b127ec887d3577f0",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "POST /v2/entities",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "application/json",
                "valueValue": ""
            },
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 650,
        "y": 360,
        "wires": [
            [
                "216e7aa73dd2d2e3"
            ]
        ]
    },
    {
        "id": "216e7aa73dd2d2e3",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "create v2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"created at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 880,
        "y": 360,
        "wires": []
    },
    {
        "id": "d416a86f54649572",
        "type": "comment",
        "z": "ad74ebf02b043edd",
        "name": "GET",
        "info": "",
        "x": 90,
        "y": 660,
        "wires": []
    },
    {
        "id": "07dbca29caa0e8f8",
        "type": "inject",
        "z": "ad74ebf02b043edd",
        "name": "get entity id",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            },
            {
                "p": "payload.options",
                "v": "keyValues",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 700,
        "wires": [
            [
                "bf5dc1c97ba690c0"
            ]
        ]
    },
    {
        "id": "bf5dc1c97ba690c0",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "vars",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 700,
        "wires": [
            [
                "4b295d24444348bb"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "4b295d24444348bb",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "GET /v2/entities/{id}",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "query",
        "url": "{{{orion}}}/v2/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 650,
        "y": 660,
        "wires": [
            [
                "3cb6122d166e2eb0"
            ]
        ]
    },
    {
        "id": "3cb6122d166e2eb0",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "get v2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : payload.id)",
        "statusType": "jsonata",
        "x": 890,
        "y": 660,
        "wires": []
    },
    {
        "id": "768f58c18afc1e44",
        "type": "comment",
        "z": "ad74ebf02b043edd",
        "name": "DELETE",
        "info": "",
        "x": 100,
        "y": 800,
        "wires": []
    },
    {
        "id": "e47c4ff3de6a65f8",
        "type": "inject",
        "z": "ad74ebf02b043edd",
        "name": "entity id",
        "props": [
            {
                "p": "x-auth-token",
                "v": "x-auth-token",
                "vt": "flow"
            },
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 90,
        "y": 840,
        "wires": [
            [
                "fe6a46e34e88c46f"
            ]
        ]
    },
    {
        "id": "fe6a46e34e88c46f",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "vars",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 840,
        "wires": [
            [
                "3403a45076909e81"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "3403a45076909e81",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "DELETE /v2/entities/{id}",
        "method": "DELETE",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 670,
        "y": 800,
        "wires": [
            [
                "219898a77b0d1cd4"
            ]
        ]
    },
    {
        "id": "219898a77b0d1cd4",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "delete v2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"deleted at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 880,
        "y": 800,
        "wires": []
    },
    {
        "id": "88eee70aebd0d43f",
        "type": "comment",
        "z": "ad74ebf02b043edd",
        "name": "WRITE",
        "info": "",
        "x": 90,
        "y": 940,
        "wires": []
    },
    {
        "id": "a0945ded83ce4d56",
        "type": "inject",
        "z": "ad74ebf02b043edd",
        "name": "entity id",
        "props": [
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 90,
        "y": 980,
        "wires": [
            [
                "2431576c916bb98e"
            ]
        ]
    },
    {
        "id": "2431576c916bb98e",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "vars",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 980,
        "wires": [
            [
                "064e4096bc223afa"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "064e4096bc223afa",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "set attr + payload",
        "rules": [
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$round(200*$random())-50",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 940,
        "wires": [
            [
                "43a8d73246bd6e98"
            ]
        ]
    },
    {
        "id": "43a8d73246bd6e98",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "PUT /v2/entities/{id}/attrs/{attr}/value",
        "method": "PUT",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}/attrs/{{{attr}}}/value",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            },
            {
                "keyType": "Content-Type",
                "keyValue": "",
                "valueType": "text/plain",
                "valueValue": ""
            }
        ],
        "x": 650,
        "y": 940,
        "wires": [
            [
                "d76675bfe6c5ed41"
            ]
        ]
    },
    {
        "id": "d76675bfe6c5ed41",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "write v2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : \"updated at \" & $now(\"[H01]:[m]:[s]\"))",
        "statusType": "jsonata",
        "x": 880,
        "y": 940,
        "wires": []
    },
    {
        "id": "c45deaada4a7b8eb",
        "type": "comment",
        "z": "ad74ebf02b043edd",
        "name": "READ",
        "info": "",
        "x": 90,
        "y": 1140,
        "wires": []
    },
    {
        "id": "4142bbe07529584f",
        "type": "inject",
        "z": "ad74ebf02b043edd",
        "name": "entity id",
        "props": [
            {
                "p": "id",
                "v": "urn:ngsi-ld:TemperatureSensor:001",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 90,
        "y": 1180,
        "wires": [
            [
                "0f250094e09c8df9"
            ]
        ]
    },
    {
        "id": "0f250094e09c8df9",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "vars",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "msg",
                "to": "x-auth-token",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "msg",
                "to": "orion",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "msg",
                "to": "orion-ld",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 1180,
        "wires": [
            [
                "c5444f723334dd04"
            ]
        ],
        "icon": "node-red-contrib-fiware_official/fiware.png"
    },
    {
        "id": "c5444f723334dd04",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "set attr",
        "rules": [
            {
                "t": "set",
                "p": "attr",
                "pt": "msg",
                "to": "temperature",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 1140,
        "wires": [
            [
                "4426e0f7c2ab8d8c"
            ]
        ]
    },
    {
        "id": "4426e0f7c2ab8d8c",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "GET /v2/entities/{id}/attrs/{attr}/value",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "{{{orion}}}/v2/entities/{{{id}}}/attrs/{{{attr}}}/value",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [
            {
                "keyType": "other",
                "keyValue": "X-Auth-Token",
                "valueType": "msg",
                "valueValue": "x-auth-token"
            }
        ],
        "x": 650,
        "y": 1140,
        "wires": [
            [
                "f04d60b9dde9ac37"
            ]
        ]
    },
    {
        "id": "f04d60b9dde9ac37",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "read v2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode & \": \" & (statusCode > 300 ? payload.error : payload)",
        "statusType": "jsonata",
        "x": 880,
        "y": 1140,
        "wires": []
    },
    {
        "id": "3a429750b59fd85e",
        "type": "inject",
        "z": "ad74ebf02b043edd",
        "name": "FIWARE Lab",
        "props": [
            {
                "p": "orion",
                "v": "http://orion.lab.fiware.org:1026",
                "vt": "str"
            },
            {
                "p": "keyrock",
                "v": "https://account.lab.fiware.org",
                "vt": "str"
            },
            {
                "p": "clientId",
                "v": "d74430bb62c242309390fe797e403595",
                "vt": "str"
            },
            {
                "p": "clientSecret",
                "v": "cbebd77526dc4cb09631734a9e0dc451",
                "vt": "str"
            },
            {
                "p": "username",
                "v": "ecb00600@yuoia.com",
                "vt": "str"
            },
            {
                "p": "password",
                "v": "ecb00600@yuoia.com",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 110,
        "y": 500,
        "wires": [
            [
                "187058d02dac483e"
            ]
        ]
    },
    {
        "id": "ceb644c2dd2761a4",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "d": true,
        "name": "set flow variables",
        "rules": [
            {
                "t": "set",
                "p": "x-auth-token",
                "pt": "flow",
                "to": "payload.access_token",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "orion",
                "pt": "flow",
                "to": "http://orion:1026",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "orion-ld",
                "pt": "flow",
                "to": "http://orion-ld:1026",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "57028b12637cf713",
        "type": "http in",
        "z": "ad74ebf02b043edd",
        "name": "",
        "url": "/fiwarelab-token",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 40,
        "wires": [
            [
                "db311fb4dc3be4cd"
            ]
        ]
    },
    {
        "id": "be89ddde14752b89",
        "type": "http response",
        "z": "ad74ebf02b043edd",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 890,
        "y": 120,
        "wires": []
    },
    {
        "id": "da138042bdf3be14",
        "type": "change",
        "z": "ad74ebf02b043edd",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.access_token",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 120,
        "wires": [
            [
                "38e0fcfa95507736"
            ]
        ]
    },
    {
        "id": "187058d02dac483e",
        "type": "http request",
        "z": "ad74ebf02b043edd",
        "name": "GET /fiwarelab-token",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://127.0.0.1:1880/fiwarelab-token",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 340,
        "y": 500,
        "wires": [
            [
                "258f9287fca00e0f"
            ]
        ]
    },
    {
        "id": "258f9287fca00e0f",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "fiware lab auth token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 600,
        "y": 500,
        "wires": []
    },
    {
        "id": "97265355ba3ec8d1",
        "type": "inject",
        "z": "ad74ebf02b043edd",
        "name": "all entities",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 100,
        "y": 560,
        "wires": [
            [
                "4ff6e7e2fe54d906"
            ]
        ]
    },
    {
        "id": "4ff6e7e2fe54d906",
        "type": "NGSI-Dataset",
        "z": "ad74ebf02b043edd",
        "name": "",
        "endpoint": "5a6b78f4b2dc9415",
        "protocol": "v2",
        "ldContext": "https://uri.etsi.org/ngsi-ld/v1/ngsi-ld-core-context.jsonld",
        "entityType": "",
        "attrs": "",
        "q": "",
        "mode": "keyValues",
        "x": 320,
        "y": 560,
        "wires": [
            [
                "b9737e74668e5323"
            ]
        ]
    },
    {
        "id": "b9737e74668e5323",
        "type": "json",
        "z": "ad74ebf02b043edd",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 490,
        "y": 560,
        "wires": [
            [
                "be2dd3478643c28a"
            ]
        ]
    },
    {
        "id": "be2dd3478643c28a",
        "type": "debug",
        "z": "ad74ebf02b043edd",
        "name": "entities",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 560,
        "wires": []
    }
]